import {
  __commonJS
} from "./chunk-TWLJ45QX.js";

// ../../../node_modules/pubnub/dist/web/pubnub.min.js
var require_pubnub_min = __commonJS({
  "../../../node_modules/pubnub/dist/web/pubnub.min.js"(exports, module) {
    !function(e, t) {
      "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = "undefined" != typeof globalThis ? globalThis : e || self).PubNub = t();
    }(exports, function() {
      "use strict";
      var e = function(t2, n2) {
        return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e2, t3) {
          e2.__proto__ = t3;
        } || function(e2, t3) {
          for (var n3 in t3)
            Object.prototype.hasOwnProperty.call(t3, n3) && (e2[n3] = t3[n3]);
        }, e(t2, n2);
      };
      function t(t2, n2) {
        if ("function" != typeof n2 && null !== n2)
          throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
        function r2() {
          this.constructor = t2;
        }
        e(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (r2.prototype = n2.prototype, new r2());
      }
      var n = function() {
        return n = Object.assign || function(e2) {
          for (var t2, n2 = 1, r2 = arguments.length; n2 < r2; n2++)
            for (var i2 in t2 = arguments[n2])
              Object.prototype.hasOwnProperty.call(t2, i2) && (e2[i2] = t2[i2]);
          return e2;
        }, n.apply(this, arguments);
      };
      function r(e2, t2) {
        var n2 = {};
        for (var r2 in e2)
          Object.prototype.hasOwnProperty.call(e2, r2) && t2.indexOf(r2) < 0 && (n2[r2] = e2[r2]);
        if (null != e2 && "function" == typeof Object.getOwnPropertySymbols) {
          var i2 = 0;
          for (r2 = Object.getOwnPropertySymbols(e2); i2 < r2.length; i2++)
            t2.indexOf(r2[i2]) < 0 && Object.prototype.propertyIsEnumerable.call(e2, r2[i2]) && (n2[r2[i2]] = e2[r2[i2]]);
        }
        return n2;
      }
      function i(e2, t2, n2, r2) {
        return new (n2 || (n2 = Promise))(function(i2, o2) {
          function s2(e3) {
            try {
              u2(r2.next(e3));
            } catch (e4) {
              o2(e4);
            }
          }
          function a2(e3) {
            try {
              u2(r2.throw(e3));
            } catch (e4) {
              o2(e4);
            }
          }
          function u2(e3) {
            var t3;
            e3.done ? i2(e3.value) : (t3 = e3.value, t3 instanceof n2 ? t3 : new n2(function(e4) {
              e4(t3);
            })).then(s2, a2);
          }
          u2((r2 = r2.apply(e2, t2 || [])).next());
        });
      }
      function o(e2, t2) {
        var n2, r2, i2, o2, s2 = { label: 0, sent: function() {
          if (1 & i2[0])
            throw i2[1];
          return i2[1];
        }, trys: [], ops: [] };
        return o2 = { next: a2(0), throw: a2(1), return: a2(2) }, "function" == typeof Symbol && (o2[Symbol.iterator] = function() {
          return this;
        }), o2;
        function a2(o3) {
          return function(a3) {
            return function(o4) {
              if (n2)
                throw new TypeError("Generator is already executing.");
              for (; s2; )
                try {
                  if (n2 = 1, r2 && (i2 = 2 & o4[0] ? r2.return : o4[0] ? r2.throw || ((i2 = r2.return) && i2.call(r2), 0) : r2.next) && !(i2 = i2.call(r2, o4[1])).done)
                    return i2;
                  switch (r2 = 0, i2 && (o4 = [2 & o4[0], i2.value]), o4[0]) {
                    case 0:
                    case 1:
                      i2 = o4;
                      break;
                    case 4:
                      return s2.label++, { value: o4[1], done: false };
                    case 5:
                      s2.label++, r2 = o4[1], o4 = [0];
                      continue;
                    case 7:
                      o4 = s2.ops.pop(), s2.trys.pop();
                      continue;
                    default:
                      if (!(i2 = s2.trys, (i2 = i2.length > 0 && i2[i2.length - 1]) || 6 !== o4[0] && 2 !== o4[0])) {
                        s2 = 0;
                        continue;
                      }
                      if (3 === o4[0] && (!i2 || o4[1] > i2[0] && o4[1] < i2[3])) {
                        s2.label = o4[1];
                        break;
                      }
                      if (6 === o4[0] && s2.label < i2[1]) {
                        s2.label = i2[1], i2 = o4;
                        break;
                      }
                      if (i2 && s2.label < i2[2]) {
                        s2.label = i2[2], s2.ops.push(o4);
                        break;
                      }
                      i2[2] && s2.ops.pop(), s2.trys.pop();
                      continue;
                  }
                  o4 = t2.call(e2, s2);
                } catch (e3) {
                  o4 = [6, e3], r2 = 0;
                } finally {
                  n2 = i2 = 0;
                }
              if (5 & o4[0])
                throw o4[1];
              return { value: o4[0] ? o4[1] : void 0, done: true };
            }([o3, a3]);
          };
        }
      }
      function s(e2) {
        var t2 = "function" == typeof Symbol && Symbol.iterator, n2 = t2 && e2[t2], r2 = 0;
        if (n2)
          return n2.call(e2);
        if (e2 && "number" == typeof e2.length)
          return { next: function() {
            return e2 && r2 >= e2.length && (e2 = void 0), { value: e2 && e2[r2++], done: !e2 };
          } };
        throw new TypeError(t2 ? "Object is not iterable." : "Symbol.iterator is not defined.");
      }
      function a(e2, t2) {
        var n2 = "function" == typeof Symbol && e2[Symbol.iterator];
        if (!n2)
          return e2;
        var r2, i2, o2 = n2.call(e2), s2 = [];
        try {
          for (; (void 0 === t2 || t2-- > 0) && !(r2 = o2.next()).done; )
            s2.push(r2.value);
        } catch (e3) {
          i2 = { error: e3 };
        } finally {
          try {
            r2 && !r2.done && (n2 = o2.return) && n2.call(o2);
          } finally {
            if (i2)
              throw i2.error;
          }
        }
        return s2;
      }
      function u(e2, t2, n2) {
        if (n2 || 2 === arguments.length)
          for (var r2, i2 = 0, o2 = t2.length; i2 < o2; i2++)
            !r2 && i2 in t2 || (r2 || (r2 = Array.prototype.slice.call(t2, 0, i2)), r2[i2] = t2[i2]);
        return e2.concat(r2 || Array.prototype.slice.call(t2));
      }
      var c = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, l = { exports: {} };
      !function(e2) {
        !function(t2, n2) {
          var r2 = Math.pow(2, -24), i2 = Math.pow(2, 32), o2 = Math.pow(2, 53);
          var s2 = { encode: function(e3) {
            var t3, r3 = new ArrayBuffer(256), s3 = new DataView(r3), a2 = 0;
            function u2(e4) {
              for (var n3 = r3.byteLength, i3 = a2 + e4; n3 < i3; )
                n3 *= 2;
              if (n3 !== r3.byteLength) {
                var o3 = s3;
                r3 = new ArrayBuffer(n3), s3 = new DataView(r3);
                for (var u3 = a2 + 3 >> 2, c3 = 0; c3 < u3; ++c3)
                  s3.setUint32(4 * c3, o3.getUint32(4 * c3));
              }
              return t3 = e4, s3;
            }
            function c2() {
              a2 += t3;
            }
            function l2(e4) {
              c2(u2(1).setUint8(a2, e4));
            }
            function p2(e4) {
              for (var t4 = u2(e4.length), n3 = 0; n3 < e4.length; ++n3)
                t4.setUint8(a2 + n3, e4[n3]);
              c2();
            }
            function h2(e4, t4) {
              t4 < 24 ? l2(e4 << 5 | t4) : t4 < 256 ? (l2(e4 << 5 | 24), l2(t4)) : t4 < 65536 ? (l2(e4 << 5 | 25), function(e5) {
                c2(u2(2).setUint16(a2, e5));
              }(t4)) : t4 < 4294967296 ? (l2(e4 << 5 | 26), function(e5) {
                c2(u2(4).setUint32(a2, e5));
              }(t4)) : (l2(e4 << 5 | 27), function(e5) {
                var t5 = e5 % i2, n3 = (e5 - t5) / i2, r4 = u2(8);
                r4.setUint32(a2, n3), r4.setUint32(a2 + 4, t5), c2();
              }(t4));
            }
            if (function e4(t4) {
              var r4;
              if (false === t4)
                return l2(244);
              if (true === t4)
                return l2(245);
              if (null === t4)
                return l2(246);
              if (t4 === n2)
                return l2(247);
              switch (typeof t4) {
                case "number":
                  if (Math.floor(t4) === t4) {
                    if (0 <= t4 && t4 <= o2)
                      return h2(0, t4);
                    if (-o2 <= t4 && t4 < 0)
                      return h2(1, -(t4 + 1));
                  }
                  return l2(251), function(e5) {
                    c2(u2(8).setFloat64(a2, e5));
                  }(t4);
                case "string":
                  var i3 = [];
                  for (r4 = 0; r4 < t4.length; ++r4) {
                    var s4 = t4.charCodeAt(r4);
                    s4 < 128 ? i3.push(s4) : s4 < 2048 ? (i3.push(192 | s4 >> 6), i3.push(128 | 63 & s4)) : s4 < 55296 ? (i3.push(224 | s4 >> 12), i3.push(128 | s4 >> 6 & 63), i3.push(128 | 63 & s4)) : (s4 = (1023 & s4) << 10, s4 |= 1023 & t4.charCodeAt(++r4), s4 += 65536, i3.push(240 | s4 >> 18), i3.push(128 | s4 >> 12 & 63), i3.push(128 | s4 >> 6 & 63), i3.push(128 | 63 & s4));
                  }
                  return h2(3, i3.length), p2(i3);
                default:
                  var f3;
                  if (Array.isArray(t4))
                    for (h2(4, f3 = t4.length), r4 = 0; r4 < f3; ++r4)
                      e4(t4[r4]);
                  else if (t4 instanceof Uint8Array)
                    h2(2, t4.length), p2(t4);
                  else {
                    var d3 = Object.keys(t4);
                    for (h2(5, f3 = d3.length), r4 = 0; r4 < f3; ++r4) {
                      var g3 = d3[r4];
                      e4(g3), e4(t4[g3]);
                    }
                  }
              }
            }(e3), "slice" in r3)
              return r3.slice(0, a2);
            for (var f2 = new ArrayBuffer(a2), d2 = new DataView(f2), g2 = 0; g2 < a2; ++g2)
              d2.setUint8(g2, s3.getUint8(g2));
            return f2;
          }, decode: function(e3, t3, o3) {
            var s3 = new DataView(e3), a2 = 0;
            function u2(e4, t4) {
              return a2 += t4, e4;
            }
            function c2(t4) {
              return u2(new Uint8Array(e3, a2, t4), t4);
            }
            function l2() {
              return u2(s3.getUint8(a2), 1);
            }
            function p2() {
              return u2(s3.getUint16(a2), 2);
            }
            function h2() {
              return u2(s3.getUint32(a2), 4);
            }
            function f2() {
              return 255 === s3.getUint8(a2) && (a2 += 1, true);
            }
            function d2(e4) {
              if (e4 < 24)
                return e4;
              if (24 === e4)
                return l2();
              if (25 === e4)
                return p2();
              if (26 === e4)
                return h2();
              if (27 === e4)
                return h2() * i2 + h2();
              if (31 === e4)
                return -1;
              throw "Invalid length encoding";
            }
            function g2(e4) {
              var t4 = l2();
              if (255 === t4)
                return -1;
              var n3 = d2(31 & t4);
              if (n3 < 0 || t4 >> 5 !== e4)
                throw "Invalid indefinite length element";
              return n3;
            }
            function y2(e4, t4) {
              for (var n3 = 0; n3 < t4; ++n3) {
                var r3 = l2();
                128 & r3 && (r3 < 224 ? (r3 = (31 & r3) << 6 | 63 & l2(), t4 -= 1) : r3 < 240 ? (r3 = (15 & r3) << 12 | (63 & l2()) << 6 | 63 & l2(), t4 -= 2) : (r3 = (15 & r3) << 18 | (63 & l2()) << 12 | (63 & l2()) << 6 | 63 & l2(), t4 -= 3)), r3 < 65536 ? e4.push(r3) : (r3 -= 65536, e4.push(55296 | r3 >> 10), e4.push(56320 | 1023 & r3));
              }
            }
            "function" != typeof t3 && (t3 = function(e4) {
              return e4;
            }), "function" != typeof o3 && (o3 = function() {
              return n2;
            });
            var b2 = function e4() {
              var i3, h3, b3 = l2(), v2 = b3 >> 5, m2 = 31 & b3;
              if (7 === v2)
                switch (m2) {
                  case 25:
                    return function() {
                      var e5 = new ArrayBuffer(4), t4 = new DataView(e5), n3 = p2(), i4 = 32768 & n3, o4 = 31744 & n3, s4 = 1023 & n3;
                      if (31744 === o4)
                        o4 = 261120;
                      else if (0 !== o4)
                        o4 += 114688;
                      else if (0 !== s4)
                        return s4 * r2;
                      return t4.setUint32(0, i4 << 16 | o4 << 13 | s4 << 13), t4.getFloat32(0);
                    }();
                  case 26:
                    return u2(s3.getFloat32(a2), 4);
                  case 27:
                    return u2(s3.getFloat64(a2), 8);
                }
              if ((h3 = d2(m2)) < 0 && (v2 < 2 || 6 < v2))
                throw "Invalid length";
              switch (v2) {
                case 0:
                  return h3;
                case 1:
                  return -1 - h3;
                case 2:
                  if (h3 < 0) {
                    for (var _2 = [], O2 = 0; (h3 = g2(v2)) >= 0; )
                      O2 += h3, _2.push(c2(h3));
                    var P2 = new Uint8Array(O2), S2 = 0;
                    for (i3 = 0; i3 < _2.length; ++i3)
                      P2.set(_2[i3], S2), S2 += _2[i3].length;
                    return P2;
                  }
                  return c2(h3);
                case 3:
                  var w2 = [];
                  if (h3 < 0)
                    for (; (h3 = g2(v2)) >= 0; )
                      y2(w2, h3);
                  else
                    y2(w2, h3);
                  return String.fromCharCode.apply(null, w2);
                case 4:
                  var T2;
                  if (h3 < 0)
                    for (T2 = []; !f2(); )
                      T2.push(e4());
                  else
                    for (T2 = new Array(h3), i3 = 0; i3 < h3; ++i3)
                      T2[i3] = e4();
                  return T2;
                case 5:
                  var k2 = {};
                  for (i3 = 0; i3 < h3 || h3 < 0 && !f2(); ++i3) {
                    k2[e4()] = e4();
                  }
                  return k2;
                case 6:
                  return t3(e4(), h3);
                case 7:
                  switch (h3) {
                    case 20:
                      return false;
                    case 21:
                      return true;
                    case 22:
                      return null;
                    case 23:
                      return n2;
                    default:
                      return o3(h3);
                  }
              }
            }();
            if (a2 !== e3.byteLength)
              throw "Remaining bytes";
            return b2;
          } };
          e2.exports ? e2.exports = s2 : t2.CBOR || (t2.CBOR = s2);
        }(c);
      }(l);
      var p = l.exports, h = { exports: {} };
      !function(e2, t2) {
        !function(e3) {
          var t3 = "0.1.0", n2 = { 3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i, 4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i, 5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i, all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i };
          function r2() {
            var e4, t4, n3 = "";
            for (e4 = 0; e4 < 32; e4++)
              t4 = 16 * Math.random() | 0, 8 !== e4 && 12 !== e4 && 16 !== e4 && 20 !== e4 || (n3 += "-"), n3 += (12 === e4 ? 4 : 16 === e4 ? 3 & t4 | 8 : t4).toString(16);
            return n3;
          }
          function i2(e4, t4) {
            var r3 = n2[t4 || "all"];
            return r3 && r3.test(e4) || false;
          }
          r2.isUUID = i2, r2.VERSION = t3, e3.uuid = r2, e3.isUUID = i2;
        }(t2), null !== e2 && (e2.exports = t2.uuid);
      }(h, h.exports);
      var f, d, g, y, b, v = h.exports, m = function() {
        return v.uuid ? v.uuid() : v();
      }, _ = function() {
        function e2(e3) {
          var t2, n2, r2, i2 = e3.setup;
          if (this._PNSDKSuffix = {}, this.instanceId = "pn-".concat(m()), this.secretKey = i2.secretKey || i2.secret_key, this.subscribeKey = i2.subscribeKey || i2.subscribe_key, this.publishKey = i2.publishKey || i2.publish_key, this.sdkName = i2.sdkName, this.sdkFamily = i2.sdkFamily, this.partnerId = i2.partnerId, this.setAuthKey(i2.authKey), this.setCipherKey(i2.cipherKey), this.setFilterExpression(i2.filterExpression), "string" != typeof i2.origin && !Array.isArray(i2.origin) && void 0 !== i2.origin)
            throw new Error("Origin must be either undefined, a string or a list of strings.");
          if (this.origin = i2.origin || Array.from({ length: 20 }, function(e4, t3) {
            return "ps".concat(t3 + 1, ".pndsn.com");
          }), this.secure = i2.ssl || false, this.restore = i2.restore || false, this.proxy = i2.proxy, this.keepAlive = i2.keepAlive, this.keepAliveSettings = i2.keepAliveSettings, this.autoNetworkDetection = i2.autoNetworkDetection || false, this.dedupeOnSubscribe = i2.dedupeOnSubscribe || false, this.maximumCacheSize = i2.maximumCacheSize || 100, this.customEncrypt = i2.customEncrypt, this.customDecrypt = i2.customDecrypt, this.fileUploadPublishRetryLimit = null !== (t2 = i2.fileUploadPublishRetryLimit) && void 0 !== t2 ? t2 : 5, this.useRandomIVs = null === (n2 = i2.useRandomIVs) || void 0 === n2 || n2, this.enableSubscribeBeta = null !== (r2 = i2.enableSubscribeBeta) && void 0 !== r2 && r2, "undefined" != typeof location && "https:" === location.protocol && (this.secure = true), this.logVerbosity = i2.logVerbosity || false, this.suppressLeaveEvents = i2.suppressLeaveEvents || false, this.announceFailedHeartbeats = i2.announceFailedHeartbeats || true, this.announceSuccessfulHeartbeats = i2.announceSuccessfulHeartbeats || false, this.useInstanceId = i2.useInstanceId || false, this.useRequestId = i2.useRequestId || false, this.requestMessageCountThreshold = i2.requestMessageCountThreshold, this.setTransactionTimeout(i2.transactionalRequestTimeout || 15e3), this.setSubscribeTimeout(i2.subscribeRequestTimeout || 31e4), this.setSendBeaconConfig(i2.useSendBeacon || true), i2.presenceTimeout ? this.setPresenceTimeout(i2.presenceTimeout) : this._presenceTimeout = 300, null != i2.heartbeatInterval && this.setHeartbeatInterval(i2.heartbeatInterval), "string" == typeof i2.userId) {
            if ("string" == typeof i2.uuid)
              throw new Error("Only one of the following configuration options has to be provided: `uuid` or `userId`");
            this.setUserId(i2.userId);
          } else {
            if ("string" != typeof i2.uuid)
              throw new Error("One of the following configuration options has to be provided: `uuid` or `userId`");
            this.setUUID(i2.uuid);
          }
        }
        return e2.prototype.getAuthKey = function() {
          return this.authKey;
        }, e2.prototype.setAuthKey = function(e3) {
          return this.authKey = e3, this;
        }, e2.prototype.setCipherKey = function(e3) {
          return this.cipherKey = e3, this;
        }, e2.prototype.getUUID = function() {
          return this.UUID;
        }, e2.prototype.setUUID = function(e3) {
          if (!e3 || "string" != typeof e3 || 0 === e3.trim().length)
            throw new Error("Missing uuid parameter. Provide a valid string uuid");
          return this.UUID = e3, this;
        }, e2.prototype.getUserId = function() {
          return this.UUID;
        }, e2.prototype.setUserId = function(e3) {
          if (!e3 || "string" != typeof e3 || 0 === e3.trim().length)
            throw new Error("Missing or invalid userId parameter. Provide a valid string userId");
          return this.UUID = e3, this;
        }, e2.prototype.getFilterExpression = function() {
          return this.filterExpression;
        }, e2.prototype.setFilterExpression = function(e3) {
          return this.filterExpression = e3, this;
        }, e2.prototype.getPresenceTimeout = function() {
          return this._presenceTimeout;
        }, e2.prototype.setPresenceTimeout = function(e3) {
          return e3 >= 20 ? this._presenceTimeout = e3 : (this._presenceTimeout = 20, console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ", this._presenceTimeout)), this.setHeartbeatInterval(this._presenceTimeout / 2 - 1), this;
        }, e2.prototype.setProxy = function(e3) {
          this.proxy = e3;
        }, e2.prototype.getHeartbeatInterval = function() {
          return this._heartbeatInterval;
        }, e2.prototype.setHeartbeatInterval = function(e3) {
          return this._heartbeatInterval = e3, this;
        }, e2.prototype.getSubscribeTimeout = function() {
          return this._subscribeRequestTimeout;
        }, e2.prototype.setSubscribeTimeout = function(e3) {
          return this._subscribeRequestTimeout = e3, this;
        }, e2.prototype.getTransactionTimeout = function() {
          return this._transactionalRequestTimeout;
        }, e2.prototype.setTransactionTimeout = function(e3) {
          return this._transactionalRequestTimeout = e3, this;
        }, e2.prototype.isSendBeaconEnabled = function() {
          return this._useSendBeacon;
        }, e2.prototype.setSendBeaconConfig = function(e3) {
          return this._useSendBeacon = e3, this;
        }, e2.prototype.getVersion = function() {
          return "7.2.0";
        }, e2.prototype._addPnsdkSuffix = function(e3, t2) {
          this._PNSDKSuffix[e3] = t2;
        }, e2.prototype._getPnsdkSuffix = function(e3) {
          var t2 = this;
          return Object.keys(this._PNSDKSuffix).reduce(function(n2, r2) {
            return n2 + e3 + t2._PNSDKSuffix[r2];
          }, "");
        }, e2;
      }(), O = O || function(e2, t2) {
        var n2 = {}, r2 = n2.lib = {}, i2 = function() {
        }, o2 = r2.Base = { extend: function(e3) {
          i2.prototype = this;
          var t3 = new i2();
          return e3 && t3.mixIn(e3), t3.hasOwnProperty("init") || (t3.init = function() {
            t3.$super.init.apply(this, arguments);
          }), t3.init.prototype = t3, t3.$super = this, t3;
        }, create: function() {
          var e3 = this.extend();
          return e3.init.apply(e3, arguments), e3;
        }, init: function() {
        }, mixIn: function(e3) {
          for (var t3 in e3)
            e3.hasOwnProperty(t3) && (this[t3] = e3[t3]);
          e3.hasOwnProperty("toString") && (this.toString = e3.toString);
        }, clone: function() {
          return this.init.prototype.extend(this);
        } }, s2 = r2.WordArray = o2.extend({ init: function(e3, t3) {
          e3 = this.words = e3 || [], this.sigBytes = null != t3 ? t3 : 4 * e3.length;
        }, toString: function(e3) {
          return (e3 || u2).stringify(this);
        }, concat: function(e3) {
          var t3 = this.words, n3 = e3.words, r3 = this.sigBytes;
          if (e3 = e3.sigBytes, this.clamp(), r3 % 4)
            for (var i3 = 0; i3 < e3; i3++)
              t3[r3 + i3 >>> 2] |= (n3[i3 >>> 2] >>> 24 - i3 % 4 * 8 & 255) << 24 - (r3 + i3) % 4 * 8;
          else if (65535 < n3.length)
            for (i3 = 0; i3 < e3; i3 += 4)
              t3[r3 + i3 >>> 2] = n3[i3 >>> 2];
          else
            t3.push.apply(t3, n3);
          return this.sigBytes += e3, this;
        }, clamp: function() {
          var t3 = this.words, n3 = this.sigBytes;
          t3[n3 >>> 2] &= 4294967295 << 32 - n3 % 4 * 8, t3.length = e2.ceil(n3 / 4);
        }, clone: function() {
          var e3 = o2.clone.call(this);
          return e3.words = this.words.slice(0), e3;
        }, random: function(t3) {
          for (var n3 = [], r3 = 0; r3 < t3; r3 += 4)
            n3.push(4294967296 * e2.random() | 0);
          return new s2.init(n3, t3);
        } }), a2 = n2.enc = {}, u2 = a2.Hex = { stringify: function(e3) {
          var t3 = e3.words;
          e3 = e3.sigBytes;
          for (var n3 = [], r3 = 0; r3 < e3; r3++) {
            var i3 = t3[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255;
            n3.push((i3 >>> 4).toString(16)), n3.push((15 & i3).toString(16));
          }
          return n3.join("");
        }, parse: function(e3) {
          for (var t3 = e3.length, n3 = [], r3 = 0; r3 < t3; r3 += 2)
            n3[r3 >>> 3] |= parseInt(e3.substr(r3, 2), 16) << 24 - r3 % 8 * 4;
          return new s2.init(n3, t3 / 2);
        } }, c2 = a2.Latin1 = { stringify: function(e3) {
          var t3 = e3.words;
          e3 = e3.sigBytes;
          for (var n3 = [], r3 = 0; r3 < e3; r3++)
            n3.push(String.fromCharCode(t3[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255));
          return n3.join("");
        }, parse: function(e3) {
          for (var t3 = e3.length, n3 = [], r3 = 0; r3 < t3; r3++)
            n3[r3 >>> 2] |= (255 & e3.charCodeAt(r3)) << 24 - r3 % 4 * 8;
          return new s2.init(n3, t3);
        } }, l2 = a2.Utf8 = { stringify: function(e3) {
          try {
            return decodeURIComponent(escape(c2.stringify(e3)));
          } catch (e4) {
            throw Error("Malformed UTF-8 data");
          }
        }, parse: function(e3) {
          return c2.parse(unescape(encodeURIComponent(e3)));
        } }, p2 = r2.BufferedBlockAlgorithm = o2.extend({ reset: function() {
          this._data = new s2.init(), this._nDataBytes = 0;
        }, _append: function(e3) {
          "string" == typeof e3 && (e3 = l2.parse(e3)), this._data.concat(e3), this._nDataBytes += e3.sigBytes;
        }, _process: function(t3) {
          var n3 = this._data, r3 = n3.words, i3 = n3.sigBytes, o3 = this.blockSize, a3 = i3 / (4 * o3);
          if (t3 = (a3 = t3 ? e2.ceil(a3) : e2.max((0 | a3) - this._minBufferSize, 0)) * o3, i3 = e2.min(4 * t3, i3), t3) {
            for (var u3 = 0; u3 < t3; u3 += o3)
              this._doProcessBlock(r3, u3);
            u3 = r3.splice(0, t3), n3.sigBytes -= i3;
          }
          return new s2.init(u3, i3);
        }, clone: function() {
          var e3 = o2.clone.call(this);
          return e3._data = this._data.clone(), e3;
        }, _minBufferSize: 0 });
        r2.Hasher = p2.extend({ cfg: o2.extend(), init: function(e3) {
          this.cfg = this.cfg.extend(e3), this.reset();
        }, reset: function() {
          p2.reset.call(this), this._doReset();
        }, update: function(e3) {
          return this._append(e3), this._process(), this;
        }, finalize: function(e3) {
          return e3 && this._append(e3), this._doFinalize();
        }, blockSize: 16, _createHelper: function(e3) {
          return function(t3, n3) {
            return new e3.init(n3).finalize(t3);
          };
        }, _createHmacHelper: function(e3) {
          return function(t3, n3) {
            return new h2.HMAC.init(e3, n3).finalize(t3);
          };
        } });
        var h2 = n2.algo = {};
        return n2;
      }(Math);
      !function(e2) {
        for (var t2 = O, n2 = (i2 = t2.lib).WordArray, r2 = i2.Hasher, i2 = t2.algo, o2 = [], s2 = [], a2 = function(e3) {
          return 4294967296 * (e3 - (0 | e3)) | 0;
        }, u2 = 2, c2 = 0; 64 > c2; ) {
          var l2;
          e: {
            l2 = u2;
            for (var p2 = e2.sqrt(l2), h2 = 2; h2 <= p2; h2++)
              if (!(l2 % h2)) {
                l2 = false;
                break e;
              }
            l2 = true;
          }
          l2 && (8 > c2 && (o2[c2] = a2(e2.pow(u2, 0.5))), s2[c2] = a2(e2.pow(u2, 1 / 3)), c2++), u2++;
        }
        var f2 = [];
        i2 = i2.SHA256 = r2.extend({ _doReset: function() {
          this._hash = new n2.init(o2.slice(0));
        }, _doProcessBlock: function(e3, t3) {
          for (var n3 = this._hash.words, r3 = n3[0], i3 = n3[1], o3 = n3[2], a3 = n3[3], u3 = n3[4], c3 = n3[5], l3 = n3[6], p3 = n3[7], h3 = 0; 64 > h3; h3++) {
            if (16 > h3)
              f2[h3] = 0 | e3[t3 + h3];
            else {
              var d2 = f2[h3 - 15], g2 = f2[h3 - 2];
              f2[h3] = ((d2 << 25 | d2 >>> 7) ^ (d2 << 14 | d2 >>> 18) ^ d2 >>> 3) + f2[h3 - 7] + ((g2 << 15 | g2 >>> 17) ^ (g2 << 13 | g2 >>> 19) ^ g2 >>> 10) + f2[h3 - 16];
            }
            d2 = p3 + ((u3 << 26 | u3 >>> 6) ^ (u3 << 21 | u3 >>> 11) ^ (u3 << 7 | u3 >>> 25)) + (u3 & c3 ^ ~u3 & l3) + s2[h3] + f2[h3], g2 = ((r3 << 30 | r3 >>> 2) ^ (r3 << 19 | r3 >>> 13) ^ (r3 << 10 | r3 >>> 22)) + (r3 & i3 ^ r3 & o3 ^ i3 & o3), p3 = l3, l3 = c3, c3 = u3, u3 = a3 + d2 | 0, a3 = o3, o3 = i3, i3 = r3, r3 = d2 + g2 | 0;
          }
          n3[0] = n3[0] + r3 | 0, n3[1] = n3[1] + i3 | 0, n3[2] = n3[2] + o3 | 0, n3[3] = n3[3] + a3 | 0, n3[4] = n3[4] + u3 | 0, n3[5] = n3[5] + c3 | 0, n3[6] = n3[6] + l3 | 0, n3[7] = n3[7] + p3 | 0;
        }, _doFinalize: function() {
          var t3 = this._data, n3 = t3.words, r3 = 8 * this._nDataBytes, i3 = 8 * t3.sigBytes;
          return n3[i3 >>> 5] |= 128 << 24 - i3 % 32, n3[14 + (i3 + 64 >>> 9 << 4)] = e2.floor(r3 / 4294967296), n3[15 + (i3 + 64 >>> 9 << 4)] = r3, t3.sigBytes = 4 * n3.length, this._process(), this._hash;
        }, clone: function() {
          var e3 = r2.clone.call(this);
          return e3._hash = this._hash.clone(), e3;
        } });
        t2.SHA256 = r2._createHelper(i2), t2.HmacSHA256 = r2._createHmacHelper(i2);
      }(Math), d = (f = O).enc.Utf8, f.algo.HMAC = f.lib.Base.extend({ init: function(e2, t2) {
        e2 = this._hasher = new e2.init(), "string" == typeof t2 && (t2 = d.parse(t2));
        var n2 = e2.blockSize, r2 = 4 * n2;
        t2.sigBytes > r2 && (t2 = e2.finalize(t2)), t2.clamp();
        for (var i2 = this._oKey = t2.clone(), o2 = this._iKey = t2.clone(), s2 = i2.words, a2 = o2.words, u2 = 0; u2 < n2; u2++)
          s2[u2] ^= 1549556828, a2[u2] ^= 909522486;
        i2.sigBytes = o2.sigBytes = r2, this.reset();
      }, reset: function() {
        var e2 = this._hasher;
        e2.reset(), e2.update(this._iKey);
      }, update: function(e2) {
        return this._hasher.update(e2), this;
      }, finalize: function(e2) {
        var t2 = this._hasher;
        return e2 = t2.finalize(e2), t2.reset(), t2.finalize(this._oKey.clone().concat(e2));
      } }), y = (g = O).lib.WordArray, g.enc.Base64 = { stringify: function(e2) {
        var t2 = e2.words, n2 = e2.sigBytes, r2 = this._map;
        e2.clamp(), e2 = [];
        for (var i2 = 0; i2 < n2; i2 += 3)
          for (var o2 = (t2[i2 >>> 2] >>> 24 - i2 % 4 * 8 & 255) << 16 | (t2[i2 + 1 >>> 2] >>> 24 - (i2 + 1) % 4 * 8 & 255) << 8 | t2[i2 + 2 >>> 2] >>> 24 - (i2 + 2) % 4 * 8 & 255, s2 = 0; 4 > s2 && i2 + 0.75 * s2 < n2; s2++)
            e2.push(r2.charAt(o2 >>> 6 * (3 - s2) & 63));
        if (t2 = r2.charAt(64))
          for (; e2.length % 4; )
            e2.push(t2);
        return e2.join("");
      }, parse: function(e2) {
        var t2 = e2.length, n2 = this._map;
        (r2 = n2.charAt(64)) && -1 != (r2 = e2.indexOf(r2)) && (t2 = r2);
        for (var r2 = [], i2 = 0, o2 = 0; o2 < t2; o2++)
          if (o2 % 4) {
            var s2 = n2.indexOf(e2.charAt(o2 - 1)) << o2 % 4 * 2, a2 = n2.indexOf(e2.charAt(o2)) >>> 6 - o2 % 4 * 2;
            r2[i2 >>> 2] |= (s2 | a2) << 24 - i2 % 4 * 8, i2++;
          }
        return y.create(r2, i2);
      }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, function(e2) {
        function t2(e3, t3, n3, r3, i3, o3, s3) {
          return ((e3 = e3 + (t3 & n3 | ~t3 & r3) + i3 + s3) << o3 | e3 >>> 32 - o3) + t3;
        }
        function n2(e3, t3, n3, r3, i3, o3, s3) {
          return ((e3 = e3 + (t3 & r3 | n3 & ~r3) + i3 + s3) << o3 | e3 >>> 32 - o3) + t3;
        }
        function r2(e3, t3, n3, r3, i3, o3, s3) {
          return ((e3 = e3 + (t3 ^ n3 ^ r3) + i3 + s3) << o3 | e3 >>> 32 - o3) + t3;
        }
        function i2(e3, t3, n3, r3, i3, o3, s3) {
          return ((e3 = e3 + (n3 ^ (t3 | ~r3)) + i3 + s3) << o3 | e3 >>> 32 - o3) + t3;
        }
        for (var o2 = O, s2 = (u2 = o2.lib).WordArray, a2 = u2.Hasher, u2 = o2.algo, c2 = [], l2 = 0; 64 > l2; l2++)
          c2[l2] = 4294967296 * e2.abs(e2.sin(l2 + 1)) | 0;
        u2 = u2.MD5 = a2.extend({ _doReset: function() {
          this._hash = new s2.init([1732584193, 4023233417, 2562383102, 271733878]);
        }, _doProcessBlock: function(e3, o3) {
          for (var s3 = 0; 16 > s3; s3++) {
            var a3 = e3[u3 = o3 + s3];
            e3[u3] = 16711935 & (a3 << 8 | a3 >>> 24) | 4278255360 & (a3 << 24 | a3 >>> 8);
          }
          s3 = this._hash.words;
          var u3 = e3[o3 + 0], l3 = (a3 = e3[o3 + 1], e3[o3 + 2]), p2 = e3[o3 + 3], h2 = e3[o3 + 4], f2 = e3[o3 + 5], d2 = e3[o3 + 6], g2 = e3[o3 + 7], y2 = e3[o3 + 8], b2 = e3[o3 + 9], v2 = e3[o3 + 10], m2 = e3[o3 + 11], _2 = e3[o3 + 12], O2 = e3[o3 + 13], P2 = e3[o3 + 14], S2 = e3[o3 + 15], w2 = t2(w2 = s3[0], N2 = s3[1], k2 = s3[2], T2 = s3[3], u3, 7, c2[0]), T2 = t2(T2, w2, N2, k2, a3, 12, c2[1]), k2 = t2(k2, T2, w2, N2, l3, 17, c2[2]), N2 = t2(N2, k2, T2, w2, p2, 22, c2[3]);
          w2 = t2(w2, N2, k2, T2, h2, 7, c2[4]), T2 = t2(T2, w2, N2, k2, f2, 12, c2[5]), k2 = t2(k2, T2, w2, N2, d2, 17, c2[6]), N2 = t2(N2, k2, T2, w2, g2, 22, c2[7]), w2 = t2(w2, N2, k2, T2, y2, 7, c2[8]), T2 = t2(T2, w2, N2, k2, b2, 12, c2[9]), k2 = t2(k2, T2, w2, N2, v2, 17, c2[10]), N2 = t2(N2, k2, T2, w2, m2, 22, c2[11]), w2 = t2(w2, N2, k2, T2, _2, 7, c2[12]), T2 = t2(T2, w2, N2, k2, O2, 12, c2[13]), k2 = t2(k2, T2, w2, N2, P2, 17, c2[14]), w2 = n2(w2, N2 = t2(N2, k2, T2, w2, S2, 22, c2[15]), k2, T2, a3, 5, c2[16]), T2 = n2(T2, w2, N2, k2, d2, 9, c2[17]), k2 = n2(k2, T2, w2, N2, m2, 14, c2[18]), N2 = n2(N2, k2, T2, w2, u3, 20, c2[19]), w2 = n2(w2, N2, k2, T2, f2, 5, c2[20]), T2 = n2(T2, w2, N2, k2, v2, 9, c2[21]), k2 = n2(k2, T2, w2, N2, S2, 14, c2[22]), N2 = n2(N2, k2, T2, w2, h2, 20, c2[23]), w2 = n2(w2, N2, k2, T2, b2, 5, c2[24]), T2 = n2(T2, w2, N2, k2, P2, 9, c2[25]), k2 = n2(k2, T2, w2, N2, p2, 14, c2[26]), N2 = n2(N2, k2, T2, w2, y2, 20, c2[27]), w2 = n2(w2, N2, k2, T2, O2, 5, c2[28]), T2 = n2(T2, w2, N2, k2, l3, 9, c2[29]), k2 = n2(k2, T2, w2, N2, g2, 14, c2[30]), w2 = r2(w2, N2 = n2(N2, k2, T2, w2, _2, 20, c2[31]), k2, T2, f2, 4, c2[32]), T2 = r2(T2, w2, N2, k2, y2, 11, c2[33]), k2 = r2(k2, T2, w2, N2, m2, 16, c2[34]), N2 = r2(N2, k2, T2, w2, P2, 23, c2[35]), w2 = r2(w2, N2, k2, T2, a3, 4, c2[36]), T2 = r2(T2, w2, N2, k2, h2, 11, c2[37]), k2 = r2(k2, T2, w2, N2, g2, 16, c2[38]), N2 = r2(N2, k2, T2, w2, v2, 23, c2[39]), w2 = r2(w2, N2, k2, T2, O2, 4, c2[40]), T2 = r2(T2, w2, N2, k2, u3, 11, c2[41]), k2 = r2(k2, T2, w2, N2, p2, 16, c2[42]), N2 = r2(N2, k2, T2, w2, d2, 23, c2[43]), w2 = r2(w2, N2, k2, T2, b2, 4, c2[44]), T2 = r2(T2, w2, N2, k2, _2, 11, c2[45]), k2 = r2(k2, T2, w2, N2, S2, 16, c2[46]), w2 = i2(w2, N2 = r2(N2, k2, T2, w2, l3, 23, c2[47]), k2, T2, u3, 6, c2[48]), T2 = i2(T2, w2, N2, k2, g2, 10, c2[49]), k2 = i2(k2, T2, w2, N2, P2, 15, c2[50]), N2 = i2(N2, k2, T2, w2, f2, 21, c2[51]), w2 = i2(w2, N2, k2, T2, _2, 6, c2[52]), T2 = i2(T2, w2, N2, k2, p2, 10, c2[53]), k2 = i2(k2, T2, w2, N2, v2, 15, c2[54]), N2 = i2(N2, k2, T2, w2, a3, 21, c2[55]), w2 = i2(w2, N2, k2, T2, y2, 6, c2[56]), T2 = i2(T2, w2, N2, k2, S2, 10, c2[57]), k2 = i2(k2, T2, w2, N2, d2, 15, c2[58]), N2 = i2(N2, k2, T2, w2, O2, 21, c2[59]), w2 = i2(w2, N2, k2, T2, h2, 6, c2[60]), T2 = i2(T2, w2, N2, k2, m2, 10, c2[61]), k2 = i2(k2, T2, w2, N2, l3, 15, c2[62]), N2 = i2(N2, k2, T2, w2, b2, 21, c2[63]);
          s3[0] = s3[0] + w2 | 0, s3[1] = s3[1] + N2 | 0, s3[2] = s3[2] + k2 | 0, s3[3] = s3[3] + T2 | 0;
        }, _doFinalize: function() {
          var t3 = this._data, n3 = t3.words, r3 = 8 * this._nDataBytes, i3 = 8 * t3.sigBytes;
          n3[i3 >>> 5] |= 128 << 24 - i3 % 32;
          var o3 = e2.floor(r3 / 4294967296);
          for (n3[15 + (i3 + 64 >>> 9 << 4)] = 16711935 & (o3 << 8 | o3 >>> 24) | 4278255360 & (o3 << 24 | o3 >>> 8), n3[14 + (i3 + 64 >>> 9 << 4)] = 16711935 & (r3 << 8 | r3 >>> 24) | 4278255360 & (r3 << 24 | r3 >>> 8), t3.sigBytes = 4 * (n3.length + 1), this._process(), n3 = (t3 = this._hash).words, r3 = 0; 4 > r3; r3++)
            i3 = n3[r3], n3[r3] = 16711935 & (i3 << 8 | i3 >>> 24) | 4278255360 & (i3 << 24 | i3 >>> 8);
          return t3;
        }, clone: function() {
          var e3 = a2.clone.call(this);
          return e3._hash = this._hash.clone(), e3;
        } }), o2.MD5 = a2._createHelper(u2), o2.HmacMD5 = a2._createHmacHelper(u2);
      }(Math), function() {
        var e2, t2 = O, n2 = (e2 = t2.lib).Base, r2 = e2.WordArray, i2 = (e2 = t2.algo).EvpKDF = n2.extend({ cfg: n2.extend({ keySize: 4, hasher: e2.MD5, iterations: 1 }), init: function(e3) {
          this.cfg = this.cfg.extend(e3);
        }, compute: function(e3, t3) {
          for (var n3 = (a2 = this.cfg).hasher.create(), i3 = r2.create(), o2 = i3.words, s2 = a2.keySize, a2 = a2.iterations; o2.length < s2; ) {
            u2 && n3.update(u2);
            var u2 = n3.update(e3).finalize(t3);
            n3.reset();
            for (var c2 = 1; c2 < a2; c2++)
              u2 = n3.finalize(u2), n3.reset();
            i3.concat(u2);
          }
          return i3.sigBytes = 4 * s2, i3;
        } });
        t2.EvpKDF = function(e3, t3, n3) {
          return i2.create(n3).compute(e3, t3);
        };
      }(), O.lib.Cipher || function(e2) {
        var t2 = (f2 = O).lib, n2 = t2.Base, r2 = t2.WordArray, i2 = t2.BufferedBlockAlgorithm, o2 = f2.enc.Base64, s2 = f2.algo.EvpKDF, a2 = t2.Cipher = i2.extend({ cfg: n2.extend(), createEncryptor: function(e3, t3) {
          return this.create(this._ENC_XFORM_MODE, e3, t3);
        }, createDecryptor: function(e3, t3) {
          return this.create(this._DEC_XFORM_MODE, e3, t3);
        }, init: function(e3, t3, n3) {
          this.cfg = this.cfg.extend(n3), this._xformMode = e3, this._key = t3, this.reset();
        }, reset: function() {
          i2.reset.call(this), this._doReset();
        }, process: function(e3) {
          return this._append(e3), this._process();
        }, finalize: function(e3) {
          return e3 && this._append(e3), this._doFinalize();
        }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function(e3) {
          return { encrypt: function(t3, n3, r3) {
            return ("string" == typeof n3 ? d2 : h2).encrypt(e3, t3, n3, r3);
          }, decrypt: function(t3, n3, r3) {
            return ("string" == typeof n3 ? d2 : h2).decrypt(e3, t3, n3, r3);
          } };
        } });
        t2.StreamCipher = a2.extend({ _doFinalize: function() {
          return this._process(true);
        }, blockSize: 1 });
        var u2 = f2.mode = {}, c2 = function(e3, t3, n3) {
          var r3 = this._iv;
          r3 ? this._iv = void 0 : r3 = this._prevBlock;
          for (var i3 = 0; i3 < n3; i3++)
            e3[t3 + i3] ^= r3[i3];
        }, l2 = (t2.BlockCipherMode = n2.extend({ createEncryptor: function(e3, t3) {
          return this.Encryptor.create(e3, t3);
        }, createDecryptor: function(e3, t3) {
          return this.Decryptor.create(e3, t3);
        }, init: function(e3, t3) {
          this._cipher = e3, this._iv = t3;
        } })).extend();
        l2.Encryptor = l2.extend({ processBlock: function(e3, t3) {
          var n3 = this._cipher, r3 = n3.blockSize;
          c2.call(this, e3, t3, r3), n3.encryptBlock(e3, t3), this._prevBlock = e3.slice(t3, t3 + r3);
        } }), l2.Decryptor = l2.extend({ processBlock: function(e3, t3) {
          var n3 = this._cipher, r3 = n3.blockSize, i3 = e3.slice(t3, t3 + r3);
          n3.decryptBlock(e3, t3), c2.call(this, e3, t3, r3), this._prevBlock = i3;
        } }), u2 = u2.CBC = l2, l2 = (f2.pad = {}).Pkcs7 = { pad: function(e3, t3) {
          for (var n3, i3 = (n3 = (n3 = 4 * t3) - e3.sigBytes % n3) << 24 | n3 << 16 | n3 << 8 | n3, o3 = [], s3 = 0; s3 < n3; s3 += 4)
            o3.push(i3);
          n3 = r2.create(o3, n3), e3.concat(n3);
        }, unpad: function(e3) {
          e3.sigBytes -= 255 & e3.words[e3.sigBytes - 1 >>> 2];
        } }, t2.BlockCipher = a2.extend({ cfg: a2.cfg.extend({ mode: u2, padding: l2 }), reset: function() {
          a2.reset.call(this);
          var e3 = (t3 = this.cfg).iv, t3 = t3.mode;
          if (this._xformMode == this._ENC_XFORM_MODE)
            var n3 = t3.createEncryptor;
          else
            n3 = t3.createDecryptor, this._minBufferSize = 1;
          this._mode = n3.call(t3, this, e3 && e3.words);
        }, _doProcessBlock: function(e3, t3) {
          this._mode.processBlock(e3, t3);
        }, _doFinalize: function() {
          var e3 = this.cfg.padding;
          if (this._xformMode == this._ENC_XFORM_MODE) {
            e3.pad(this._data, this.blockSize);
            var t3 = this._process(true);
          } else
            t3 = this._process(true), e3.unpad(t3);
          return t3;
        }, blockSize: 4 });
        var p2 = t2.CipherParams = n2.extend({ init: function(e3) {
          this.mixIn(e3);
        }, toString: function(e3) {
          return (e3 || this.formatter).stringify(this);
        } }), h2 = (u2 = (f2.format = {}).OpenSSL = { stringify: function(e3) {
          var t3 = e3.ciphertext;
          return ((e3 = e3.salt) ? r2.create([1398893684, 1701076831]).concat(e3).concat(t3) : t3).toString(o2);
        }, parse: function(e3) {
          var t3 = (e3 = o2.parse(e3)).words;
          if (1398893684 == t3[0] && 1701076831 == t3[1]) {
            var n3 = r2.create(t3.slice(2, 4));
            t3.splice(0, 4), e3.sigBytes -= 16;
          }
          return p2.create({ ciphertext: e3, salt: n3 });
        } }, t2.SerializableCipher = n2.extend({ cfg: n2.extend({ format: u2 }), encrypt: function(e3, t3, n3, r3) {
          r3 = this.cfg.extend(r3);
          var i3 = e3.createEncryptor(n3, r3);
          return t3 = i3.finalize(t3), i3 = i3.cfg, p2.create({ ciphertext: t3, key: n3, iv: i3.iv, algorithm: e3, mode: i3.mode, padding: i3.padding, blockSize: e3.blockSize, formatter: r3.format });
        }, decrypt: function(e3, t3, n3, r3) {
          return r3 = this.cfg.extend(r3), t3 = this._parse(t3, r3.format), e3.createDecryptor(n3, r3).finalize(t3.ciphertext);
        }, _parse: function(e3, t3) {
          return "string" == typeof e3 ? t3.parse(e3, this) : e3;
        } })), f2 = (f2.kdf = {}).OpenSSL = { execute: function(e3, t3, n3, i3) {
          return i3 || (i3 = r2.random(8)), e3 = s2.create({ keySize: t3 + n3 }).compute(e3, i3), n3 = r2.create(e3.words.slice(t3), 4 * n3), e3.sigBytes = 4 * t3, p2.create({ key: e3, iv: n3, salt: i3 });
        } }, d2 = t2.PasswordBasedCipher = h2.extend({ cfg: h2.cfg.extend({ kdf: f2 }), encrypt: function(e3, t3, n3, r3) {
          return n3 = (r3 = this.cfg.extend(r3)).kdf.execute(n3, e3.keySize, e3.ivSize), r3.iv = n3.iv, (e3 = h2.encrypt.call(this, e3, t3, n3.key, r3)).mixIn(n3), e3;
        }, decrypt: function(e3, t3, n3, r3) {
          return r3 = this.cfg.extend(r3), t3 = this._parse(t3, r3.format), n3 = r3.kdf.execute(n3, e3.keySize, e3.ivSize, t3.salt), r3.iv = n3.iv, h2.decrypt.call(this, e3, t3, n3.key, r3);
        } });
      }(), function() {
        for (var e2 = O, t2 = e2.lib.BlockCipher, n2 = e2.algo, r2 = [], i2 = [], o2 = [], s2 = [], a2 = [], u2 = [], c2 = [], l2 = [], p2 = [], h2 = [], f2 = [], d2 = 0; 256 > d2; d2++)
          f2[d2] = 128 > d2 ? d2 << 1 : d2 << 1 ^ 283;
        var g2 = 0, y2 = 0;
        for (d2 = 0; 256 > d2; d2++) {
          var b2 = (b2 = y2 ^ y2 << 1 ^ y2 << 2 ^ y2 << 3 ^ y2 << 4) >>> 8 ^ 255 & b2 ^ 99;
          r2[g2] = b2, i2[b2] = g2;
          var v2 = f2[g2], m2 = f2[v2], _2 = f2[m2], P2 = 257 * f2[b2] ^ 16843008 * b2;
          o2[g2] = P2 << 24 | P2 >>> 8, s2[g2] = P2 << 16 | P2 >>> 16, a2[g2] = P2 << 8 | P2 >>> 24, u2[g2] = P2, P2 = 16843009 * _2 ^ 65537 * m2 ^ 257 * v2 ^ 16843008 * g2, c2[b2] = P2 << 24 | P2 >>> 8, l2[b2] = P2 << 16 | P2 >>> 16, p2[b2] = P2 << 8 | P2 >>> 24, h2[b2] = P2, g2 ? (g2 = v2 ^ f2[f2[f2[_2 ^ v2]]], y2 ^= f2[f2[y2]]) : g2 = y2 = 1;
        }
        var S2 = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
        n2 = n2.AES = t2.extend({ _doReset: function() {
          for (var e3 = (n3 = this._key).words, t3 = n3.sigBytes / 4, n3 = 4 * ((this._nRounds = t3 + 6) + 1), i3 = this._keySchedule = [], o3 = 0; o3 < n3; o3++)
            if (o3 < t3)
              i3[o3] = e3[o3];
            else {
              var s3 = i3[o3 - 1];
              o3 % t3 ? 6 < t3 && 4 == o3 % t3 && (s3 = r2[s3 >>> 24] << 24 | r2[s3 >>> 16 & 255] << 16 | r2[s3 >>> 8 & 255] << 8 | r2[255 & s3]) : (s3 = r2[(s3 = s3 << 8 | s3 >>> 24) >>> 24] << 24 | r2[s3 >>> 16 & 255] << 16 | r2[s3 >>> 8 & 255] << 8 | r2[255 & s3], s3 ^= S2[o3 / t3 | 0] << 24), i3[o3] = i3[o3 - t3] ^ s3;
            }
          for (e3 = this._invKeySchedule = [], t3 = 0; t3 < n3; t3++)
            o3 = n3 - t3, s3 = t3 % 4 ? i3[o3] : i3[o3 - 4], e3[t3] = 4 > t3 || 4 >= o3 ? s3 : c2[r2[s3 >>> 24]] ^ l2[r2[s3 >>> 16 & 255]] ^ p2[r2[s3 >>> 8 & 255]] ^ h2[r2[255 & s3]];
        }, encryptBlock: function(e3, t3) {
          this._doCryptBlock(e3, t3, this._keySchedule, o2, s2, a2, u2, r2);
        }, decryptBlock: function(e3, t3) {
          var n3 = e3[t3 + 1];
          e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = n3, this._doCryptBlock(e3, t3, this._invKeySchedule, c2, l2, p2, h2, i2), n3 = e3[t3 + 1], e3[t3 + 1] = e3[t3 + 3], e3[t3 + 3] = n3;
        }, _doCryptBlock: function(e3, t3, n3, r3, i3, o3, s3, a3) {
          for (var u3 = this._nRounds, c3 = e3[t3] ^ n3[0], l3 = e3[t3 + 1] ^ n3[1], p3 = e3[t3 + 2] ^ n3[2], h3 = e3[t3 + 3] ^ n3[3], f3 = 4, d3 = 1; d3 < u3; d3++) {
            var g3 = r3[c3 >>> 24] ^ i3[l3 >>> 16 & 255] ^ o3[p3 >>> 8 & 255] ^ s3[255 & h3] ^ n3[f3++], y3 = r3[l3 >>> 24] ^ i3[p3 >>> 16 & 255] ^ o3[h3 >>> 8 & 255] ^ s3[255 & c3] ^ n3[f3++], b3 = r3[p3 >>> 24] ^ i3[h3 >>> 16 & 255] ^ o3[c3 >>> 8 & 255] ^ s3[255 & l3] ^ n3[f3++];
            h3 = r3[h3 >>> 24] ^ i3[c3 >>> 16 & 255] ^ o3[l3 >>> 8 & 255] ^ s3[255 & p3] ^ n3[f3++], c3 = g3, l3 = y3, p3 = b3;
          }
          g3 = (a3[c3 >>> 24] << 24 | a3[l3 >>> 16 & 255] << 16 | a3[p3 >>> 8 & 255] << 8 | a3[255 & h3]) ^ n3[f3++], y3 = (a3[l3 >>> 24] << 24 | a3[p3 >>> 16 & 255] << 16 | a3[h3 >>> 8 & 255] << 8 | a3[255 & c3]) ^ n3[f3++], b3 = (a3[p3 >>> 24] << 24 | a3[h3 >>> 16 & 255] << 16 | a3[c3 >>> 8 & 255] << 8 | a3[255 & l3]) ^ n3[f3++], h3 = (a3[h3 >>> 24] << 24 | a3[c3 >>> 16 & 255] << 16 | a3[l3 >>> 8 & 255] << 8 | a3[255 & p3]) ^ n3[f3++], e3[t3] = g3, e3[t3 + 1] = y3, e3[t3 + 2] = b3, e3[t3 + 3] = h3;
        }, keySize: 8 });
        e2.AES = t2._createHelper(n2);
      }(), O.mode.ECB = ((b = O.lib.BlockCipherMode.extend()).Encryptor = b.extend({ processBlock: function(e2, t2) {
        this._cipher.encryptBlock(e2, t2);
      } }), b.Decryptor = b.extend({ processBlock: function(e2, t2) {
        this._cipher.decryptBlock(e2, t2);
      } }), b);
      var P = O;
      function S(e2) {
        var t2, n2 = [];
        for (t2 = 0; t2 < e2.length; t2 += 1)
          n2[t2 / 4 | 0] |= e2[t2] << 24 - 8 * t2;
        return P.lib.WordArray.create(n2, e2.length);
      }
      var w = function() {
        function e2(e3) {
          var t2 = e3.config;
          this._config = t2, this._iv = "0123456789012345", this._allowedKeyEncodings = ["hex", "utf8", "base64", "binary"], this._allowedKeyLengths = [128, 256], this._allowedModes = ["ecb", "cbc"], this._defaultOptions = { encryptKey: true, keyEncoding: "utf8", keyLength: 256, mode: "cbc" };
        }
        return e2.prototype.HMACSHA256 = function(e3) {
          return P.HmacSHA256(e3, this._config.secretKey).toString(P.enc.Base64);
        }, e2.prototype.SHA256 = function(e3) {
          return P.SHA256(e3).toString(P.enc.Hex);
        }, e2.prototype._parseOptions = function(e3) {
          var t2 = e3 || {};
          return t2.hasOwnProperty("encryptKey") || (t2.encryptKey = this._defaultOptions.encryptKey), t2.hasOwnProperty("keyEncoding") || (t2.keyEncoding = this._defaultOptions.keyEncoding), t2.hasOwnProperty("keyLength") || (t2.keyLength = this._defaultOptions.keyLength), t2.hasOwnProperty("mode") || (t2.mode = this._defaultOptions.mode), -1 === this._allowedKeyEncodings.indexOf(t2.keyEncoding.toLowerCase()) && (t2.keyEncoding = this._defaultOptions.keyEncoding), -1 === this._allowedKeyLengths.indexOf(parseInt(t2.keyLength, 10)) && (t2.keyLength = this._defaultOptions.keyLength), -1 === this._allowedModes.indexOf(t2.mode.toLowerCase()) && (t2.mode = this._defaultOptions.mode), t2;
        }, e2.prototype._decodeKey = function(e3, t2) {
          return "base64" === t2.keyEncoding ? P.enc.Base64.parse(e3) : "hex" === t2.keyEncoding ? P.enc.Hex.parse(e3) : e3;
        }, e2.prototype._getPaddedKey = function(e3, t2) {
          return e3 = this._decodeKey(e3, t2), t2.encryptKey ? P.enc.Utf8.parse(this.SHA256(e3).slice(0, 32)) : e3;
        }, e2.prototype._getMode = function(e3) {
          return "ecb" === e3.mode ? P.mode.ECB : P.mode.CBC;
        }, e2.prototype._getIV = function(e3) {
          return "cbc" === e3.mode ? P.enc.Utf8.parse(this._iv) : null;
        }, e2.prototype._getRandomIV = function() {
          return P.lib.WordArray.random(16);
        }, e2.prototype.encrypt = function(e3, t2, n2) {
          return this._config.customEncrypt ? this._config.customEncrypt(e3) : this.pnEncrypt(e3, t2, n2);
        }, e2.prototype.decrypt = function(e3, t2, n2) {
          return this._config.customDecrypt ? this._config.customDecrypt(e3) : this.pnDecrypt(e3, t2, n2);
        }, e2.prototype.pnEncrypt = function(e3, t2, n2) {
          if (!t2 && !this._config.cipherKey)
            return e3;
          n2 = this._parseOptions(n2);
          var r2 = this._getMode(n2), i2 = this._getPaddedKey(t2 || this._config.cipherKey, n2);
          if (this._config.useRandomIVs) {
            var o2 = this._getRandomIV(), s2 = P.AES.encrypt(e3, i2, { iv: o2, mode: r2 }).ciphertext;
            return o2.clone().concat(s2.clone()).toString(P.enc.Base64);
          }
          var a2 = this._getIV(n2);
          return P.AES.encrypt(e3, i2, { iv: a2, mode: r2 }).ciphertext.toString(P.enc.Base64) || e3;
        }, e2.prototype.pnDecrypt = function(e3, t2, n2) {
          if (!t2 && !this._config.cipherKey)
            return e3;
          n2 = this._parseOptions(n2);
          var r2 = this._getMode(n2), i2 = this._getPaddedKey(t2 || this._config.cipherKey, n2);
          if (this._config.useRandomIVs) {
            var o2 = S((u2 = Buffer.from(e3, "base64")).slice(0, 16)), s2 = S(u2.slice(16));
            try {
              var a2 = P.AES.decrypt({ ciphertext: s2 }, i2, { iv: o2, mode: r2 }).toString(P.enc.Utf8);
              return JSON.parse(a2);
            } catch (e4) {
              return null;
            }
          } else {
            o2 = this._getIV(n2);
            try {
              var u2 = P.enc.Base64.parse(e3);
              a2 = P.AES.decrypt({ ciphertext: u2 }, i2, { iv: o2, mode: r2 }).toString(P.enc.Utf8);
              return JSON.parse(a2);
            } catch (e4) {
              return null;
            }
          }
        }, e2;
      }(), T = function() {
        function e2(e3) {
          var t2 = e3.timeEndpoint;
          this._timeEndpoint = t2;
        }
        return e2.prototype.onReconnection = function(e3) {
          this._reconnectionCallback = e3;
        }, e2.prototype.startPolling = function() {
          this._timeTimer = setInterval(this._performTimeLoop.bind(this), 3e3);
        }, e2.prototype.stopPolling = function() {
          clearInterval(this._timeTimer);
        }, e2.prototype._performTimeLoop = function() {
          var e3 = this;
          this._timeEndpoint(function(t2) {
            t2.error || (clearInterval(e3._timeTimer), e3._reconnectionCallback());
          });
        }, e2;
      }(), k = function() {
        function e2(e3) {
          var t2 = e3.config;
          this.hashHistory = [], this._config = t2;
        }
        return e2.prototype.getKey = function(e3) {
          var t2 = function(e4) {
            var t3 = 0;
            if (0 === e4.length)
              return t3;
            for (var n3 = 0; n3 < e4.length; n3 += 1)
              t3 = (t3 << 5) - t3 + e4.charCodeAt(n3), t3 &= t3;
            return t3;
          }(JSON.stringify(e3.payload)).toString(), n2 = e3.publishMetaData.publishTimetoken;
          return "".concat(n2, "-").concat(t2);
        }, e2.prototype.isDuplicate = function(e3) {
          return this.hashHistory.includes(this.getKey(e3));
        }, e2.prototype.addEntry = function(e3) {
          this.hashHistory.length >= this._config.maximumCacheSize && this.hashHistory.shift(), this.hashHistory.push(this.getKey(e3));
        }, e2.prototype.clearHistory = function() {
          this.hashHistory = [];
        }, e2;
      }();
      function N(e2) {
        return encodeURIComponent(e2).replace(/[!~*'()]/g, function(e3) {
          return "%".concat(e3.charCodeAt(0).toString(16).toUpperCase());
        });
      }
      function C(e2) {
        return function(e3) {
          var t2 = [];
          return Object.keys(e3).forEach(function(e4) {
            return t2.push(e4);
          }), t2;
        }(e2).sort();
      }
      var E = { signPamFromParams: function(e2) {
        return C(e2).map(function(t2) {
          return "".concat(t2, "=").concat(N(e2[t2]));
        }).join("&");
      }, endsWith: function(e2, t2) {
        return -1 !== e2.indexOf(t2, this.length - t2.length);
      }, createPromise: function() {
        var e2, t2;
        return { promise: new Promise(function(n2, r2) {
          e2 = n2, t2 = r2;
        }), reject: t2, fulfill: e2 };
      }, encodeString: N }, A = { PNNetworkUpCategory: "PNNetworkUpCategory", PNNetworkDownCategory: "PNNetworkDownCategory", PNNetworkIssuesCategory: "PNNetworkIssuesCategory", PNTimeoutCategory: "PNTimeoutCategory", PNBadRequestCategory: "PNBadRequestCategory", PNAccessDeniedCategory: "PNAccessDeniedCategory", PNUnknownCategory: "PNUnknownCategory", PNReconnectedCategory: "PNReconnectedCategory", PNConnectedCategory: "PNConnectedCategory", PNRequestMessageCountExceededCategory: "PNRequestMessageCountExceededCategory" }, M = function() {
        function e2(e3) {
          var t2 = e3.subscribeEndpoint, n2 = e3.leaveEndpoint, r2 = e3.heartbeatEndpoint, i2 = e3.setStateEndpoint, o2 = e3.timeEndpoint, s2 = e3.getFileUrl, a2 = e3.config, u2 = e3.crypto, c2 = e3.listenerManager;
          this._listenerManager = c2, this._config = a2, this._leaveEndpoint = n2, this._heartbeatEndpoint = r2, this._setStateEndpoint = i2, this._subscribeEndpoint = t2, this._getFileUrl = s2, this._crypto = u2, this._channels = {}, this._presenceChannels = {}, this._heartbeatChannels = {}, this._heartbeatChannelGroups = {}, this._channelGroups = {}, this._presenceChannelGroups = {}, this._pendingChannelSubscriptions = [], this._pendingChannelGroupSubscriptions = [], this._currentTimetoken = 0, this._lastTimetoken = 0, this._storedTimetoken = null, this._subscriptionStatusAnnounced = false, this._isOnline = true, this._reconnectionManager = new T({ timeEndpoint: o2 }), this._dedupingManager = new k({ config: a2 });
        }
        return e2.prototype.adaptStateChange = function(e3, t2) {
          var n2 = this, r2 = e3.state, i2 = e3.channels, o2 = void 0 === i2 ? [] : i2, s2 = e3.channelGroups, a2 = void 0 === s2 ? [] : s2;
          return o2.forEach(function(e4) {
            e4 in n2._channels && (n2._channels[e4].state = r2);
          }), a2.forEach(function(e4) {
            e4 in n2._channelGroups && (n2._channelGroups[e4].state = r2);
          }), this._setStateEndpoint({ state: r2, channels: o2, channelGroups: a2 }, t2);
        }, e2.prototype.adaptPresenceChange = function(e3) {
          var t2 = this, n2 = e3.connected, r2 = e3.channels, i2 = void 0 === r2 ? [] : r2, o2 = e3.channelGroups, s2 = void 0 === o2 ? [] : o2;
          n2 ? (i2.forEach(function(e4) {
            t2._heartbeatChannels[e4] = { state: {} };
          }), s2.forEach(function(e4) {
            t2._heartbeatChannelGroups[e4] = { state: {} };
          })) : (i2.forEach(function(e4) {
            e4 in t2._heartbeatChannels && delete t2._heartbeatChannels[e4];
          }), s2.forEach(function(e4) {
            e4 in t2._heartbeatChannelGroups && delete t2._heartbeatChannelGroups[e4];
          }), false === this._config.suppressLeaveEvents && this._leaveEndpoint({ channels: i2, channelGroups: s2 }, function(e4) {
            t2._listenerManager.announceStatus(e4);
          })), this.reconnect();
        }, e2.prototype.adaptSubscribeChange = function(e3) {
          var t2 = this, n2 = e3.timetoken, r2 = e3.channels, i2 = void 0 === r2 ? [] : r2, o2 = e3.channelGroups, s2 = void 0 === o2 ? [] : o2, a2 = e3.withPresence, u2 = void 0 !== a2 && a2, c2 = e3.withHeartbeats, l2 = void 0 !== c2 && c2;
          this._config.subscribeKey && "" !== this._config.subscribeKey ? (n2 && (this._lastTimetoken = this._currentTimetoken, this._currentTimetoken = n2), "0" !== this._currentTimetoken && 0 !== this._currentTimetoken && (this._storedTimetoken = this._currentTimetoken, this._currentTimetoken = 0), i2.forEach(function(e4) {
            t2._channels[e4] = { state: {} }, u2 && (t2._presenceChannels[e4] = {}), (l2 || t2._config.getHeartbeatInterval()) && (t2._heartbeatChannels[e4] = {}), t2._pendingChannelSubscriptions.push(e4);
          }), s2.forEach(function(e4) {
            t2._channelGroups[e4] = { state: {} }, u2 && (t2._presenceChannelGroups[e4] = {}), (l2 || t2._config.getHeartbeatInterval()) && (t2._heartbeatChannelGroups[e4] = {}), t2._pendingChannelGroupSubscriptions.push(e4);
          }), this._subscriptionStatusAnnounced = false, this.reconnect()) : console && console.log && console.log("subscribe key missing; aborting subscribe");
        }, e2.prototype.adaptUnsubscribeChange = function(e3, t2) {
          var n2 = this, r2 = e3.channels, i2 = void 0 === r2 ? [] : r2, o2 = e3.channelGroups, s2 = void 0 === o2 ? [] : o2, a2 = [], u2 = [];
          i2.forEach(function(e4) {
            e4 in n2._channels && (delete n2._channels[e4], a2.push(e4), e4 in n2._heartbeatChannels && delete n2._heartbeatChannels[e4]), e4 in n2._presenceChannels && (delete n2._presenceChannels[e4], a2.push(e4));
          }), s2.forEach(function(e4) {
            e4 in n2._channelGroups && (delete n2._channelGroups[e4], u2.push(e4), e4 in n2._heartbeatChannelGroups && delete n2._heartbeatChannelGroups[e4]), e4 in n2._presenceChannelGroups && (delete n2._presenceChannelGroups[e4], u2.push(e4));
          }), 0 === a2.length && 0 === u2.length || (false !== this._config.suppressLeaveEvents || t2 || this._leaveEndpoint({ channels: a2, channelGroups: u2 }, function(e4) {
            e4.affectedChannels = a2, e4.affectedChannelGroups = u2, e4.currentTimetoken = n2._currentTimetoken, e4.lastTimetoken = n2._lastTimetoken, n2._listenerManager.announceStatus(e4);
          }), 0 === Object.keys(this._channels).length && 0 === Object.keys(this._presenceChannels).length && 0 === Object.keys(this._channelGroups).length && 0 === Object.keys(this._presenceChannelGroups).length && (this._lastTimetoken = 0, this._currentTimetoken = 0, this._storedTimetoken = null, this._region = null, this._reconnectionManager.stopPolling()), this.reconnect());
        }, e2.prototype.unsubscribeAll = function(e3) {
          this.adaptUnsubscribeChange({ channels: this.getSubscribedChannels(), channelGroups: this.getSubscribedChannelGroups() }, e3);
        }, e2.prototype.getHeartbeatChannels = function() {
          return Object.keys(this._heartbeatChannels);
        }, e2.prototype.getHeartbeatChannelGroups = function() {
          return Object.keys(this._heartbeatChannelGroups);
        }, e2.prototype.getSubscribedChannels = function() {
          return Object.keys(this._channels);
        }, e2.prototype.getSubscribedChannelGroups = function() {
          return Object.keys(this._channelGroups);
        }, e2.prototype.reconnect = function() {
          this._startSubscribeLoop(), this._registerHeartbeatTimer();
        }, e2.prototype.disconnect = function() {
          this._stopSubscribeLoop(), this._stopHeartbeatTimer(), this._reconnectionManager.stopPolling();
        }, e2.prototype._registerHeartbeatTimer = function() {
          this._stopHeartbeatTimer(), 0 !== this._config.getHeartbeatInterval() && void 0 !== this._config.getHeartbeatInterval() && (this._performHeartbeatLoop(), this._heartbeatTimer = setInterval(this._performHeartbeatLoop.bind(this), 1e3 * this._config.getHeartbeatInterval()));
        }, e2.prototype._stopHeartbeatTimer = function() {
          this._heartbeatTimer && (clearInterval(this._heartbeatTimer), this._heartbeatTimer = null);
        }, e2.prototype._performHeartbeatLoop = function() {
          var e3 = this, t2 = this.getHeartbeatChannels(), n2 = this.getHeartbeatChannelGroups(), r2 = {};
          if (0 !== t2.length || 0 !== n2.length) {
            this.getSubscribedChannels().forEach(function(t3) {
              var n3 = e3._channels[t3].state;
              Object.keys(n3).length && (r2[t3] = n3);
            }), this.getSubscribedChannelGroups().forEach(function(t3) {
              var n3 = e3._channelGroups[t3].state;
              Object.keys(n3).length && (r2[t3] = n3);
            });
            this._heartbeatEndpoint({ channels: t2, channelGroups: n2, state: r2 }, function(t3) {
              t3.error && e3._config.announceFailedHeartbeats && e3._listenerManager.announceStatus(t3), t3.error && e3._config.autoNetworkDetection && e3._isOnline && (e3._isOnline = false, e3.disconnect(), e3._listenerManager.announceNetworkDown(), e3.reconnect()), !t3.error && e3._config.announceSuccessfulHeartbeats && e3._listenerManager.announceStatus(t3);
            }.bind(this));
          }
        }, e2.prototype._startSubscribeLoop = function() {
          var e3 = this;
          this._stopSubscribeLoop();
          var t2 = {}, n2 = [], r2 = [];
          if (Object.keys(this._channels).forEach(function(r3) {
            var i3 = e3._channels[r3].state;
            Object.keys(i3).length && (t2[r3] = i3), n2.push(r3);
          }), Object.keys(this._presenceChannels).forEach(function(e4) {
            n2.push("".concat(e4, "-pnpres"));
          }), Object.keys(this._channelGroups).forEach(function(n3) {
            var i3 = e3._channelGroups[n3].state;
            Object.keys(i3).length && (t2[n3] = i3), r2.push(n3);
          }), Object.keys(this._presenceChannelGroups).forEach(function(e4) {
            r2.push("".concat(e4, "-pnpres"));
          }), 0 !== n2.length || 0 !== r2.length) {
            var i2 = { channels: n2, channelGroups: r2, state: t2, timetoken: this._currentTimetoken, filterExpression: this._config.filterExpression, region: this._region };
            this._subscribeCall = this._subscribeEndpoint(i2, this._processSubscribeResponse.bind(this));
          }
        }, e2.prototype._processSubscribeResponse = function(e3, t2) {
          var i2 = this;
          if (e3.error) {
            if (e3.errorData && "Aborted" === e3.errorData.message)
              return;
            e3.category === A.PNTimeoutCategory ? this._startSubscribeLoop() : e3.category === A.PNNetworkIssuesCategory ? (this.disconnect(), e3.error && this._config.autoNetworkDetection && this._isOnline && (this._isOnline = false, this._listenerManager.announceNetworkDown()), this._reconnectionManager.onReconnection(function() {
              i2._config.autoNetworkDetection && !i2._isOnline && (i2._isOnline = true, i2._listenerManager.announceNetworkUp()), i2.reconnect(), i2._subscriptionStatusAnnounced = true;
              var t3 = { category: A.PNReconnectedCategory, operation: e3.operation, lastTimetoken: i2._lastTimetoken, currentTimetoken: i2._currentTimetoken };
              i2._listenerManager.announceStatus(t3);
            }), this._reconnectionManager.startPolling(), this._listenerManager.announceStatus(e3)) : e3.category === A.PNBadRequestCategory ? (this._stopHeartbeatTimer(), this._listenerManager.announceStatus(e3)) : this._listenerManager.announceStatus(e3);
          } else {
            if (this._storedTimetoken ? (this._currentTimetoken = this._storedTimetoken, this._storedTimetoken = null) : (this._lastTimetoken = this._currentTimetoken, this._currentTimetoken = t2.metadata.timetoken), !this._subscriptionStatusAnnounced) {
              var o2 = {};
              o2.category = A.PNConnectedCategory, o2.operation = e3.operation, o2.affectedChannels = this._pendingChannelSubscriptions, o2.subscribedChannels = this.getSubscribedChannels(), o2.affectedChannelGroups = this._pendingChannelGroupSubscriptions, o2.lastTimetoken = this._lastTimetoken, o2.currentTimetoken = this._currentTimetoken, this._subscriptionStatusAnnounced = true, this._listenerManager.announceStatus(o2), this._pendingChannelSubscriptions = [], this._pendingChannelGroupSubscriptions = [];
            }
            var s2 = t2.messages || [], a2 = this._config, u2 = a2.requestMessageCountThreshold, c2 = a2.dedupeOnSubscribe;
            if (u2 && s2.length >= u2) {
              var l2 = {};
              l2.category = A.PNRequestMessageCountExceededCategory, l2.operation = e3.operation, this._listenerManager.announceStatus(l2);
            }
            s2.forEach(function(e4) {
              var t3 = e4.channel, o3 = e4.subscriptionMatch, s3 = e4.publishMetaData;
              if (t3 === o3 && (o3 = null), c2) {
                if (i2._dedupingManager.isDuplicate(e4))
                  return;
                i2._dedupingManager.addEntry(e4);
              }
              if (E.endsWith(e4.channel, "-pnpres"))
                (g2 = { channel: null, subscription: null }).actualChannel = null != o3 ? t3 : null, g2.subscribedChannel = null != o3 ? o3 : t3, t3 && (g2.channel = t3.substring(0, t3.lastIndexOf("-pnpres"))), o3 && (g2.subscription = o3.substring(0, o3.lastIndexOf("-pnpres"))), g2.action = e4.payload.action, g2.state = e4.payload.data, g2.timetoken = s3.publishTimetoken, g2.occupancy = e4.payload.occupancy, g2.uuid = e4.payload.uuid, g2.timestamp = e4.payload.timestamp, e4.payload.join && (g2.join = e4.payload.join), e4.payload.leave && (g2.leave = e4.payload.leave), e4.payload.timeout && (g2.timeout = e4.payload.timeout), i2._listenerManager.announcePresence(g2);
              else if (1 === e4.messageType) {
                (g2 = { channel: null, subscription: null }).channel = t3, g2.subscription = o3, g2.timetoken = s3.publishTimetoken, g2.publisher = e4.issuingClientId, e4.userMetadata && (g2.userMetadata = e4.userMetadata), g2.message = e4.payload, i2._listenerManager.announceSignal(g2);
              } else if (2 === e4.messageType) {
                if ((g2 = { channel: null, subscription: null }).channel = t3, g2.subscription = o3, g2.timetoken = s3.publishTimetoken, g2.publisher = e4.issuingClientId, e4.userMetadata && (g2.userMetadata = e4.userMetadata), g2.message = { event: e4.payload.event, type: e4.payload.type, data: e4.payload.data }, i2._listenerManager.announceObjects(g2), "uuid" === e4.payload.type) {
                  var a3 = i2._renameChannelField(g2);
                  i2._listenerManager.announceUser(n(n({}, a3), { message: n(n({}, a3.message), { event: i2._renameEvent(a3.message.event), type: "user" }) }));
                } else if ("channel" === e4.payload.type) {
                  a3 = i2._renameChannelField(g2);
                  i2._listenerManager.announceSpace(n(n({}, a3), { message: n(n({}, a3.message), { event: i2._renameEvent(a3.message.event), type: "space" }) }));
                } else if ("membership" === e4.payload.type) {
                  var u3 = (a3 = i2._renameChannelField(g2)).message.data, l3 = u3.uuid, p2 = u3.channel, h2 = r(u3, ["uuid", "channel"]);
                  h2.user = l3, h2.space = p2, i2._listenerManager.announceMembership(n(n({}, a3), { message: n(n({}, a3.message), { event: i2._renameEvent(a3.message.event), data: h2 }) }));
                }
              } else if (3 === e4.messageType) {
                (g2 = {}).channel = t3, g2.subscription = o3, g2.timetoken = s3.publishTimetoken, g2.publisher = e4.issuingClientId, g2.data = { messageTimetoken: e4.payload.data.messageTimetoken, actionTimetoken: e4.payload.data.actionTimetoken, type: e4.payload.data.type, uuid: e4.issuingClientId, value: e4.payload.data.value }, g2.event = e4.payload.event, i2._listenerManager.announceMessageAction(g2);
              } else if (4 === e4.messageType) {
                (g2 = {}).channel = t3, g2.subscription = o3, g2.timetoken = s3.publishTimetoken, g2.publisher = e4.issuingClientId;
                var f2 = e4.payload;
                if (i2._config.cipherKey) {
                  var d2 = i2._crypto.decrypt(e4.payload);
                  "object" == typeof d2 && null !== d2 && (f2 = d2);
                }
                e4.userMetadata && (g2.userMetadata = e4.userMetadata), g2.message = f2.message, g2.file = { id: f2.file.id, name: f2.file.name, url: i2._getFileUrl({ id: f2.file.id, name: f2.file.name, channel: t3 }) }, i2._listenerManager.announceFile(g2);
              } else {
                var g2;
                (g2 = { channel: null, subscription: null }).actualChannel = null != o3 ? t3 : null, g2.subscribedChannel = null != o3 ? o3 : t3, g2.channel = t3, g2.subscription = o3, g2.timetoken = s3.publishTimetoken, g2.publisher = e4.issuingClientId, e4.userMetadata && (g2.userMetadata = e4.userMetadata), i2._config.cipherKey ? g2.message = i2._crypto.decrypt(e4.payload) : g2.message = e4.payload, i2._listenerManager.announceMessage(g2);
              }
            }), this._region = t2.metadata.region, this._startSubscribeLoop();
          }
        }, e2.prototype._stopSubscribeLoop = function() {
          this._subscribeCall && ("function" == typeof this._subscribeCall.abort && this._subscribeCall.abort(), this._subscribeCall = null);
        }, e2.prototype._renameEvent = function(e3) {
          return "set" === e3 ? "updated" : "removed";
        }, e2.prototype._renameChannelField = function(e3) {
          var t2 = e3.channel, n2 = r(e3, ["channel"]);
          return n2.spaceId = t2, n2;
        }, e2;
      }(), j = { PNTimeOperation: "PNTimeOperation", PNHistoryOperation: "PNHistoryOperation", PNDeleteMessagesOperation: "PNDeleteMessagesOperation", PNFetchMessagesOperation: "PNFetchMessagesOperation", PNMessageCounts: "PNMessageCountsOperation", PNSubscribeOperation: "PNSubscribeOperation", PNUnsubscribeOperation: "PNUnsubscribeOperation", PNPublishOperation: "PNPublishOperation", PNSignalOperation: "PNSignalOperation", PNAddMessageActionOperation: "PNAddActionOperation", PNRemoveMessageActionOperation: "PNRemoveMessageActionOperation", PNGetMessageActionsOperation: "PNGetMessageActionsOperation", PNCreateUserOperation: "PNCreateUserOperation", PNUpdateUserOperation: "PNUpdateUserOperation", PNDeleteUserOperation: "PNDeleteUserOperation", PNGetUserOperation: "PNGetUsersOperation", PNGetUsersOperation: "PNGetUsersOperation", PNCreateSpaceOperation: "PNCreateSpaceOperation", PNUpdateSpaceOperation: "PNUpdateSpaceOperation", PNDeleteSpaceOperation: "PNDeleteSpaceOperation", PNGetSpaceOperation: "PNGetSpacesOperation", PNGetSpacesOperation: "PNGetSpacesOperation", PNGetMembersOperation: "PNGetMembersOperation", PNUpdateMembersOperation: "PNUpdateMembersOperation", PNGetMembershipsOperation: "PNGetMembershipsOperation", PNUpdateMembershipsOperation: "PNUpdateMembershipsOperation", PNListFilesOperation: "PNListFilesOperation", PNGenerateUploadUrlOperation: "PNGenerateUploadUrlOperation", PNPublishFileOperation: "PNPublishFileOperation", PNGetFileUrlOperation: "PNGetFileUrlOperation", PNDownloadFileOperation: "PNDownloadFileOperation", PNGetAllUUIDMetadataOperation: "PNGetAllUUIDMetadataOperation", PNGetUUIDMetadataOperation: "PNGetUUIDMetadataOperation", PNSetUUIDMetadataOperation: "PNSetUUIDMetadataOperation", PNRemoveUUIDMetadataOperation: "PNRemoveUUIDMetadataOperation", PNGetAllChannelMetadataOperation: "PNGetAllChannelMetadataOperation", PNGetChannelMetadataOperation: "PNGetChannelMetadataOperation", PNSetChannelMetadataOperation: "PNSetChannelMetadataOperation", PNRemoveChannelMetadataOperation: "PNRemoveChannelMetadataOperation", PNSetMembersOperation: "PNSetMembersOperation", PNSetMembershipsOperation: "PNSetMembershipsOperation", PNPushNotificationEnabledChannelsOperation: "PNPushNotificationEnabledChannelsOperation", PNRemoveAllPushNotificationsOperation: "PNRemoveAllPushNotificationsOperation", PNWhereNowOperation: "PNWhereNowOperation", PNSetStateOperation: "PNSetStateOperation", PNHereNowOperation: "PNHereNowOperation", PNGetStateOperation: "PNGetStateOperation", PNHeartbeatOperation: "PNHeartbeatOperation", PNChannelGroupsOperation: "PNChannelGroupsOperation", PNRemoveGroupOperation: "PNRemoveGroupOperation", PNChannelsForGroupOperation: "PNChannelsForGroupOperation", PNAddChannelsToGroupOperation: "PNAddChannelsToGroupOperation", PNRemoveChannelsFromGroupOperation: "PNRemoveChannelsFromGroupOperation", PNAccessManagerGrant: "PNAccessManagerGrant", PNAccessManagerGrantToken: "PNAccessManagerGrantToken", PNAccessManagerAudit: "PNAccessManagerAudit", PNAccessManagerRevokeToken: "PNAccessManagerRevokeToken", PNHandshakeOperation: "PNHandshakeOperation", PNReceiveMessagesOperation: "PNReceiveMessagesOperation" }, R = function() {
        function e2(e3) {
          this._maximumSamplesCount = 100, this._trackedLatencies = {}, this._latencies = {}, this._maximumSamplesCount = e3.maximumSamplesCount || this._maximumSamplesCount;
        }
        return e2.prototype.operationsLatencyForRequest = function() {
          var e3 = this, t2 = {};
          return Object.keys(this._latencies).forEach(function(n2) {
            var r2 = e3._latencies[n2], i2 = e3._averageLatency(r2);
            i2 > 0 && (t2["l_".concat(n2)] = i2);
          }), t2;
        }, e2.prototype.startLatencyMeasure = function(e3, t2) {
          e3 !== j.PNSubscribeOperation && t2 && (this._trackedLatencies[t2] = Date.now());
        }, e2.prototype.stopLatencyMeasure = function(e3, t2) {
          if (e3 !== j.PNSubscribeOperation && t2) {
            var n2 = this._endpointName(e3), r2 = this._latencies[n2], i2 = this._trackedLatencies[t2];
            r2 || (this._latencies[n2] = [], r2 = this._latencies[n2]), r2.push(Date.now() - i2), r2.length > this._maximumSamplesCount && r2.splice(0, r2.length - this._maximumSamplesCount), delete this._trackedLatencies[t2];
          }
        }, e2.prototype._averageLatency = function(e3) {
          return Math.floor(e3.reduce(function(e4, t2) {
            return e4 + t2;
          }, 0) / e3.length);
        }, e2.prototype._endpointName = function(e3) {
          var t2 = null;
          switch (e3) {
            case j.PNPublishOperation:
              t2 = "pub";
              break;
            case j.PNSignalOperation:
              t2 = "sig";
              break;
            case j.PNHistoryOperation:
            case j.PNFetchMessagesOperation:
            case j.PNDeleteMessagesOperation:
            case j.PNMessageCounts:
              t2 = "hist";
              break;
            case j.PNUnsubscribeOperation:
            case j.PNWhereNowOperation:
            case j.PNHereNowOperation:
            case j.PNHeartbeatOperation:
            case j.PNSetStateOperation:
            case j.PNGetStateOperation:
              t2 = "pres";
              break;
            case j.PNAddChannelsToGroupOperation:
            case j.PNRemoveChannelsFromGroupOperation:
            case j.PNChannelGroupsOperation:
            case j.PNRemoveGroupOperation:
            case j.PNChannelsForGroupOperation:
              t2 = "cg";
              break;
            case j.PNPushNotificationEnabledChannelsOperation:
            case j.PNRemoveAllPushNotificationsOperation:
              t2 = "push";
              break;
            case j.PNCreateUserOperation:
            case j.PNUpdateUserOperation:
            case j.PNDeleteUserOperation:
            case j.PNGetUserOperation:
            case j.PNGetUsersOperation:
            case j.PNCreateSpaceOperation:
            case j.PNUpdateSpaceOperation:
            case j.PNDeleteSpaceOperation:
            case j.PNGetSpaceOperation:
            case j.PNGetSpacesOperation:
            case j.PNGetMembersOperation:
            case j.PNUpdateMembersOperation:
            case j.PNGetMembershipsOperation:
            case j.PNUpdateMembershipsOperation:
              t2 = "obj";
              break;
            case j.PNAddMessageActionOperation:
            case j.PNRemoveMessageActionOperation:
            case j.PNGetMessageActionsOperation:
              t2 = "msga";
              break;
            case j.PNAccessManagerGrant:
            case j.PNAccessManagerAudit:
              t2 = "pam";
              break;
            case j.PNAccessManagerGrantToken:
            case j.PNAccessManagerRevokeToken:
              t2 = "pamv3";
              break;
            default:
              t2 = "time";
          }
          return t2;
        }, e2;
      }(), U = function() {
        function e2(e3, t2, n2) {
          this._payload = e3, this._setDefaultPayloadStructure(), this.title = t2, this.body = n2;
        }
        return Object.defineProperty(e2.prototype, "payload", { get: function() {
          return this._payload;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "title", { set: function(e3) {
          this._title = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "subtitle", { set: function(e3) {
          this._subtitle = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "body", { set: function(e3) {
          this._body = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "badge", { set: function(e3) {
          this._badge = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "sound", { set: function(e3) {
          this._sound = e3;
        }, enumerable: false, configurable: true }), e2.prototype._setDefaultPayloadStructure = function() {
        }, e2.prototype.toObject = function() {
          return {};
        }, e2;
      }(), x = function(e2) {
        function r2() {
          return null !== e2 && e2.apply(this, arguments) || this;
        }
        return t(r2, e2), Object.defineProperty(r2.prototype, "configurations", { set: function(e3) {
          e3 && e3.length && (this._configurations = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "notification", { get: function() {
          return this._payload.aps;
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "title", { get: function() {
          return this._title;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.aps.alert.title = e3, this._title = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "subtitle", { get: function() {
          return this._subtitle;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.aps.alert.subtitle = e3, this._subtitle = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "body", { get: function() {
          return this._body;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.aps.alert.body = e3, this._body = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "badge", { get: function() {
          return this._badge;
        }, set: function(e3) {
          null != e3 && (this._payload.aps.badge = e3, this._badge = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "sound", { get: function() {
          return this._sound;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.aps.sound = e3, this._sound = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "silent", { set: function(e3) {
          this._isSilent = e3;
        }, enumerable: false, configurable: true }), r2.prototype._setDefaultPayloadStructure = function() {
          this._payload.aps = { alert: {} };
        }, r2.prototype.toObject = function() {
          var e3 = this, t2 = n({}, this._payload), r3 = t2.aps, i2 = r3.alert;
          if (this._isSilent && (r3["content-available"] = 1), "apns2" === this._apnsPushType) {
            if (!this._configurations || !this._configurations.length)
              throw new ReferenceError("APNS2 configuration is missing");
            var o2 = [];
            this._configurations.forEach(function(t3) {
              o2.push(e3._objectFromAPNS2Configuration(t3));
            }), o2.length && (t2.pn_push = o2);
          }
          return i2 && Object.keys(i2).length || delete r3.alert, this._isSilent && (delete r3.alert, delete r3.badge, delete r3.sound, i2 = {}), this._isSilent || Object.keys(i2).length ? t2 : null;
        }, r2.prototype._objectFromAPNS2Configuration = function(e3) {
          var t2 = this;
          if (!e3.targets || !e3.targets.length)
            throw new ReferenceError("At least one APNS2 target should be provided");
          var n2 = [];
          e3.targets.forEach(function(e4) {
            n2.push(t2._objectFromAPNSTarget(e4));
          });
          var r3 = e3.collapseId, i2 = e3.expirationDate, o2 = { auth_method: "token", targets: n2, version: "v2" };
          return r3 && r3.length && (o2.collapse_id = r3), i2 && (o2.expiration = i2.toISOString()), o2;
        }, r2.prototype._objectFromAPNSTarget = function(e3) {
          if (!e3.topic || !e3.topic.length)
            throw new TypeError("Target 'topic' undefined.");
          var t2 = e3.topic, n2 = e3.environment, r3 = void 0 === n2 ? "development" : n2, i2 = e3.excludedDevices, o2 = void 0 === i2 ? [] : i2, s2 = { topic: t2, environment: r3 };
          return o2.length && (s2.excluded_devices = o2), s2;
        }, r2;
      }(U), I = function(e2) {
        function r2() {
          return null !== e2 && e2.apply(this, arguments) || this;
        }
        return t(r2, e2), Object.defineProperty(r2.prototype, "backContent", { get: function() {
          return this._backContent;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.back_content = e3, this._backContent = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "backTitle", { get: function() {
          return this._backTitle;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.back_title = e3, this._backTitle = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "count", { get: function() {
          return this._count;
        }, set: function(e3) {
          null != e3 && (this._payload.count = e3, this._count = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "title", { get: function() {
          return this._title;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.title = e3, this._title = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "type", { get: function() {
          return this._type;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.type = e3, this._type = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "subtitle", { get: function() {
          return this.backTitle;
        }, set: function(e3) {
          this.backTitle = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "body", { get: function() {
          return this.backContent;
        }, set: function(e3) {
          this.backContent = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(r2.prototype, "badge", { get: function() {
          return this.count;
        }, set: function(e3) {
          this.count = e3;
        }, enumerable: false, configurable: true }), r2.prototype.toObject = function() {
          return Object.keys(this._payload).length ? n({}, this._payload) : null;
        }, r2;
      }(U), D = function(e2) {
        function i2() {
          return null !== e2 && e2.apply(this, arguments) || this;
        }
        return t(i2, e2), Object.defineProperty(i2.prototype, "notification", { get: function() {
          return this._payload.notification;
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "data", { get: function() {
          return this._payload.data;
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "title", { get: function() {
          return this._title;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.notification.title = e3, this._title = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "body", { get: function() {
          return this._body;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.notification.body = e3, this._body = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "sound", { get: function() {
          return this._sound;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.notification.sound = e3, this._sound = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "icon", { get: function() {
          return this._icon;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.notification.icon = e3, this._icon = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "tag", { get: function() {
          return this._tag;
        }, set: function(e3) {
          e3 && e3.length && (this._payload.notification.tag = e3, this._tag = e3);
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "silent", { set: function(e3) {
          this._isSilent = e3;
        }, enumerable: false, configurable: true }), i2.prototype._setDefaultPayloadStructure = function() {
          this._payload.notification = {}, this._payload.data = {};
        }, i2.prototype.toObject = function() {
          var e3 = n({}, this._payload.data), t2 = null, i3 = {};
          if (Object.keys(this._payload).length > 2) {
            var o2 = this._payload;
            o2.notification, o2.data;
            var s2 = r(o2, ["notification", "data"]);
            e3 = n(n({}, e3), s2);
          }
          return this._isSilent ? e3.notification = this._payload.notification : t2 = this._payload.notification, Object.keys(e3).length && (i3.data = e3), t2 && Object.keys(t2).length && (i3.notification = t2), Object.keys(i3).length ? i3 : null;
        }, i2;
      }(U), G = function() {
        function e2(e3, t2) {
          this._payload = { apns: {}, mpns: {}, fcm: {} }, this._title = e3, this._body = t2, this.apns = new x(this._payload.apns, e3, t2), this.mpns = new I(this._payload.mpns, e3, t2), this.fcm = new D(this._payload.fcm, e3, t2);
        }
        return Object.defineProperty(e2.prototype, "debugging", { set: function(e3) {
          this._debugging = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "title", { get: function() {
          return this._title;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "body", { get: function() {
          return this._body;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "subtitle", { get: function() {
          return this._subtitle;
        }, set: function(e3) {
          this._subtitle = e3, this.apns.subtitle = e3, this.mpns.subtitle = e3, this.fcm.subtitle = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "badge", { get: function() {
          return this._badge;
        }, set: function(e3) {
          this._badge = e3, this.apns.badge = e3, this.mpns.badge = e3, this.fcm.badge = e3;
        }, enumerable: false, configurable: true }), Object.defineProperty(e2.prototype, "sound", { get: function() {
          return this._sound;
        }, set: function(e3) {
          this._sound = e3, this.apns.sound = e3, this.mpns.sound = e3, this.fcm.sound = e3;
        }, enumerable: false, configurable: true }), e2.prototype.buildPayload = function(e3) {
          var t2 = {};
          if (e3.includes("apns") || e3.includes("apns2")) {
            this.apns._apnsPushType = e3.includes("apns") ? "apns" : "apns2";
            var n2 = this.apns.toObject();
            n2 && Object.keys(n2).length && (t2.pn_apns = n2);
          }
          if (e3.includes("mpns")) {
            var r2 = this.mpns.toObject();
            r2 && Object.keys(r2).length && (t2.pn_mpns = r2);
          }
          if (e3.includes("fcm")) {
            var i2 = this.fcm.toObject();
            i2 && Object.keys(i2).length && (t2.pn_gcm = i2);
          }
          return Object.keys(t2).length && this._debugging && (t2.pn_debug = true), t2;
        }, e2;
      }(), K = function() {
        function e2() {
          this._listeners = [];
        }
        return e2.prototype.addListener = function(e3) {
          this._listeners.push(e3);
        }, e2.prototype.removeListener = function(e3) {
          var t2 = [];
          this._listeners.forEach(function(n2) {
            n2 !== e3 && t2.push(n2);
          }), this._listeners = t2;
        }, e2.prototype.removeAllListeners = function() {
          this._listeners = [];
        }, e2.prototype.announcePresence = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.presence && t2.presence(e3);
          });
        }, e2.prototype.announceStatus = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.status && t2.status(e3);
          });
        }, e2.prototype.announceMessage = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.message && t2.message(e3);
          });
        }, e2.prototype.announceSignal = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.signal && t2.signal(e3);
          });
        }, e2.prototype.announceMessageAction = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.messageAction && t2.messageAction(e3);
          });
        }, e2.prototype.announceFile = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.file && t2.file(e3);
          });
        }, e2.prototype.announceObjects = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.objects && t2.objects(e3);
          });
        }, e2.prototype.announceUser = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.user && t2.user(e3);
          });
        }, e2.prototype.announceSpace = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.space && t2.space(e3);
          });
        }, e2.prototype.announceMembership = function(e3) {
          this._listeners.forEach(function(t2) {
            t2.membership && t2.membership(e3);
          });
        }, e2.prototype.announceNetworkUp = function() {
          var e3 = {};
          e3.category = A.PNNetworkUpCategory, this.announceStatus(e3);
        }, e2.prototype.announceNetworkDown = function() {
          var e3 = {};
          e3.category = A.PNNetworkDownCategory, this.announceStatus(e3);
        }, e2;
      }(), F = function() {
        function e2(e3, t2) {
          this._config = e3, this._cbor = t2;
        }
        return e2.prototype.setToken = function(e3) {
          e3 && e3.length > 0 ? this._token = e3 : this._token = void 0;
        }, e2.prototype.getToken = function() {
          return this._token;
        }, e2.prototype.extractPermissions = function(e3) {
          var t2 = { read: false, write: false, manage: false, delete: false, get: false, update: false, join: false };
          return 128 == (128 & e3) && (t2.join = true), 64 == (64 & e3) && (t2.update = true), 32 == (32 & e3) && (t2.get = true), 8 == (8 & e3) && (t2.delete = true), 4 == (4 & e3) && (t2.manage = true), 2 == (2 & e3) && (t2.write = true), 1 == (1 & e3) && (t2.read = true), t2;
        }, e2.prototype.parseToken = function(e3) {
          var t2 = this, n2 = this._cbor.decodeToken(e3);
          if (void 0 !== n2) {
            var r2 = n2.res.uuid ? Object.keys(n2.res.uuid) : [], i2 = Object.keys(n2.res.chan), o2 = Object.keys(n2.res.grp), s2 = n2.pat.uuid ? Object.keys(n2.pat.uuid) : [], a2 = Object.keys(n2.pat.chan), u2 = Object.keys(n2.pat.grp), c2 = { version: n2.v, timestamp: n2.t, ttl: n2.ttl, authorized_uuid: n2.uuid }, l2 = r2.length > 0, p2 = i2.length > 0, h2 = o2.length > 0;
            (l2 || p2 || h2) && (c2.resources = {}, l2 && (c2.resources.uuids = {}, r2.forEach(function(e4) {
              c2.resources.uuids[e4] = t2.extractPermissions(n2.res.uuid[e4]);
            })), p2 && (c2.resources.channels = {}, i2.forEach(function(e4) {
              c2.resources.channels[e4] = t2.extractPermissions(n2.res.chan[e4]);
            })), h2 && (c2.resources.groups = {}, o2.forEach(function(e4) {
              c2.resources.groups[e4] = t2.extractPermissions(n2.res.grp[e4]);
            })));
            var f2 = s2.length > 0, d2 = a2.length > 0, g2 = u2.length > 0;
            return (f2 || d2 || g2) && (c2.patterns = {}, f2 && (c2.patterns.uuids = {}, s2.forEach(function(e4) {
              c2.patterns.uuids[e4] = t2.extractPermissions(n2.pat.uuid[e4]);
            })), d2 && (c2.patterns.channels = {}, a2.forEach(function(e4) {
              c2.patterns.channels[e4] = t2.extractPermissions(n2.pat.chan[e4]);
            })), g2 && (c2.patterns.groups = {}, u2.forEach(function(e4) {
              c2.patterns.groups[e4] = t2.extractPermissions(n2.pat.grp[e4]);
            }))), Object.keys(n2.meta).length > 0 && (c2.meta = n2.meta), c2.signature = n2.sig, c2;
          }
        }, e2;
      }(), L = function(e2) {
        function n2(t2, n3) {
          var r2 = this.constructor, i2 = e2.call(this, t2) || this;
          return i2.name = i2.constructor.name, i2.status = n3, i2.message = t2, Object.setPrototypeOf(i2, r2.prototype), i2;
        }
        return t(n2, e2), n2;
      }(Error);
      function B(e2) {
        return (t2 = { message: e2 }).type = "validationError", t2.error = true, t2;
        var t2;
      }
      function H(e2, t2, n2) {
        return e2.usePost && e2.usePost(t2, n2) ? e2.postURL(t2, n2) : e2.usePatch && e2.usePatch(t2, n2) ? e2.patchURL(t2, n2) : e2.useGetFile && e2.useGetFile(t2, n2) ? e2.getFileURL(t2, n2) : e2.getURL(t2, n2);
      }
      function q(e2) {
        if (e2.sdkName)
          return e2.sdkName;
        var t2 = "PubNub-JS-".concat(e2.sdkFamily);
        e2.partnerId && (t2 += "-".concat(e2.partnerId)), t2 += "/".concat(e2.getVersion());
        var n2 = e2._getPnsdkSuffix(" ");
        return n2.length > 0 && (t2 += n2), t2;
      }
      function z(e2, t2, n2) {
        return t2.usePost && t2.usePost(e2, n2) ? "POST" : t2.usePatch && t2.usePatch(e2, n2) ? "PATCH" : t2.useDelete && t2.useDelete(e2, n2) ? "DELETE" : t2.useGetFile && t2.useGetFile(e2, n2) ? "GETFILE" : "GET";
      }
      function V(e2, t2, n2, r2, i2) {
        var o2 = e2.config, s2 = e2.crypto, a2 = z(e2, i2, r2);
        n2.timestamp = Math.floor(new Date().getTime() / 1e3), "PNPublishOperation" === i2.getOperation() && i2.usePost && i2.usePost(e2, r2) && (a2 = "GET"), "GETFILE" === a2 && (a2 = "GET");
        var u2 = "".concat(a2, "\n").concat(o2.publishKey, "\n").concat(t2, "\n").concat(E.signPamFromParams(n2), "\n");
        if ("POST" === a2)
          u2 += "string" == typeof (c2 = i2.postPayload(e2, r2)) ? c2 : JSON.stringify(c2);
        else if ("PATCH" === a2) {
          var c2;
          u2 += "string" == typeof (c2 = i2.patchPayload(e2, r2)) ? c2 : JSON.stringify(c2);
        }
        var l2 = "v2.".concat(s2.HMACSHA256(u2));
        l2 = (l2 = (l2 = l2.replace(/\+/g, "-")).replace(/\//g, "_")).replace(/=+$/, ""), n2.signature = l2;
      }
      function J(e2, t2) {
        for (var r2 = [], i2 = 2; i2 < arguments.length; i2++)
          r2[i2 - 2] = arguments[i2];
        var o2 = e2.networking, s2 = e2.config, a2 = e2.telemetryManager, u2 = e2.tokenManager, c2 = m(), l2 = null, p2 = null, h2 = {};
        t2.getOperation() === j.PNTimeOperation || t2.getOperation() === j.PNChannelGroupsOperation ? l2 = r2[0] : (h2 = r2[0], l2 = r2[1]), "undefined" == typeof Promise || l2 || (p2 = E.createPromise());
        var f2 = t2.validateParams(e2, h2);
        if (f2)
          return l2 ? l2(B(f2)) : p2 ? (p2.reject(new L("Validation failed, check status for details", B(f2))), p2.promise) : void 0;
        var d2, g2 = t2.prepareParams(e2, h2), y2 = H(t2, e2, h2), b2 = { url: y2, operation: t2.getOperation(), timeout: t2.getRequestTimeout(e2), headers: t2.getRequestHeaders ? t2.getRequestHeaders() : {}, ignoreBody: "function" == typeof t2.ignoreBody && t2.ignoreBody(e2), forceBuffered: "function" == typeof t2.forceBuffered ? t2.forceBuffered(e2, h2) : null, abortSignal: "function" == typeof t2.getAbortSignal ? t2.getAbortSignal(e2, h2) : null };
        g2.uuid = s2.UUID, g2.pnsdk = q(s2);
        var v2 = a2.operationsLatencyForRequest();
        if (Object.keys(v2).length && (g2 = n(n({}, g2), v2)), s2.useInstanceId && (g2.instanceid = s2.instanceId), s2.useRequestId && (g2.requestid = c2), t2.isAuthSupported()) {
          var _2 = u2.getToken() || s2.getAuthKey();
          _2 && (g2.auth = _2);
        }
        s2.secretKey && V(e2, y2, g2, h2, t2);
        var O2 = function(n2, r3) {
          if (n2.error)
            return t2.handleError && t2.handleError(e2, h2, n2), void (l2 ? l2(n2) : p2 && p2.reject(new L("PubNub call failed, check status for details", n2)));
          a2.stopLatencyMeasure(t2.getOperation(), c2);
          var i3 = t2.handleResponse(e2, r3, h2);
          "function" != typeof (null == i3 ? void 0 : i3.then) && (i3 = Promise.resolve(i3)), i3.then(function(e3) {
            l2 ? l2(n2, e3) : p2 && p2.fulfill(e3);
          }).catch(function(e3) {
            if (l2) {
              var n3 = e3;
              t2.getOperation() === j.PNSubscribeOperation && (n3 = { statusCode: 400, error: true, operation: t2.getOperation(), errorData: e3, category: A.PNUnknownCategory }), l2(n3, null);
            } else
              p2 && p2.reject(new L("PubNub call failed, check status for details", e3));
          });
        };
        if (a2.startLatencyMeasure(t2.getOperation(), c2), "POST" === z(e2, t2, h2)) {
          var P2 = t2.postPayload(e2, h2);
          d2 = o2.POST(g2, P2, b2, O2);
        } else if ("PATCH" === z(e2, t2, h2)) {
          P2 = t2.patchPayload(e2, h2);
          d2 = o2.PATCH(g2, P2, b2, O2);
        } else
          d2 = "DELETE" === z(e2, t2, h2) ? o2.DELETE(g2, b2, O2) : "GETFILE" === z(e2, t2, h2) ? o2.GETFILE(g2, b2, O2) : o2.GET(g2, b2, O2);
        return t2.getOperation() === j.PNSubscribeOperation ? d2 : p2 ? p2.promise : void 0;
      }
      var W = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNAddChannelsToGroupOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channels, r2 = t2.channelGroup, i2 = e2.config;
        return r2 ? n2 && 0 !== n2.length ? i2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Channels" : "Missing Channel Group";
      }, getURL: function(e2, t2) {
        var n2 = t2.channelGroup, r2 = e2.config;
        return "/v1/channel-registration/sub-key/".concat(r2.subscribeKey, "/channel-group/").concat(E.encodeString(n2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channels;
        return { add: (void 0 === n2 ? [] : n2).join(",") };
      }, handleResponse: function() {
        return {};
      } });
      var X = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNRemoveChannelsFromGroupOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channels, r2 = t2.channelGroup, i2 = e2.config;
        return r2 ? n2 && 0 !== n2.length ? i2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Channels" : "Missing Channel Group";
      }, getURL: function(e2, t2) {
        var n2 = t2.channelGroup, r2 = e2.config;
        return "/v1/channel-registration/sub-key/".concat(r2.subscribeKey, "/channel-group/").concat(E.encodeString(n2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channels;
        return { remove: (void 0 === n2 ? [] : n2).join(",") };
      }, handleResponse: function() {
        return {};
      } });
      var $ = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNRemoveGroupOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channelGroup, r2 = e2.config;
        return n2 ? r2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Channel Group";
      }, getURL: function(e2, t2) {
        var n2 = t2.channelGroup, r2 = e2.config;
        return "/v1/channel-registration/sub-key/".concat(r2.subscribeKey, "/channel-group/").concat(E.encodeString(n2), "/remove");
      }, isAuthSupported: function() {
        return true;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, prepareParams: function() {
        return {};
      }, handleResponse: function() {
        return {};
      } });
      var Q = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNChannelGroupsOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2) {
        var t2 = e2.config;
        return "/v1/channel-registration/sub-key/".concat(t2.subscribeKey, "/channel-group");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { groups: t2.payload.groups };
      } });
      var Y = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNChannelsForGroupOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channelGroup, r2 = e2.config;
        return n2 ? r2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Channel Group";
      }, getURL: function(e2, t2) {
        var n2 = t2.channelGroup, r2 = e2.config;
        return "/v1/channel-registration/sub-key/".concat(r2.subscribeKey, "/channel-group/").concat(E.encodeString(n2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { channels: t2.payload.channels };
      } });
      var Z = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNPushNotificationEnabledChannelsOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = t2.channels, o2 = t2.topic, s2 = e2.config;
        return n2 ? r2 ? "apns2" !== r2 || o2 ? i2 && 0 !== i2.length ? s2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Channels" : "Missing APNS2 topic" : "Missing GW Type (pushGateway: gcm, apns or apns2)" : "Missing Device ID (device)";
      }, getURL: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = e2.config;
        return "apns2" === r2 ? "/v2/push/sub-key/".concat(i2.subscribeKey, "/devices-apns2/").concat(n2) : "/v1/push/sub-key/".concat(i2.subscribeKey, "/devices/").concat(n2);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var r2 = t2.pushGateway, i2 = t2.channels, o2 = void 0 === i2 ? [] : i2, s2 = t2.environment, a2 = void 0 === s2 ? "development" : s2, u2 = t2.topic, c2 = { type: r2, add: o2.join(",") };
        return "apns2" === r2 && delete (c2 = n(n({}, c2), { environment: a2, topic: u2 })).type, c2;
      }, handleResponse: function() {
        return {};
      } });
      var ee = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNPushNotificationEnabledChannelsOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = t2.channels, o2 = t2.topic, s2 = e2.config;
        return n2 ? r2 ? "apns2" !== r2 || o2 ? i2 && 0 !== i2.length ? s2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Channels" : "Missing APNS2 topic" : "Missing GW Type (pushGateway: gcm, apns or apns2)" : "Missing Device ID (device)";
      }, getURL: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = e2.config;
        return "apns2" === r2 ? "/v2/push/sub-key/".concat(i2.subscribeKey, "/devices-apns2/").concat(n2) : "/v1/push/sub-key/".concat(i2.subscribeKey, "/devices/").concat(n2);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var r2 = t2.pushGateway, i2 = t2.channels, o2 = void 0 === i2 ? [] : i2, s2 = t2.environment, a2 = void 0 === s2 ? "development" : s2, u2 = t2.topic, c2 = { type: r2, remove: o2.join(",") };
        return "apns2" === r2 && delete (c2 = n(n({}, c2), { environment: a2, topic: u2 })).type, c2;
      }, handleResponse: function() {
        return {};
      } });
      var te = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNPushNotificationEnabledChannelsOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = t2.topic, o2 = e2.config;
        return n2 ? r2 ? "apns2" !== r2 || i2 ? o2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing APNS2 topic" : "Missing GW Type (pushGateway: gcm, apns or apns2)" : "Missing Device ID (device)";
      }, getURL: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = e2.config;
        return "apns2" === r2 ? "/v2/push/sub-key/".concat(i2.subscribeKey, "/devices-apns2/").concat(n2) : "/v1/push/sub-key/".concat(i2.subscribeKey, "/devices/").concat(n2);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var r2 = t2.pushGateway, i2 = t2.environment, o2 = void 0 === i2 ? "development" : i2, s2 = t2.topic, a2 = { type: r2 };
        return "apns2" === r2 && delete (a2 = n(n({}, a2), { environment: o2, topic: s2 })).type, a2;
      }, handleResponse: function(e2, t2) {
        return { channels: t2 };
      } });
      var ne = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNRemoveAllPushNotificationsOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = t2.topic, o2 = e2.config;
        return n2 ? r2 ? "apns2" !== r2 || i2 ? o2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing APNS2 topic" : "Missing GW Type (pushGateway: gcm, apns or apns2)" : "Missing Device ID (device)";
      }, getURL: function(e2, t2) {
        var n2 = t2.device, r2 = t2.pushGateway, i2 = e2.config;
        return "apns2" === r2 ? "/v2/push/sub-key/".concat(i2.subscribeKey, "/devices-apns2/").concat(n2, "/remove") : "/v1/push/sub-key/".concat(i2.subscribeKey, "/devices/").concat(n2, "/remove");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var r2 = t2.pushGateway, i2 = t2.environment, o2 = void 0 === i2 ? "development" : i2, s2 = t2.topic, a2 = { type: r2 };
        return "apns2" === r2 && delete (a2 = n(n({}, a2), { environment: o2, topic: s2 })).type, a2;
      }, handleResponse: function() {
        return {};
      } });
      var re = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNUnsubscribeOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels, i2 = void 0 === r2 ? [] : r2, o2 = i2.length > 0 ? i2.join(",") : ",";
        return "/v2/presence/sub-key/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(o2), "/leave");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channelGroups, r2 = void 0 === n2 ? [] : n2, i2 = {};
        return r2.length > 0 && (i2["channel-group"] = r2.join(",")), i2;
      }, handleResponse: function() {
        return {};
      } });
      var ie = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNWhereNowOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.uuid, i2 = void 0 === r2 ? n2.UUID : r2;
        return "/v2/presence/sub-key/".concat(n2.subscribeKey, "/uuid/").concat(E.encodeString(i2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return t2.payload ? { channels: t2.payload.channels } : { channels: [] };
      } });
      var oe = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNHeartbeatOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels, i2 = void 0 === r2 ? [] : r2, o2 = i2.length > 0 ? i2.join(",") : ",";
        return "/v2/presence/sub-key/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(o2), "/heartbeat");
      }, isAuthSupported: function() {
        return true;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channelGroups, r2 = void 0 === n2 ? [] : n2, i2 = t2.state, o2 = void 0 === i2 ? {} : i2, s2 = e2.config, a2 = {};
        return r2.length > 0 && (a2["channel-group"] = r2.join(",")), a2.state = JSON.stringify(o2), a2.heartbeat = s2.getPresenceTimeout(), a2;
      }, handleResponse: function() {
        return {};
      } });
      var se = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNGetStateOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.uuid, i2 = void 0 === r2 ? n2.UUID : r2, o2 = t2.channels, s2 = void 0 === o2 ? [] : o2, a2 = s2.length > 0 ? s2.join(",") : ",";
        return "/v2/presence/sub-key/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(a2), "/uuid/").concat(i2);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channelGroups, r2 = void 0 === n2 ? [] : n2, i2 = {};
        return r2.length > 0 && (i2["channel-group"] = r2.join(",")), i2;
      }, handleResponse: function(e2, t2, n2) {
        var r2 = n2.channels, i2 = void 0 === r2 ? [] : r2, o2 = n2.channelGroups, s2 = void 0 === o2 ? [] : o2, a2 = {};
        return 1 === i2.length && 0 === s2.length ? a2[i2[0]] = t2.payload : a2 = t2.payload, { channels: a2 };
      } });
      var ae = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNSetStateOperation;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.state, i2 = t2.channels, o2 = void 0 === i2 ? [] : i2, s2 = t2.channelGroups, a2 = void 0 === s2 ? [] : s2;
        return r2 ? n2.subscribeKey ? 0 === o2.length && 0 === a2.length ? "Please provide a list of channels and/or channel-groups" : void 0 : "Missing Subscribe Key" : "Missing State";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels, i2 = void 0 === r2 ? [] : r2, o2 = i2.length > 0 ? i2.join(",") : ",";
        return "/v2/presence/sub-key/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(o2), "/uuid/").concat(E.encodeString(n2.UUID), "/data");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.state, r2 = t2.channelGroups, i2 = void 0 === r2 ? [] : r2, o2 = {};
        return o2.state = JSON.stringify(n2), i2.length > 0 && (o2["channel-group"] = i2.join(",")), o2;
      }, handleResponse: function(e2, t2) {
        return { state: t2.payload };
      } });
      var ue = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNHereNowOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels, i2 = void 0 === r2 ? [] : r2, o2 = t2.channelGroups, s2 = void 0 === o2 ? [] : o2, a2 = "/v2/presence/sub-key/".concat(n2.subscribeKey);
        if (i2.length > 0 || s2.length > 0) {
          var u2 = i2.length > 0 ? i2.join(",") : ",";
          a2 += "/channel/".concat(E.encodeString(u2));
        }
        return a2;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var r2 = t2.channelGroups, i2 = void 0 === r2 ? [] : r2, o2 = t2.includeUUIDs, s2 = void 0 === o2 || o2, a2 = t2.includeState, u2 = void 0 !== a2 && a2, c2 = t2.queryParameters, l2 = void 0 === c2 ? {} : c2, p2 = {};
        return s2 || (p2.disable_uuids = 1), u2 && (p2.state = 1), i2.length > 0 && (p2["channel-group"] = i2.join(",")), p2 = n(n({}, p2), l2);
      }, handleResponse: function(e2, t2, n2) {
        var r2 = n2.channels, i2 = void 0 === r2 ? [] : r2, o2 = n2.channelGroups, s2 = void 0 === o2 ? [] : o2, a2 = n2.includeUUIDs, u2 = void 0 === a2 || a2, c2 = n2.includeState, l2 = void 0 !== c2 && c2;
        return i2.length > 1 || s2.length > 0 || 0 === s2.length && 0 === i2.length ? function() {
          var e3 = {};
          return e3.totalChannels = t2.payload.total_channels, e3.totalOccupancy = t2.payload.total_occupancy, e3.channels = {}, Object.keys(t2.payload.channels).forEach(function(n3) {
            var r3 = t2.payload.channels[n3], i3 = [];
            return e3.channels[n3] = { occupants: i3, name: n3, occupancy: r3.occupancy }, u2 && r3.uuids.forEach(function(e4) {
              l2 ? i3.push({ state: e4.state, uuid: e4.uuid }) : i3.push({ state: null, uuid: e4 });
            }), e3;
          }), e3;
        }() : function() {
          var e3 = {}, n3 = [];
          return e3.totalChannels = 1, e3.totalOccupancy = t2.occupancy, e3.channels = {}, e3.channels[i2[0]] = { occupants: n3, name: i2[0], occupancy: t2.occupancy }, u2 && t2.uuids && t2.uuids.forEach(function(e4) {
            l2 ? n3.push({ state: e4.state, uuid: e4.uuid }) : n3.push({ state: null, uuid: e4 });
          }), e3;
        }();
      }, handleError: function(e2, t2, n2) {
        402 !== n2.statusCode || this.getURL(e2, t2).includes("channel") || (n2.errorData.message = "You have tried to perform a Global Here Now operation, your keyset configuration does not support that. Please provide a channel, or enable the Global Here Now feature from the Portal.");
      } });
      var ce = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNAddMessageActionOperation;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.action, i2 = t2.channel;
        return t2.messageTimetoken ? n2.subscribeKey ? i2 ? r2 ? r2.value ? r2.type ? r2.type.length > 15 ? "Action.type value exceed maximum length of 15" : void 0 : "Missing Action.type" : "Missing Action.value" : "Missing Action" : "Missing message channel" : "Missing Subscribe Key" : "Missing message timetoken";
      }, usePost: function() {
        return true;
      }, postURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel, i2 = t2.messageTimetoken;
        return "/v1/message-actions/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(r2), "/message/").concat(i2);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, getRequestHeaders: function() {
        return { "Content-Type": "application/json" };
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, postPayload: function(e2, t2) {
        return t2.action;
      }, handleResponse: function(e2, t2) {
        return { data: t2.data };
      } });
      var le = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNRemoveMessageActionOperation;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel, i2 = t2.actionTimetoken;
        return t2.messageTimetoken ? i2 ? n2.subscribeKey ? r2 ? void 0 : "Missing message channel" : "Missing Subscribe Key" : "Missing action timetoken" : "Missing message timetoken";
      }, useDelete: function() {
        return true;
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel, i2 = t2.actionTimetoken, o2 = t2.messageTimetoken;
        return "/v1/message-actions/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(r2), "/message/").concat(o2, "/action/").concat(i2);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { data: t2.data };
      } });
      var pe = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNGetMessageActionsOperation;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel;
        return n2.subscribeKey ? r2 ? void 0 : "Missing message channel" : "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel;
        return "/v1/message-actions/".concat(n2.subscribeKey, "/channel/").concat(E.encodeString(r2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.limit, r2 = t2.start, i2 = t2.end, o2 = {};
        return n2 && (o2.limit = n2), r2 && (o2.start = r2), i2 && (o2.end = i2), o2;
      }, handleResponse: function(e2, t2) {
        var n2 = { data: t2.data, start: null, end: null };
        return n2.data.length && (n2.end = n2.data[n2.data.length - 1].actionTimetoken, n2.start = n2.data[0].actionTimetoken), n2;
      } }), he = { getOperation: function() {
        return j.PNListFilesOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.channel))
          return "channel can't be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v1/files/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel), "/files");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = {};
        return t2.limit && (n2.limit = t2.limit), t2.next && (n2.next = t2.next), n2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, next: t2.next, count: t2.count };
      } }, fe = { getOperation: function() {
        return j.PNGenerateUploadUrlOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channel) ? (null == t2 ? void 0 : t2.name) ? void 0 : "name can't be empty" : "channel can't be empty";
      }, usePost: function() {
        return true;
      }, postURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v1/files/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel), "/generate-upload-url");
      }, postPayload: function(e2, t2) {
        return { name: t2.name };
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, file_upload_request: t2.file_upload_request };
      } }, de = { getOperation: function() {
        return j.PNPublishFileOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channel) ? (null == t2 ? void 0 : t2.fileId) ? (null == t2 ? void 0 : t2.fileName) ? void 0 : "file name can't be empty" : "file id can't be empty" : "channel can't be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = n2.publishKey, i2 = n2.subscribeKey, o2 = function(e3, t3) {
          var n3 = e3.crypto, r3 = e3.config, i3 = JSON.stringify(t3);
          return r3.cipherKey && (i3 = n3.encrypt(i3), i3 = JSON.stringify(i3)), i3 || "";
        }(e2, { message: t2.message, file: { name: t2.fileName, id: t2.fileId } });
        return "/v1/files/publish-file/".concat(r2, "/").concat(i2, "/0/").concat(E.encodeString(t2.channel), "/0/").concat(E.encodeString(o2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = {};
        return t2.ttl && (n2.ttl = t2.ttl), void 0 !== t2.storeInHistory && (n2.store = t2.storeInHistory ? "1" : "0"), t2.meta && "object" == typeof t2.meta && (n2.meta = JSON.stringify(t2.meta)), n2;
      }, handleResponse: function(e2, t2) {
        return { timetoken: t2[2] };
      } }, ge = function(e2) {
        var t2 = function(e3) {
          var t3 = this, n2 = e3.generateUploadUrl, r2 = e3.publishFile, s2 = e3.modules, a2 = s2.PubNubFile, u2 = s2.config, c2 = s2.cryptography, l2 = s2.networking;
          return function(e4) {
            var s3 = e4.channel, p2 = e4.file, h2 = e4.message, f2 = e4.cipherKey, d2 = e4.meta, g2 = e4.ttl, y2 = e4.storeInHistory;
            return i(t3, void 0, void 0, function() {
              var e5, t4, i2, b2, v2, m2, _2, O2, P2, S2, w2, T2, k2, N2, C2, E2, A2, M2, j2, R2, U2, x2, I2, D2, G2, K2, F2, H2;
              return o(this, function(o2) {
                switch (o2.label) {
                  case 0:
                    if (!s3)
                      throw new L("Validation failed, check status for details", B("channel can't be empty"));
                    if (!p2)
                      throw new L("Validation failed, check status for details", B("file can't be empty"));
                    return e5 = a2.create(p2), [4, n2({ channel: s3, name: e5.name })];
                  case 1:
                    return t4 = o2.sent(), i2 = t4.file_upload_request, b2 = i2.url, v2 = i2.form_fields, m2 = t4.data, _2 = m2.id, O2 = m2.name, a2.supportsEncryptFile && (null != f2 ? f2 : u2.cipherKey) ? [4, c2.encryptFile(null != f2 ? f2 : u2.cipherKey, e5, a2)] : [3, 3];
                  case 2:
                    e5 = o2.sent(), o2.label = 3;
                  case 3:
                    P2 = v2, e5.mimeType && (P2 = v2.map(function(t5) {
                      return "Content-Type" === t5.key ? { key: t5.key, value: e5.mimeType } : t5;
                    })), o2.label = 4;
                  case 4:
                    return o2.trys.push([4, 18, , 20]), a2.supportsFileUri && p2.uri ? (T2 = (w2 = l2).POSTFILE, k2 = [b2, P2], [4, e5.toFileUri()]) : [3, 7];
                  case 5:
                    return [4, T2.apply(w2, k2.concat([o2.sent()]))];
                  case 6:
                    return S2 = o2.sent(), [3, 17];
                  case 7:
                    return a2.supportsFile ? (C2 = (N2 = l2).POSTFILE, E2 = [b2, P2], [4, e5.toFile()]) : [3, 10];
                  case 8:
                    return [4, C2.apply(N2, E2.concat([o2.sent()]))];
                  case 9:
                    return S2 = o2.sent(), [3, 17];
                  case 10:
                    return a2.supportsBuffer ? (M2 = (A2 = l2).POSTFILE, j2 = [b2, P2], [4, e5.toBuffer()]) : [3, 13];
                  case 11:
                    return [4, M2.apply(A2, j2.concat([o2.sent()]))];
                  case 12:
                    return S2 = o2.sent(), [3, 17];
                  case 13:
                    return a2.supportsBlob ? (U2 = (R2 = l2).POSTFILE, x2 = [b2, P2], [4, e5.toBlob()]) : [3, 16];
                  case 14:
                    return [4, U2.apply(R2, x2.concat([o2.sent()]))];
                  case 15:
                    return S2 = o2.sent(), [3, 17];
                  case 16:
                    throw new Error("Unsupported environment");
                  case 17:
                    return [3, 20];
                  case 18:
                    return I2 = o2.sent(), [4, (q2 = I2.response, new Promise(function(e6) {
                      var t5 = "";
                      q2.on("data", function(e7) {
                        t5 += e7.toString("utf8");
                      }), q2.on("end", function() {
                        e6(t5);
                      });
                    }))];
                  case 19:
                    throw D2 = o2.sent(), G2 = /<Message>(.*)<\/Message>/gi.exec(D2), new L(G2 ? "Upload to bucket failed: ".concat(G2[1]) : "Upload to bucket failed.", I2);
                  case 20:
                    if (204 !== S2.status)
                      throw new L("Upload to bucket was unsuccessful", S2);
                    K2 = u2.fileUploadPublishRetryLimit, F2 = false, H2 = { timetoken: "0" }, o2.label = 21;
                  case 21:
                    return o2.trys.push([21, 23, , 24]), [4, r2({ channel: s3, message: h2, fileId: _2, fileName: O2, meta: d2, storeInHistory: y2, ttl: g2 })];
                  case 22:
                    return H2 = o2.sent(), F2 = true, [3, 24];
                  case 23:
                    return o2.sent(), K2 -= 1, [3, 24];
                  case 24:
                    if (!F2 && K2 > 0)
                      return [3, 21];
                    o2.label = 25;
                  case 25:
                    if (F2)
                      return [2, { timetoken: H2.timetoken, id: _2, name: O2 }];
                    throw new L("Publish failed. You may want to execute that operation manually using pubnub.publishFile", { channel: s3, id: _2, name: O2 });
                }
                var q2;
              });
            });
          };
        }(e2);
        return function(e3, n2) {
          var r2 = t2(e3);
          return "function" == typeof n2 ? (r2.then(function(e4) {
            return n2(null, e4);
          }).catch(function(e4) {
            return n2(e4, null);
          }), r2) : r2;
        };
      }, ye = function(e2, t2) {
        var n2 = t2.channel, r2 = t2.id, i2 = t2.name, o2 = e2.config, s2 = e2.networking;
        if (!n2)
          throw new L("Validation failed, check status for details", B("channel can't be empty"));
        if (!r2)
          throw new L("Validation failed, check status for details", B("file id can't be empty"));
        if (!i2)
          throw new L("Validation failed, check status for details", B("file name can't be empty"));
        var a2 = "/v1/files/".concat(o2.subscribeKey, "/channels/").concat(E.encodeString(n2), "/files/").concat(r2, "/").concat(i2), u2 = {};
        u2.uuid = o2.getUUID(), u2.pnsdk = q(o2), o2.getAuthKey() && (u2.auth = o2.getAuthKey()), o2.secretKey && V(e2, a2, u2, {}, { getOperation: function() {
          return "PubNubGetFileUrlOperation";
        } });
        var c2 = Object.keys(u2).map(function(e3) {
          return "".concat(encodeURIComponent(e3), "=").concat(encodeURIComponent(u2[e3]));
        }).join("&");
        return "" !== c2 ? "".concat(s2.getStandardOrigin()).concat(a2, "?").concat(c2) : "".concat(s2.getStandardOrigin()).concat(a2);
      }, be = { getOperation: function() {
        return j.PNDownloadFileOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channel) ? (null == t2 ? void 0 : t2.name) ? (null == t2 ? void 0 : t2.id) ? void 0 : "id can't be empty" : "name can't be empty" : "channel can't be empty";
      }, useGetFile: function() {
        return true;
      }, getFileURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v1/files/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel), "/files/").concat(t2.id, "/").concat(t2.name);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, ignoreBody: function() {
        return true;
      }, forceBuffered: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2, n2) {
        var r2 = e2.PubNubFile, s2 = e2.config, a2 = e2.cryptography;
        return i(void 0, void 0, void 0, function() {
          var e3, i2, u2, c2;
          return o(this, function(o2) {
            switch (o2.label) {
              case 0:
                return e3 = t2.response.body, r2.supportsEncryptFile && (null !== (i2 = n2.cipherKey) && void 0 !== i2 ? i2 : s2.cipherKey) ? [4, a2.decrypt(null !== (u2 = n2.cipherKey) && void 0 !== u2 ? u2 : s2.cipherKey, e3)] : [3, 2];
              case 1:
                e3 = o2.sent(), o2.label = 2;
              case 2:
                return [2, r2.create({ data: e3, name: null !== (c2 = t2.response.name) && void 0 !== c2 ? c2 : n2.name, mimeType: t2.response.type })];
            }
          });
        });
      } }, ve = { getOperation: function() {
        return j.PNListFilesOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channel) ? (null == t2 ? void 0 : t2.id) ? (null == t2 ? void 0 : t2.name) ? void 0 : "file name can't be empty" : "file id can't be empty" : "channel can't be empty";
      }, useDelete: function() {
        return true;
      }, getURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v1/files/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel), "/files/").concat(t2.id, "/").concat(t2.name);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { status: t2.status };
      } }, me = { getOperation: function() {
        return j.PNGetAllUUIDMetadataOperation;
      }, validateParams: function() {
      }, getURL: function(e2) {
        var t2 = e2.config;
        return "/v2/objects/".concat(t2.subscribeKey, "/uuids");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, u2, c2, l2, p2, h2 = { include: ["status", "type"] };
        return (null == t2 ? void 0 : t2.include) && (null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && h2.include.push("custom"), h2.include = h2.include.join(","), (null === (r2 = null == t2 ? void 0 : t2.include) || void 0 === r2 ? void 0 : r2.totalCount) && (h2.count = null === (i2 = t2.include) || void 0 === i2 ? void 0 : i2.totalCount), (null === (o2 = null == t2 ? void 0 : t2.page) || void 0 === o2 ? void 0 : o2.next) && (h2.start = null === (s2 = t2.page) || void 0 === s2 ? void 0 : s2.next), (null === (u2 = null == t2 ? void 0 : t2.page) || void 0 === u2 ? void 0 : u2.prev) && (h2.end = null === (c2 = t2.page) || void 0 === c2 ? void 0 : c2.prev), (null == t2 ? void 0 : t2.filter) && (h2.filter = t2.filter), h2.limit = null !== (l2 = null == t2 ? void 0 : t2.limit) && void 0 !== l2 ? l2 : 100, (null == t2 ? void 0 : t2.sort) && (h2.sort = Object.entries(null !== (p2 = t2.sort) && void 0 !== p2 ? p2 : {}).map(function(e3) {
          var t3 = a(e3, 2), n3 = t3[0], r3 = t3[1];
          return "asc" === r3 || "desc" === r3 ? "".concat(n3, ":").concat(r3) : n3;
        })), h2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, totalCount: t2.totalCount, next: t2.next, prev: t2.prev };
      } }, _e = { getOperation: function() {
        return j.PNGetUUIDMetadataOperation;
      }, validateParams: function() {
      }, getURL: function(e2, t2) {
        var n2, r2 = e2.config;
        return "/v2/objects/".concat(r2.subscribeKey, "/uuids/").concat(E.encodeString(null !== (n2 = null == t2 ? void 0 : t2.uuid) && void 0 !== n2 ? n2 : r2.getUUID()));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2 = e2.config, o2 = {};
        return o2.uuid = null !== (n2 = null == t2 ? void 0 : t2.uuid) && void 0 !== n2 ? n2 : i2.getUUID(), o2.include = ["status", "type", "custom"], (null == t2 ? void 0 : t2.include) && false === (null === (r2 = t2.include) || void 0 === r2 ? void 0 : r2.customFields) && o2.include.pop(), o2.include = o2.include.join(","), o2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } }, Oe = { getOperation: function() {
        return j.PNSetUUIDMetadataOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.data))
          return "Data cannot be empty";
      }, usePatch: function() {
        return true;
      }, patchURL: function(e2, t2) {
        var n2, r2 = e2.config;
        return "/v2/objects/".concat(r2.subscribeKey, "/uuids/").concat(E.encodeString(null !== (n2 = t2.uuid) && void 0 !== n2 ? n2 : r2.getUUID()));
      }, patchPayload: function(e2, t2) {
        return t2.data;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2 = e2.config, o2 = {};
        return o2.uuid = null !== (n2 = null == t2 ? void 0 : t2.uuid) && void 0 !== n2 ? n2 : i2.getUUID(), o2.include = ["status", "type", "custom"], (null == t2 ? void 0 : t2.include) && false === (null === (r2 = t2.include) || void 0 === r2 ? void 0 : r2.customFields) && o2.include.pop(), o2.include = o2.include.join(","), o2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } }, Pe = { getOperation: function() {
        return j.PNRemoveUUIDMetadataOperation;
      }, validateParams: function() {
      }, getURL: function(e2, t2) {
        var n2, r2 = e2.config;
        return "/v2/objects/".concat(r2.subscribeKey, "/uuids/").concat(E.encodeString(null !== (n2 = null == t2 ? void 0 : t2.uuid) && void 0 !== n2 ? n2 : r2.getUUID()));
      }, useDelete: function() {
        return true;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2 = e2.config;
        return { uuid: null !== (n2 = null == t2 ? void 0 : t2.uuid) && void 0 !== n2 ? n2 : r2.getUUID() };
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } }, Se = { getOperation: function() {
        return j.PNGetAllChannelMetadataOperation;
      }, validateParams: function() {
      }, getURL: function(e2) {
        var t2 = e2.config;
        return "/v2/objects/".concat(t2.subscribeKey, "/channels");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, u2, c2, l2, p2, h2 = { include: ["status", "type"] };
        return (null == t2 ? void 0 : t2.include) && (null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && h2.include.push("custom"), h2.include = h2.include.join(","), (null === (r2 = null == t2 ? void 0 : t2.include) || void 0 === r2 ? void 0 : r2.totalCount) && (h2.count = null === (i2 = t2.include) || void 0 === i2 ? void 0 : i2.totalCount), (null === (o2 = null == t2 ? void 0 : t2.page) || void 0 === o2 ? void 0 : o2.next) && (h2.start = null === (s2 = t2.page) || void 0 === s2 ? void 0 : s2.next), (null === (u2 = null == t2 ? void 0 : t2.page) || void 0 === u2 ? void 0 : u2.prev) && (h2.end = null === (c2 = t2.page) || void 0 === c2 ? void 0 : c2.prev), (null == t2 ? void 0 : t2.filter) && (h2.filter = t2.filter), h2.limit = null !== (l2 = null == t2 ? void 0 : t2.limit) && void 0 !== l2 ? l2 : 100, (null == t2 ? void 0 : t2.sort) && (h2.sort = Object.entries(null !== (p2 = t2.sort) && void 0 !== p2 ? p2 : {}).map(function(e3) {
          var t3 = a(e3, 2), n3 = t3[0], r3 = t3[1];
          return "asc" === r3 || "desc" === r3 ? "".concat(n3, ":").concat(r3) : n3;
        })), h2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, totalCount: t2.totalCount, prev: t2.prev, next: t2.next };
      } }, we = { getOperation: function() {
        return j.PNGetChannelMetadataOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.channel))
          return "Channel cannot be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v2/objects/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2 = { include: ["status", "type", "custom"] };
        return (null == t2 ? void 0 : t2.include) && false === (null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && r2.include.pop(), r2.include = r2.include.join(","), r2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } }, Te = { getOperation: function() {
        return j.PNSetChannelMetadataOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channel) ? (null == t2 ? void 0 : t2.data) ? void 0 : "Data cannot be empty" : "Channel cannot be empty";
      }, usePatch: function() {
        return true;
      }, patchURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v2/objects/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel));
      }, patchPayload: function(e2, t2) {
        return t2.data;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2 = { include: ["status", "type", "custom"] };
        return (null == t2 ? void 0 : t2.include) && false === (null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && r2.include.pop(), r2.include = r2.include.join(","), r2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } }, ke = { getOperation: function() {
        return j.PNRemoveChannelMetadataOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.channel))
          return "Channel cannot be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v2/objects/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel));
      }, useDelete: function() {
        return true;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } }, Ne = { getOperation: function() {
        return j.PNGetMembersOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.channel))
          return "UUID cannot be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v2/objects/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel), "/uuids");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, u2, c2, l2, p2, h2, f2, d2, g2 = { include: ["uuid.status", "uuid.type", "type"] };
        return (null == t2 ? void 0 : t2.include) && ((null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && g2.include.push("custom"), (null === (r2 = t2.include) || void 0 === r2 ? void 0 : r2.customUUIDFields) && g2.include.push("uuid.custom"), (null === (o2 = null === (i2 = t2.include) || void 0 === i2 ? void 0 : i2.UUIDFields) || void 0 === o2 || o2) && g2.include.push("uuid")), g2.include = g2.include.join(","), (null === (s2 = null == t2 ? void 0 : t2.include) || void 0 === s2 ? void 0 : s2.totalCount) && (g2.count = null === (u2 = t2.include) || void 0 === u2 ? void 0 : u2.totalCount), (null === (c2 = null == t2 ? void 0 : t2.page) || void 0 === c2 ? void 0 : c2.next) && (g2.start = null === (l2 = t2.page) || void 0 === l2 ? void 0 : l2.next), (null === (p2 = null == t2 ? void 0 : t2.page) || void 0 === p2 ? void 0 : p2.prev) && (g2.end = null === (h2 = t2.page) || void 0 === h2 ? void 0 : h2.prev), (null == t2 ? void 0 : t2.filter) && (g2.filter = t2.filter), g2.limit = null !== (f2 = null == t2 ? void 0 : t2.limit) && void 0 !== f2 ? f2 : 100, (null == t2 ? void 0 : t2.sort) && (g2.sort = Object.entries(null !== (d2 = t2.sort) && void 0 !== d2 ? d2 : {}).map(function(e3) {
          var t3 = a(e3, 2), n3 = t3[0], r3 = t3[1];
          return "asc" === r3 || "desc" === r3 ? "".concat(n3, ":").concat(r3) : n3;
        })), g2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, totalCount: t2.totalCount, prev: t2.prev, next: t2.next };
      } }, Ce = { getOperation: function() {
        return j.PNSetMembersOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channel) ? (null == t2 ? void 0 : t2.uuids) && 0 !== (null == t2 ? void 0 : t2.uuids.length) ? void 0 : "UUIDs cannot be empty" : "Channel cannot be empty";
      }, usePatch: function() {
        return true;
      }, patchURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v2/objects/".concat(n2.subscribeKey, "/channels/").concat(E.encodeString(t2.channel), "/uuids");
      }, patchPayload: function(e2, t2) {
        var n2;
        return (n2 = { set: [], delete: [] })[t2.type] = t2.uuids.map(function(e3) {
          return "string" == typeof e3 ? { uuid: { id: e3 } } : { uuid: { id: e3.id }, custom: e3.custom, status: e3.status };
        }), n2;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, u2, c2, l2, p2, h2 = { include: ["uuid.status", "uuid.type", "type"] };
        return (null == t2 ? void 0 : t2.include) && ((null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && h2.include.push("custom"), (null === (r2 = t2.include) || void 0 === r2 ? void 0 : r2.customUUIDFields) && h2.include.push("uuid.custom"), (null === (i2 = t2.include) || void 0 === i2 ? void 0 : i2.UUIDFields) && h2.include.push("uuid")), h2.include = h2.include.join(","), (null === (o2 = null == t2 ? void 0 : t2.include) || void 0 === o2 ? void 0 : o2.totalCount) && (h2.count = true), (null === (s2 = null == t2 ? void 0 : t2.page) || void 0 === s2 ? void 0 : s2.next) && (h2.start = null === (u2 = t2.page) || void 0 === u2 ? void 0 : u2.next), (null === (c2 = null == t2 ? void 0 : t2.page) || void 0 === c2 ? void 0 : c2.prev) && (h2.end = null === (l2 = t2.page) || void 0 === l2 ? void 0 : l2.prev), (null == t2 ? void 0 : t2.filter) && (h2.filter = t2.filter), null != t2.limit && (h2.limit = t2.limit), (null == t2 ? void 0 : t2.sort) && (h2.sort = Object.entries(null !== (p2 = t2.sort) && void 0 !== p2 ? p2 : {}).map(function(e3) {
          var t3 = a(e3, 2), n3 = t3[0], r3 = t3[1];
          return "asc" === r3 || "desc" === r3 ? "".concat(n3, ":").concat(r3) : n3;
        })), h2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, totalCount: t2.totalCount, prev: t2.prev, next: t2.next };
      } }, Ee = { getOperation: function() {
        return j.PNGetMembershipsOperation;
      }, validateParams: function() {
      }, getURL: function(e2, t2) {
        var n2, r2 = e2.config;
        return "/v2/objects/".concat(r2.subscribeKey, "/uuids/").concat(E.encodeString(null !== (n2 = null == t2 ? void 0 : t2.uuid) && void 0 !== n2 ? n2 : r2.getUUID()), "/channels");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, u2, c2, l2, p2, h2, f2, d2 = { include: ["channel.status", "channel.type", "status"] };
        return (null == t2 ? void 0 : t2.include) && ((null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && d2.include.push("custom"), (null === (r2 = t2.include) || void 0 === r2 ? void 0 : r2.customChannelFields) && d2.include.push("channel.custom"), (null === (i2 = t2.include) || void 0 === i2 ? void 0 : i2.channelFields) && d2.include.push("channel")), d2.include = d2.include.join(","), (null === (o2 = null == t2 ? void 0 : t2.include) || void 0 === o2 ? void 0 : o2.totalCount) && (d2.count = null === (s2 = t2.include) || void 0 === s2 ? void 0 : s2.totalCount), (null === (u2 = null == t2 ? void 0 : t2.page) || void 0 === u2 ? void 0 : u2.next) && (d2.start = null === (c2 = t2.page) || void 0 === c2 ? void 0 : c2.next), (null === (l2 = null == t2 ? void 0 : t2.page) || void 0 === l2 ? void 0 : l2.prev) && (d2.end = null === (p2 = t2.page) || void 0 === p2 ? void 0 : p2.prev), (null == t2 ? void 0 : t2.filter) && (d2.filter = t2.filter), d2.limit = null !== (h2 = null == t2 ? void 0 : t2.limit) && void 0 !== h2 ? h2 : 100, (null == t2 ? void 0 : t2.sort) && (d2.sort = Object.entries(null !== (f2 = t2.sort) && void 0 !== f2 ? f2 : {}).map(function(e3) {
          var t3 = a(e3, 2), n3 = t3[0], r3 = t3[1];
          return "asc" === r3 || "desc" === r3 ? "".concat(n3, ":").concat(r3) : n3;
        })), d2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, totalCount: t2.totalCount, prev: t2.prev, next: t2.next };
      } }, Ae = { getOperation: function() {
        return j.PNSetMembershipsOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.channels) || 0 === (null == t2 ? void 0 : t2.channels.length))
          return "Channels cannot be empty";
      }, usePatch: function() {
        return true;
      }, patchURL: function(e2, t2) {
        var n2, r2 = e2.config;
        return "/v2/objects/".concat(r2.subscribeKey, "/uuids/").concat(E.encodeString(null !== (n2 = t2.uuid) && void 0 !== n2 ? n2 : r2.getUUID()), "/channels");
      }, patchPayload: function(e2, t2) {
        var n2;
        return (n2 = { set: [], delete: [] })[t2.type] = t2.channels.map(function(e3) {
          return "string" == typeof e3 ? { channel: { id: e3 } } : { channel: { id: e3.id }, custom: e3.custom, status: e3.status };
        }), n2;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, u2, c2, l2, p2, h2 = { include: ["channel.status", "channel.type", "status"] };
        return (null == t2 ? void 0 : t2.include) && ((null === (n2 = t2.include) || void 0 === n2 ? void 0 : n2.customFields) && h2.include.push("custom"), (null === (r2 = t2.include) || void 0 === r2 ? void 0 : r2.customChannelFields) && h2.include.push("channel.custom"), (null === (i2 = t2.include) || void 0 === i2 ? void 0 : i2.channelFields) && h2.include.push("channel")), h2.include = h2.include.join(","), (null === (o2 = null == t2 ? void 0 : t2.include) || void 0 === o2 ? void 0 : o2.totalCount) && (h2.count = true), (null === (s2 = null == t2 ? void 0 : t2.page) || void 0 === s2 ? void 0 : s2.next) && (h2.start = null === (u2 = t2.page) || void 0 === u2 ? void 0 : u2.next), (null === (c2 = null == t2 ? void 0 : t2.page) || void 0 === c2 ? void 0 : c2.prev) && (h2.end = null === (l2 = t2.page) || void 0 === l2 ? void 0 : l2.prev), (null == t2 ? void 0 : t2.filter) && (h2.filter = t2.filter), null != t2.limit && (h2.limit = t2.limit), (null == t2 ? void 0 : t2.sort) && (h2.sort = Object.entries(null !== (p2 = t2.sort) && void 0 !== p2 ? p2 : {}).map(function(e3) {
          var t3 = a(e3, 2), n3 = t3[0], r3 = t3[1];
          return "asc" === r3 || "desc" === r3 ? "".concat(n3, ":").concat(r3) : n3;
        })), h2;
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data, totalCount: t2.totalCount, prev: t2.prev, next: t2.next };
      } };
      var Me = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNAccessManagerAudit;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2) {
        var t2 = e2.config;
        return "/v2/auth/audit/sub-key/".concat(t2.subscribeKey);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return false;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channel, r2 = t2.channelGroup, i2 = t2.authKeys, o2 = void 0 === i2 ? [] : i2, s2 = {};
        return n2 && (s2.channel = n2), r2 && (s2["channel-group"] = r2), o2.length > 0 && (s2.auth = o2.join(",")), s2;
      }, handleResponse: function(e2, t2) {
        return t2.payload;
      } });
      var je = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNAccessManagerGrant;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config;
        return n2.subscribeKey ? n2.publishKey ? n2.secretKey ? null == t2.uuids || t2.authKeys ? null == t2.uuids || null == t2.channels && null == t2.channelGroups ? void 0 : "Both channel/channelgroup and uuid cannot be used in the same request" : "authKeys are required for grant request on uuids" : "Missing Secret Key" : "Missing Publish Key" : "Missing Subscribe Key";
      }, getURL: function(e2) {
        var t2 = e2.config;
        return "/v2/auth/grant/sub-key/".concat(t2.subscribeKey);
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return false;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channels, r2 = void 0 === n2 ? [] : n2, i2 = t2.channelGroups, o2 = void 0 === i2 ? [] : i2, s2 = t2.uuids, a2 = void 0 === s2 ? [] : s2, u2 = t2.ttl, c2 = t2.read, l2 = void 0 !== c2 && c2, p2 = t2.write, h2 = void 0 !== p2 && p2, f2 = t2.manage, d2 = void 0 !== f2 && f2, g2 = t2.get, y2 = void 0 !== g2 && g2, b2 = t2.join, v2 = void 0 !== b2 && b2, m2 = t2.update, _2 = void 0 !== m2 && m2, O2 = t2.authKeys, P2 = void 0 === O2 ? [] : O2, S2 = t2.delete, w2 = {};
        return w2.r = l2 ? "1" : "0", w2.w = h2 ? "1" : "0", w2.m = d2 ? "1" : "0", w2.d = S2 ? "1" : "0", w2.g = y2 ? "1" : "0", w2.j = v2 ? "1" : "0", w2.u = _2 ? "1" : "0", r2.length > 0 && (w2.channel = r2.join(",")), o2.length > 0 && (w2["channel-group"] = o2.join(",")), P2.length > 0 && (w2.auth = P2.join(",")), a2.length > 0 && (w2["target-uuid"] = a2.join(",")), (u2 || 0 === u2) && (w2.ttl = u2), w2;
      }, handleResponse: function() {
        return {};
      } });
      function Re(e2) {
        var t2, n2, r2, i2, o2 = void 0 !== (null == e2 ? void 0 : e2.authorizedUserId), s2 = void 0 !== (null === (t2 = null == e2 ? void 0 : e2.resources) || void 0 === t2 ? void 0 : t2.users), a2 = void 0 !== (null === (n2 = null == e2 ? void 0 : e2.resources) || void 0 === n2 ? void 0 : n2.spaces), u2 = void 0 !== (null === (r2 = null == e2 ? void 0 : e2.patterns) || void 0 === r2 ? void 0 : r2.users), c2 = void 0 !== (null === (i2 = null == e2 ? void 0 : e2.patterns) || void 0 === i2 ? void 0 : i2.spaces);
        return u2 || s2 || c2 || a2 || o2;
      }
      function Ue(e2) {
        var t2 = 0;
        return e2.join && (t2 |= 128), e2.update && (t2 |= 64), e2.get && (t2 |= 32), e2.delete && (t2 |= 8), e2.manage && (t2 |= 4), e2.write && (t2 |= 2), e2.read && (t2 |= 1), t2;
      }
      function xe(e2, t2) {
        if (Re(t2))
          return function(e3, t3) {
            var n3 = t3.ttl, r3 = t3.resources, i3 = t3.patterns, o3 = t3.meta, s3 = t3.authorizedUserId, a3 = { ttl: 0, permissions: { resources: { channels: {}, groups: {}, uuids: {}, users: {}, spaces: {} }, patterns: { channels: {}, groups: {}, uuids: {}, users: {}, spaces: {} }, meta: {} } };
            if (r3) {
              var u3 = r3.users, c3 = r3.spaces, l3 = r3.groups;
              u3 && Object.keys(u3).forEach(function(e4) {
                a3.permissions.resources.uuids[e4] = Ue(u3[e4]);
              }), c3 && Object.keys(c3).forEach(function(e4) {
                a3.permissions.resources.channels[e4] = Ue(c3[e4]);
              }), l3 && Object.keys(l3).forEach(function(e4) {
                a3.permissions.resources.groups[e4] = Ue(l3[e4]);
              });
            }
            if (i3) {
              var p3 = i3.users, h3 = i3.spaces, f3 = i3.groups;
              p3 && Object.keys(p3).forEach(function(e4) {
                a3.permissions.patterns.uuids[e4] = Ue(p3[e4]);
              }), h3 && Object.keys(h3).forEach(function(e4) {
                a3.permissions.patterns.channels[e4] = Ue(h3[e4]);
              }), f3 && Object.keys(f3).forEach(function(e4) {
                a3.permissions.patterns.groups[e4] = Ue(f3[e4]);
              });
            }
            return (n3 || 0 === n3) && (a3.ttl = n3), o3 && (a3.permissions.meta = o3), s3 && (a3.permissions.uuid = "".concat(s3)), a3;
          }(0, t2);
        var n2 = t2.ttl, r2 = t2.resources, i2 = t2.patterns, o2 = t2.meta, s2 = t2.authorized_uuid, a2 = { ttl: 0, permissions: { resources: { channels: {}, groups: {}, uuids: {}, users: {}, spaces: {} }, patterns: { channels: {}, groups: {}, uuids: {}, users: {}, spaces: {} }, meta: {} } };
        if (r2) {
          var u2 = r2.uuids, c2 = r2.channels, l2 = r2.groups;
          u2 && Object.keys(u2).forEach(function(e3) {
            a2.permissions.resources.uuids[e3] = Ue(u2[e3]);
          }), c2 && Object.keys(c2).forEach(function(e3) {
            a2.permissions.resources.channels[e3] = Ue(c2[e3]);
          }), l2 && Object.keys(l2).forEach(function(e3) {
            a2.permissions.resources.groups[e3] = Ue(l2[e3]);
          });
        }
        if (i2) {
          var p2 = i2.uuids, h2 = i2.channels, f2 = i2.groups;
          p2 && Object.keys(p2).forEach(function(e3) {
            a2.permissions.patterns.uuids[e3] = Ue(p2[e3]);
          }), h2 && Object.keys(h2).forEach(function(e3) {
            a2.permissions.patterns.channels[e3] = Ue(h2[e3]);
          }), f2 && Object.keys(f2).forEach(function(e3) {
            a2.permissions.patterns.groups[e3] = Ue(f2[e3]);
          });
        }
        return (n2 || 0 === n2) && (a2.ttl = n2), o2 && (a2.permissions.meta = o2), s2 && (a2.permissions.uuid = "".concat(s2)), a2;
      }
      var Ie = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNAccessManagerGrantToken;
      }, extractPermissions: Ue, validateParams: function(e2, t2) {
        var n2, r2, i2, o2, s2, a2, u2 = e2.config;
        if (!u2.subscribeKey)
          return "Missing Subscribe Key";
        if (!u2.publishKey)
          return "Missing Publish Key";
        if (!u2.secretKey)
          return "Missing Secret Key";
        if (!t2.resources && !t2.patterns)
          return "Missing either Resources or Patterns.";
        var c2 = void 0 !== (null == t2 ? void 0 : t2.authorized_uuid), l2 = void 0 !== (null === (n2 = null == t2 ? void 0 : t2.resources) || void 0 === n2 ? void 0 : n2.uuids), p2 = void 0 !== (null === (r2 = null == t2 ? void 0 : t2.resources) || void 0 === r2 ? void 0 : r2.channels), h2 = void 0 !== (null === (i2 = null == t2 ? void 0 : t2.resources) || void 0 === i2 ? void 0 : i2.groups), f2 = void 0 !== (null === (o2 = null == t2 ? void 0 : t2.patterns) || void 0 === o2 ? void 0 : o2.uuids), d2 = void 0 !== (null === (s2 = null == t2 ? void 0 : t2.patterns) || void 0 === s2 ? void 0 : s2.channels), g2 = void 0 !== (null === (a2 = null == t2 ? void 0 : t2.patterns) || void 0 === a2 ? void 0 : a2.groups), y2 = c2 || l2 || f2 || p2 || d2 || h2 || g2;
        return Re(t2) && y2 ? "Cannot mix `users`, `spaces` and `authorizedUserId` with `uuids`, `channels`, `groups` and `authorized_uuid`" : (!t2.resources || t2.resources.uuids && 0 !== Object.keys(t2.resources.uuids).length || t2.resources.channels && 0 !== Object.keys(t2.resources.channels).length || t2.resources.groups && 0 !== Object.keys(t2.resources.groups).length || t2.resources.users && 0 !== Object.keys(t2.resources.users).length || t2.resources.spaces && 0 !== Object.keys(t2.resources.spaces).length) && (!t2.patterns || t2.patterns.uuids && 0 !== Object.keys(t2.patterns.uuids).length || t2.patterns.channels && 0 !== Object.keys(t2.patterns.channels).length || t2.patterns.groups && 0 !== Object.keys(t2.patterns.groups).length || t2.patterns.users && 0 !== Object.keys(t2.patterns.users).length || t2.patterns.spaces && 0 !== Object.keys(t2.patterns.spaces).length) ? void 0 : "Missing values for either Resources or Patterns.";
      }, postURL: function(e2) {
        var t2 = e2.config;
        return "/v3/pam/".concat(t2.subscribeKey, "/grant");
      }, usePost: function() {
        return true;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return false;
      }, prepareParams: function() {
        return {};
      }, postPayload: function(e2, t2) {
        return xe(0, t2);
      }, handleResponse: function(e2, t2) {
        return t2.data.token;
      } }), De = { getOperation: function() {
        return j.PNAccessManagerRevokeToken;
      }, validateParams: function(e2, t2) {
        return e2.config.secretKey ? t2 ? void 0 : "token can't be empty" : "Missing Secret Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config;
        return "/v3/pam/".concat(n2.subscribeKey, "/grant/").concat(E.encodeString(t2));
      }, useDelete: function() {
        return true;
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return false;
      }, prepareParams: function(e2) {
        return { uuid: e2.config.getUUID() };
      }, handleResponse: function(e2, t2) {
        return { status: t2.status, data: t2.data };
      } };
      function Ge(e2, t2) {
        var n2 = e2.crypto, r2 = e2.config, i2 = JSON.stringify(t2);
        return r2.cipherKey && (i2 = n2.encrypt(i2), i2 = JSON.stringify(i2)), i2;
      }
      var Ke = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNPublishOperation;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.message;
        return t2.channel ? r2 ? n2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Message" : "Missing Channel";
      }, usePost: function(e2, t2) {
        var n2 = t2.sendByPost;
        return void 0 !== n2 && n2;
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel, i2 = Ge(e2, t2.message);
        return "/publish/".concat(n2.publishKey, "/").concat(n2.subscribeKey, "/0/").concat(E.encodeString(r2), "/0/").concat(E.encodeString(i2));
      }, postURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channel;
        return "/publish/".concat(n2.publishKey, "/").concat(n2.subscribeKey, "/0/").concat(E.encodeString(r2), "/0");
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, postPayload: function(e2, t2) {
        return Ge(e2, t2.message);
      }, prepareParams: function(e2, t2) {
        var n2 = t2.meta, r2 = t2.replicate, i2 = void 0 === r2 || r2, o2 = t2.storeInHistory, s2 = t2.ttl, a2 = {};
        return null != o2 && (a2.store = o2 ? "1" : "0"), s2 && (a2.ttl = s2), false === i2 && (a2.norep = "true"), n2 && "object" == typeof n2 && (a2.meta = JSON.stringify(n2)), a2;
      }, handleResponse: function(e2, t2) {
        return { timetoken: t2[2] };
      } });
      var Fe = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNSignalOperation;
      }, validateParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.message;
        return t2.channel ? r2 ? n2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing Message" : "Missing Channel";
      }, getURL: function(e2, t2) {
        var n2, r2 = e2.config, i2 = t2.channel, o2 = t2.message, s2 = (n2 = o2, JSON.stringify(n2));
        return "/signal/".concat(r2.publishKey, "/").concat(r2.subscribeKey, "/0/").concat(E.encodeString(i2), "/0/").concat(E.encodeString(s2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function() {
        return {};
      }, handleResponse: function(e2, t2) {
        return { timetoken: t2[2] };
      } });
      function Le(e2, t2) {
        var n2 = e2.config, r2 = e2.crypto;
        if (!n2.cipherKey)
          return t2;
        try {
          return r2.decrypt(t2);
        } catch (e3) {
          return t2;
        }
      }
      var Be = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNHistoryOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channel, r2 = e2.config;
        return n2 ? r2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing channel";
      }, getURL: function(e2, t2) {
        var n2 = t2.channel, r2 = e2.config;
        return "/v2/history/sub-key/".concat(r2.subscribeKey, "/channel/").concat(E.encodeString(n2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.start, r2 = t2.end, i2 = t2.reverse, o2 = t2.count, s2 = void 0 === o2 ? 100 : o2, a2 = t2.stringifiedTimeToken, u2 = void 0 !== a2 && a2, c2 = t2.includeMeta, l2 = void 0 !== c2 && c2, p2 = { include_token: "true" };
        return p2.count = s2, n2 && (p2.start = n2), r2 && (p2.end = r2), u2 && (p2.string_message_token = "true"), null != i2 && (p2.reverse = i2.toString()), l2 && (p2.include_meta = "true"), p2;
      }, handleResponse: function(e2, t2) {
        var n2 = { messages: [], startTimeToken: t2[1], endTimeToken: t2[2] };
        return Array.isArray(t2[0]) && t2[0].forEach(function(t3) {
          var r2 = { timetoken: t3.timetoken, entry: Le(e2, t3.message) };
          t3.meta && (r2.meta = t3.meta), n2.messages.push(r2);
        }), n2;
      } });
      var He = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNDeleteMessagesOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channel, r2 = e2.config;
        return n2 ? r2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing channel";
      }, useDelete: function() {
        return true;
      }, getURL: function(e2, t2) {
        var n2 = t2.channel, r2 = e2.config;
        return "/v3/history/sub-key/".concat(r2.subscribeKey, "/channel/").concat(E.encodeString(n2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.start, r2 = t2.end, i2 = {};
        return n2 && (i2.start = n2), r2 && (i2.end = r2), i2;
      }, handleResponse: function(e2, t2) {
        return t2.payload;
      } });
      var qe = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNMessageCounts;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channels, r2 = t2.timetoken, i2 = t2.channelTimetokens, o2 = e2.config;
        return n2 ? r2 && i2 ? "timetoken and channelTimetokens are incompatible together" : r2 && i2 && i2.length > 1 && n2.length !== i2.length ? "Length of channelTimetokens and channels do not match" : o2.subscribeKey ? void 0 : "Missing Subscribe Key" : "Missing channel";
      }, getURL: function(e2, t2) {
        var n2 = t2.channels, r2 = e2.config, i2 = n2.join(",");
        return "/v3/history/sub-key/".concat(r2.subscribeKey, "/message-counts/").concat(E.encodeString(i2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.timetoken, r2 = t2.channelTimetokens, i2 = {};
        if (r2 && 1 === r2.length) {
          var o2 = a(r2, 1)[0];
          i2.timetoken = o2;
        } else
          r2 ? i2.channelsTimetoken = r2.join(",") : n2 && (i2.timetoken = n2);
        return i2;
      }, handleResponse: function(e2, t2) {
        return { channels: t2.channels };
      } });
      var ze = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNFetchMessagesOperation;
      }, validateParams: function(e2, t2) {
        var n2 = t2.channels, r2 = t2.includeMessageActions, i2 = void 0 !== r2 && r2, o2 = e2.config;
        if (!n2 || 0 === n2.length)
          return "Missing channels";
        if (!o2.subscribeKey)
          return "Missing Subscribe Key";
        if (i2 && n2.length > 1)
          throw new TypeError("History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.");
      }, getURL: function(e2, t2) {
        var n2 = t2.channels, r2 = void 0 === n2 ? [] : n2, i2 = t2.includeMessageActions, o2 = void 0 !== i2 && i2, s2 = e2.config, a2 = o2 ? "history-with-actions" : "history", u2 = r2.length > 0 ? r2.join(",") : ",";
        return "/v3/".concat(a2, "/sub-key/").concat(s2.subscribeKey, "/channel/").concat(E.encodeString(u2));
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = t2.channels, r2 = t2.start, i2 = t2.end, o2 = t2.includeMessageActions, s2 = t2.count, a2 = t2.stringifiedTimeToken, u2 = void 0 !== a2 && a2, c2 = t2.includeMeta, l2 = void 0 !== c2 && c2, p2 = t2.includeUuid, h2 = t2.includeUUID, f2 = void 0 === h2 || h2, d2 = t2.includeMessageType, g2 = void 0 === d2 || d2, y2 = {};
        return y2.max = s2 || (n2.length > 1 || true === o2 ? 25 : 100), r2 && (y2.start = r2), i2 && (y2.end = i2), u2 && (y2.string_message_token = "true"), l2 && (y2.include_meta = "true"), f2 && false !== p2 && (y2.include_uuid = "true"), g2 && (y2.include_message_type = "true"), y2;
      }, handleResponse: function(e2, t2) {
        var n2 = { channels: {} };
        return Object.keys(t2.channels || {}).forEach(function(r2) {
          n2.channels[r2] = [], (t2.channels[r2] || []).forEach(function(t3) {
            var i2 = {};
            i2.channel = r2, i2.timetoken = t3.timetoken, i2.message = function(e3, t4) {
              var n3 = e3.config, r3 = e3.crypto;
              if (!n3.cipherKey)
                return t4;
              try {
                return r3.decrypt(t4);
              } catch (e4) {
                return t4;
              }
            }(e2, t3.message), i2.messageType = t3.message_type, i2.uuid = t3.uuid, t3.actions && (i2.actions = t3.actions, i2.data = t3.actions), t3.meta && (i2.meta = t3.meta), n2.channels[r2].push(i2);
          });
        }), t2.more && (n2.more = t2.more), n2;
      } });
      var Ve = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNTimeOperation;
      }, getURL: function() {
        return "/time/0";
      }, getRequestTimeout: function(e2) {
        return e2.config.getTransactionTimeout();
      }, prepareParams: function() {
        return {};
      }, isAuthSupported: function() {
        return false;
      }, handleResponse: function(e2, t2) {
        return { timetoken: t2[0] };
      }, validateParams: function() {
      } });
      var Je = Object.freeze({ __proto__: null, getOperation: function() {
        return j.PNSubscribeOperation;
      }, validateParams: function(e2) {
        if (!e2.config.subscribeKey)
          return "Missing Subscribe Key";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels, i2 = void 0 === r2 ? [] : r2, o2 = i2.length > 0 ? i2.join(",") : ",";
        return "/v2/subscribe/".concat(n2.subscribeKey, "/").concat(E.encodeString(o2), "/0");
      }, getRequestTimeout: function(e2) {
        return e2.config.getSubscribeTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = e2.config, r2 = t2.state, i2 = t2.channelGroups, o2 = void 0 === i2 ? [] : i2, s2 = t2.timetoken, a2 = t2.filterExpression, u2 = t2.region, c2 = { heartbeat: n2.getPresenceTimeout() };
        return o2.length > 0 && (c2["channel-group"] = o2.join(",")), a2 && a2.length > 0 && (c2["filter-expr"] = a2), Object.keys(r2).length && (c2.state = JSON.stringify(r2)), s2 && (c2.tt = s2), u2 && (c2.tr = u2), c2;
      }, handleResponse: function(e2, t2) {
        var n2 = [];
        t2.m.forEach(function(e3) {
          var t3 = { publishTimetoken: e3.p.t, region: e3.p.r }, r3 = { shard: parseInt(e3.a, 10), subscriptionMatch: e3.b, channel: e3.c, messageType: e3.e, payload: e3.d, flags: e3.f, issuingClientId: e3.i, subscribeKey: e3.k, originationTimetoken: e3.o, userMetadata: e3.u, publishMetaData: t3 };
          n2.push(r3);
        });
        var r2 = { timetoken: t2.t.t, region: t2.t.r };
        return { messages: n2, metadata: r2 };
      } }), We = { getOperation: function() {
        return j.PNHandshakeOperation;
      }, validateParams: function(e2, t2) {
        if (!(null == t2 ? void 0 : t2.channels) && !(null == t2 ? void 0 : t2.channelGroups))
          return "channels and channleGroups both should not be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels ? t2.channels.join(",") : ",";
        return "/v2/subscribe/".concat(n2.subscribeKey, "/").concat(E.encodeString(r2), "/0");
      }, getRequestTimeout: function(e2) {
        return e2.config.getSubscribeTimeout();
      }, isAuthSupported: function() {
        return true;
      }, prepareParams: function(e2, t2) {
        var n2 = {};
        return t2.channelGroups && t2.channelGroups.length > 0 && (n2["channel-group"] = t2.channelGroups.join(",")), n2.tt = 0, n2;
      }, handleResponse: function(e2, t2) {
        return { region: t2.t.r, timetoken: t2.t.t };
      } }, Xe = { getOperation: function() {
        return j.PNReceiveMessagesOperation;
      }, validateParams: function(e2, t2) {
        return (null == t2 ? void 0 : t2.channels) || (null == t2 ? void 0 : t2.channelGroups) ? (null == t2 ? void 0 : t2.timetoken) ? (null == t2 ? void 0 : t2.region) ? void 0 : "region can not be empty" : "timetoken can not be empty" : "channels and channleGroups both should not be empty";
      }, getURL: function(e2, t2) {
        var n2 = e2.config, r2 = t2.channels ? t2.channels.join(",") : ",";
        return "/v2/subscribe/".concat(n2.subscribeKey, "/").concat(E.encodeString(r2), "/0");
      }, getRequestTimeout: function(e2) {
        return e2.config.getSubscribeTimeout();
      }, isAuthSupported: function() {
        return true;
      }, getAbortSignal: function(e2, t2) {
        return t2.abortSignal;
      }, prepareParams: function(e2, t2) {
        var n2 = {};
        return t2.channelGroups && t2.channelGroups.length > 0 && (n2["channel-group"] = t2.channelGroups.join(",")), n2.tt = t2.timetoken, n2.tr = t2.region, n2;
      }, handleResponse: function(e2, t2) {
        var n2 = [];
        return t2.m.forEach(function(e3) {
          var t3 = { shard: parseInt(e3.a, 10), subscriptionMatch: e3.b, channel: e3.c, messageType: e3.e, payload: e3.d, flags: e3.f, issuingClientId: e3.i, subscribeKey: e3.k, originationTimetoken: e3.o, publishMetaData: { timetoken: e3.p.t, region: e3.p.r } };
          n2.push(t3);
        }), { messages: n2, metadata: { region: t2.t.r, timetoken: t2.t.t } };
      } }, $e = function() {
        function e2(e3) {
          void 0 === e3 && (e3 = false), this.sync = e3, this.listeners = /* @__PURE__ */ new Set();
        }
        return e2.prototype.subscribe = function(e3) {
          var t2 = this;
          return this.listeners.add(e3), function() {
            t2.listeners.delete(e3);
          };
        }, e2.prototype.notify = function(e3) {
          var t2 = this, n2 = function() {
            t2.listeners.forEach(function(t3) {
              t3(e3);
            });
          };
          this.sync ? n2() : setTimeout(n2, 0);
        }, e2;
      }(), Qe = function() {
        function e2(e3) {
          this.label = e3, this.transitionMap = /* @__PURE__ */ new Map(), this.enterEffects = [], this.exitEffects = [];
        }
        return e2.prototype.transition = function(e3, t2) {
          var n2;
          if (this.transitionMap.has(t2.type))
            return null === (n2 = this.transitionMap.get(t2.type)) || void 0 === n2 ? void 0 : n2(e3, t2);
        }, e2.prototype.on = function(e3, t2) {
          return this.transitionMap.set(e3, t2), this;
        }, e2.prototype.with = function(e3, t2) {
          return [this, e3, null != t2 ? t2 : []];
        }, e2.prototype.onEnter = function(e3) {
          return this.enterEffects.push(e3), this;
        }, e2.prototype.onExit = function(e3) {
          return this.exitEffects.push(e3), this;
        }, e2;
      }(), Ye = function(e2) {
        function n2() {
          return null !== e2 && e2.apply(this, arguments) || this;
        }
        return t(n2, e2), n2.prototype.describe = function(e3) {
          return new Qe(e3);
        }, n2.prototype.start = function(e3, t2) {
          this.currentState = e3, this.currentContext = t2, this.notify({ type: "engineStarted", state: e3, context: t2 });
        }, n2.prototype.transition = function(e3) {
          var t2, n3, r2, i2, o2, u2;
          if (!this.currentState)
            throw new Error("Start the engine first");
          this.notify({ type: "eventReceived", event: e3 });
          var c2 = this.currentState.transition(this.currentContext, e3);
          if (c2) {
            var l2 = a(c2, 3), p2 = l2[0], h2 = l2[1], f2 = l2[2];
            try {
              for (var d2 = s(this.currentState.exitEffects), g2 = d2.next(); !g2.done; g2 = d2.next()) {
                var y2 = g2.value;
                this.notify({ type: "invocationDispatched", invocation: y2(this.currentContext) });
              }
            } catch (e4) {
              t2 = { error: e4 };
            } finally {
              try {
                g2 && !g2.done && (n3 = d2.return) && n3.call(d2);
              } finally {
                if (t2)
                  throw t2.error;
              }
            }
            var b2 = this.currentState;
            this.currentState = p2;
            var v2 = this.currentContext;
            this.currentContext = h2, this.notify({ type: "transitionDone", fromState: b2, fromContext: v2, toState: p2, toContext: h2, event: e3 });
            try {
              for (var m2 = s(f2), _2 = m2.next(); !_2.done; _2 = m2.next()) {
                y2 = _2.value;
                this.notify({ type: "invocationDispatched", invocation: y2 });
              }
            } catch (e4) {
              r2 = { error: e4 };
            } finally {
              try {
                _2 && !_2.done && (i2 = m2.return) && i2.call(m2);
              } finally {
                if (r2)
                  throw r2.error;
              }
            }
            try {
              for (var O2 = s(this.currentState.enterEffects), P2 = O2.next(); !P2.done; P2 = O2.next()) {
                y2 = P2.value;
                this.notify({ type: "invocationDispatched", invocation: y2(this.currentContext) });
              }
            } catch (e4) {
              o2 = { error: e4 };
            } finally {
              try {
                P2 && !P2.done && (u2 = O2.return) && u2.call(O2);
              } finally {
                if (o2)
                  throw o2.error;
              }
            }
          }
        }, n2;
      }($e), Ze = function() {
        function e2(e3) {
          this.dependencies = e3, this.instances = /* @__PURE__ */ new Map(), this.handlers = /* @__PURE__ */ new Map();
        }
        return e2.prototype.on = function(e3, t2) {
          this.handlers.set(e3, t2);
        }, e2.prototype.dispatch = function(e3) {
          if ("CANCEL" !== e3.type) {
            var t2 = this.handlers.get(e3.type);
            if (!t2)
              throw new Error("Unhandled invocation '".concat(e3.type, "'"));
            var n2 = t2(e3.payload, this.dependencies);
            e3.managed && this.instances.set(e3.type, n2), n2.start();
          } else if (this.instances.has(e3.payload)) {
            var r2 = this.instances.get(e3.payload);
            null == r2 || r2.cancel(), this.instances.delete(e3.payload);
          }
        }, e2;
      }();
      function et(e2, t2) {
        var n2 = function() {
          for (var n3 = [], r2 = 0; r2 < arguments.length; r2++)
            n3[r2] = arguments[r2];
          return { type: e2, payload: null == t2 ? void 0 : t2.apply(void 0, u([], a(n3), false)) };
        };
        return n2.type = e2, n2;
      }
      function tt(e2, t2) {
        var n2 = function() {
          for (var n3 = [], r2 = 0; r2 < arguments.length; r2++)
            n3[r2] = arguments[r2];
          return { type: e2, payload: t2.apply(void 0, u([], a(n3), false)), managed: true };
        };
        return n2.type = e2, n2.cancel = { type: "CANCEL", payload: e2, managed: false }, n2;
      }
      var nt, rt, it, ot = function(e2) {
        function n2() {
          var t2 = this.constructor, n3 = e2.call(this, "The operation was aborted.") || this;
          return n3.name = "AbortError", Object.setPrototypeOf(n3, t2.prototype), n3;
        }
        return t(n2, e2), n2;
      }(Error), st = function(e2) {
        function n2() {
          var t2 = null !== e2 && e2.apply(this, arguments) || this;
          return t2._aborted = false, t2;
        }
        return t(n2, e2), Object.defineProperty(n2.prototype, "aborted", { get: function() {
          return this._aborted;
        }, enumerable: false, configurable: true }), n2.prototype.throwIfAborted = function() {
          if (this._aborted)
            throw new ot();
        }, n2.prototype.abort = function() {
          this._aborted = true, this.notify(new ot());
        }, n2;
      }($e), at = function(e2) {
        function n2(t2, n3, r2) {
          var i2 = e2.call(this, t2, n3) || this;
          return i2.asyncFunction = r2, i2.abortSignal = new st(), i2;
        }
        return t(n2, e2), n2.prototype.start = function() {
          this.asyncFunction(this.payload, this.abortSignal, this.dependencies);
        }, n2.prototype.cancel = function() {
          this.abortSignal.abort();
        }, n2;
      }(function(e2, t2) {
        this.payload = e2, this.dependencies = t2;
      }), ut = function(e2) {
        return function(t2, n2) {
          return new at(t2, n2, e2);
        };
      }, ct = tt("HANDSHAKE", function(e2, t2) {
        return { channels: e2, groups: t2 };
      }), lt = tt("RECEIVE_EVENTS", function(e2, t2, n2) {
        return { channels: e2, groups: t2, cursor: n2 };
      }), pt = (rt = function(e2) {
        return e2;
      }, it = function() {
        for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
          e2[t2] = arguments[t2];
        return { type: nt, payload: rt.apply(void 0, u([], a(e2), false)), managed: false };
      }, it.type = nt = "EMIT_EVENTS", it), ht = tt("RECONNECT", function(e2) {
        return e2;
      }), ft = tt("HANDSHAKE_RECONNECT", function(e2) {
        return e2;
      }), dt = et("SUBSCRIPTION_CHANGE", function(e2, t2) {
        return { channels: e2, groups: t2 };
      }), gt = et("DISCONNECT", function() {
        return {};
      }), yt = et("RECONNECT", function() {
        return {};
      });
      et("RESTORE", function(e2, t2, n2, r2) {
        return { channels: e2, groups: t2, timetoken: n2, region: r2 };
      });
      var bt = et("HANDSHAKING_SUCCESS", function(e2) {
        return e2;
      }), vt = et("HANDSHAKING_FAILURE", function(e2) {
        return e2;
      }), mt = et("HANDSHAKING_RECONNECTING_SUCCESS", function(e2) {
        return { cursor: e2 };
      }), _t = et("HANDSHAKING_RECONNECTING_FAILURE", function(e2) {
        return e2;
      }), Ot = et("HANDSHAKING_RECONNECTING_GIVEUP", function() {
        return {};
      }), Pt = et("HANDSHAKING_RECONNECTING_RETRY", function() {
        return {};
      }), St = et("RECEIVING_SUCCESS", function(e2, t2) {
        return { cursor: e2, events: t2 };
      }), wt = et("RECEIVING_FAILURE", function(e2) {
        return e2;
      }), Tt = et("RECONNECTING_SUCCESS", function(e2, t2) {
        return { cursor: e2, events: t2 };
      }), kt = et("RECONNECTING_FAILURE", function(e2) {
        return e2;
      }), Nt = et("RECONNECTING_GIVEUP", function() {
        return {};
      }), Ct = et("RECONNECTING_RETRY", function() {
        return {};
      }), Et = function(e2) {
        function n2(t2, n3) {
          var r2 = e2.call(this, n3) || this;
          return r2.on(ct.type, ut(function(e3, n4, s2) {
            var a2 = s2.handshake;
            return i(r2, void 0, void 0, function() {
              var r3, i2;
              return o(this, function(o2) {
                switch (o2.label) {
                  case 0:
                    n4.throwIfAborted(), o2.label = 1;
                  case 1:
                    return o2.trys.push([1, 3, , 4]), [4, a2({ abortSignal: n4, channels: e3.channels, channelGroups: e3.groups })];
                  case 2:
                    return r3 = o2.sent(), t2.transition(bt(r3)), [3, 4];
                  case 3:
                    return (i2 = o2.sent()) instanceof Error && "Aborted" === i2.message ? [2] : i2 instanceof L ? [2, t2.transition(vt(i2))] : [3, 4];
                  case 4:
                    return [2];
                }
              });
            });
          })), r2.on(lt.type, ut(function(e3, n4, s2) {
            var a2 = s2.receiveEvents;
            return i(r2, void 0, void 0, function() {
              var r3, i2;
              return o(this, function(o2) {
                switch (o2.label) {
                  case 0:
                    n4.throwIfAborted(), o2.label = 1;
                  case 1:
                    return o2.trys.push([1, 3, , 4]), [4, a2({ abortSignal: n4, channels: e3.channels, channelGroups: e3.groups, timetoken: e3.cursor.timetoken, region: e3.cursor.region })];
                  case 2:
                    return r3 = o2.sent(), t2.transition(St(r3.metadata, r3.messages)), [3, 4];
                  case 3:
                    return (i2 = o2.sent()) instanceof Error && "Aborted" === i2.message ? [2] : i2 instanceof L ? [2, t2.transition(wt(i2))] : [3, 4];
                  case 4:
                    return [2];
                }
              });
            });
          })), r2.on(pt.type, ut(function(e3, t3, n4) {
            return n4.receiveEvents, i(r2, void 0, void 0, function() {
              return o(this, function(t4) {
                return e3.length > 0 && console.log(e3), [2];
              });
            });
          })), r2.on(ht.type, ut(function(e3, n4, s2) {
            var a2 = s2.receiveEvents, u2 = s2.shouldRetry, c2 = s2.getRetryDelay, l2 = s2.delay;
            return i(r2, void 0, void 0, function() {
              var r3, i2;
              return o(this, function(o2) {
                switch (o2.label) {
                  case 0:
                    return u2(e3.reason, e3.attempts) ? (n4.throwIfAborted(), [4, l2(c2(e3.attempts))]) : [2, t2.transition(Nt())];
                  case 1:
                    o2.sent(), n4.throwIfAborted(), o2.label = 2;
                  case 2:
                    return o2.trys.push([2, 4, , 5]), [4, a2({ abortSignal: n4, channels: e3.channels, channelGroups: e3.groups, timetoken: e3.cursor.timetoken, region: e3.cursor.region })];
                  case 3:
                    return r3 = o2.sent(), [2, t2.transition(Tt(r3.metadata, r3.messages))];
                  case 4:
                    return (i2 = o2.sent()) instanceof Error && "Aborted" === i2.message ? [2] : i2 instanceof L ? [2, t2.transition(kt(i2))] : [3, 5];
                  case 5:
                    return [2];
                }
              });
            });
          })), r2.on(ft.type, ut(function(e3, n4, s2) {
            var a2 = s2.handshake, u2 = s2.shouldRetry, c2 = s2.getRetryDelay, l2 = s2.delay;
            return i(r2, void 0, void 0, function() {
              var r3, i2;
              return o(this, function(o2) {
                switch (o2.label) {
                  case 0:
                    return u2(e3.reason, e3.attempts) ? (n4.throwIfAborted(), [4, l2(c2(e3.attempts))]) : [2, t2.transition(Ot())];
                  case 1:
                    o2.sent(), n4.throwIfAborted(), o2.label = 2;
                  case 2:
                    return o2.trys.push([2, 4, , 5]), [4, a2({ abortSignal: n4, channels: e3.channels, channelGroups: e3.groups })];
                  case 3:
                    return r3 = o2.sent(), [2, t2.transition(mt(r3.metadata))];
                  case 4:
                    return (i2 = o2.sent()) instanceof Error && "Aborted" === i2.message ? [2] : i2 instanceof L ? [2, t2.transition(_t(i2))] : [3, 5];
                  case 5:
                    return [2];
                }
              });
            });
          })), r2;
        }
        return t(n2, e2), n2;
      }(Ze), At = new Qe("STOPPED");
      At.on(dt.type, function(e2, t2) {
        return At.with({ channels: t2.payload.channels, groups: t2.payload.groups });
      }), At.on(yt.type, function(e2) {
        return Dt.with(n({}, e2));
      });
      var Mt = new Qe("HANDSHAKE_FAILURE");
      Mt.on(Pt.type, function(e2) {
        return It.with(n(n({}, e2), { attempts: 0 }));
      }), Mt.on(gt.type, function(e2) {
        return At.with({ channels: e2.channels, groups: e2.groups });
      });
      var jt = new Qe("STOPPED");
      jt.on(dt.type, function(e2, t2) {
        return jt.with({ channels: t2.payload.channels, groups: t2.payload.groups, cursor: e2.cursor });
      }), jt.on(yt.type, function(e2) {
        return xt.with(n({}, e2));
      });
      var Rt = new Qe("RECEIVE_FAILURE");
      Rt.on(Ct.type, function(e2) {
        return Ut.with(n(n({}, e2), { attempts: 0 }));
      }), Rt.on(gt.type, function(e2) {
        return jt.with({ channels: e2.channels, groups: e2.groups, cursor: e2.cursor });
      });
      var Ut = new Qe("RECEIVE_RECONNECTING");
      Ut.onEnter(function(e2) {
        return ht(e2);
      }), Ut.onExit(function() {
        return ht.cancel;
      }), Ut.on(Tt.type, function(e2, t2) {
        return xt.with({ channels: e2.channels, groups: e2.groups, cursor: t2.payload.cursor }, [pt(t2.payload.events)]);
      }), Ut.on(kt.type, function(e2, t2) {
        return Ut.with(n(n({}, e2), { attempts: e2.attempts + 1, reason: t2.payload }));
      }), Ut.on(Nt.type, function(e2) {
        return Rt.with({ groups: e2.groups, channels: e2.channels, cursor: e2.cursor, reason: e2.reason });
      }), Ut.on(gt.type, function(e2) {
        return jt.with({ channels: e2.channels, groups: e2.groups, cursor: e2.cursor });
      });
      var xt = new Qe("RECEIVING");
      xt.onEnter(function(e2) {
        return lt(e2.channels, e2.groups, e2.cursor);
      }), xt.onExit(function() {
        return lt.cancel;
      }), xt.on(St.type, function(e2, t2) {
        return xt.with(n(n({}, e2), { cursor: t2.payload.cursor }), [pt(t2.payload.events)]);
      }), xt.on(dt.type, function(e2, t2) {
        return 0 === t2.payload.channels.length && 0 === t2.payload.groups.length ? Gt.with(void 0) : xt.with(n(n({}, e2), { channels: t2.payload.channels, groups: t2.payload.groups }));
      }), xt.on(wt.type, function(e2, t2) {
        return Ut.with(n(n({}, e2), { attempts: 0, reason: t2.payload }));
      }), xt.on(gt.type, function(e2) {
        return jt.with({ channels: e2.channels, groups: e2.groups, cursor: e2.cursor });
      });
      var It = new Qe("HANDSHAKE_RECONNECTING");
      It.onEnter(function(e2) {
        return ft(e2);
      }), It.onExit(function() {
        return ht.cancel;
      }), It.on(Tt.type, function(e2, t2) {
        return xt.with({ channels: e2.channels, groups: e2.groups, cursor: t2.payload.cursor }, [pt(t2.payload.events)]);
      }), It.on(kt.type, function(e2, t2) {
        return It.with(n(n({}, e2), { attempts: e2.attempts + 1, reason: t2.payload }));
      }), It.on(Nt.type, function(e2) {
        return Mt.with({ groups: e2.groups, channels: e2.channels, reason: e2.reason });
      }), It.on(gt.type, function(e2) {
        return At.with({ channels: e2.channels, groups: e2.groups });
      });
      var Dt = new Qe("HANDSHAKING");
      Dt.onEnter(function(e2) {
        return ct(e2.channels, e2.groups);
      }), Dt.onExit(function() {
        return ct.cancel;
      }), Dt.on(dt.type, function(e2, t2) {
        return 0 === t2.payload.channels.length && 0 === t2.payload.groups.length ? Gt.with(void 0) : Dt.with({ channels: t2.payload.channels, groups: t2.payload.groups });
      }), Dt.on(bt.type, function(e2, t2) {
        return xt.with({ channels: e2.channels, groups: e2.groups, cursor: t2.payload });
      }), Dt.on(vt.type, function(e2, t2) {
        return It.with(n(n({}, e2), { attempts: 0, reason: t2.payload }));
      }), Dt.on(gt.type, function(e2) {
        return At.with({ channels: e2.channels, groups: e2.groups });
      });
      var Gt = new Qe("UNSUBSCRIBED");
      Gt.on(dt.type, function(e2, t2) {
        return Dt.with({ channels: t2.payload.channels, groups: t2.payload.groups });
      });
      var Kt = function() {
        function e2(e3) {
          var t2 = this;
          this.engine = new Ye(), this.channels = [], this.groups = [], this.dispatcher = new Et(this.engine, e3), this.engine.subscribe(function(e4) {
            "invocationDispatched" === e4.type && t2.dispatcher.dispatch(e4.invocation);
          }), this.engine.start(Gt, void 0);
        }
        return Object.defineProperty(e2.prototype, "_engine", { get: function() {
          return this.engine;
        }, enumerable: false, configurable: true }), e2.prototype.subscribe = function(e3) {
          var t2 = e3.channels, n2 = e3.groups;
          this.channels = u(u([], a(this.channels), false), a(null != t2 ? t2 : []), false), this.groups = u(u([], a(this.groups), false), a(null != n2 ? n2 : []), false), this.engine.transition(dt(this.channels, this.groups));
        }, e2.prototype.unsubscribe = function(e3) {
          var t2 = e3.channels, n2 = e3.groups;
          this.channels = this.channels.filter(function(e4) {
            var n3;
            return null === (n3 = !(null == t2 ? void 0 : t2.includes(e4))) || void 0 === n3 || n3;
          }), this.groups = this.groups.filter(function(e4) {
            var t3;
            return null === (t3 = !(null == n2 ? void 0 : n2.includes(e4))) || void 0 === t3 || t3;
          }), this.engine.transition(dt(this.channels.slice(0), this.groups.slice(0)));
        }, e2.prototype.unsubscribeAll = function() {
          this.channels = [], this.groups = [], this.engine.transition(dt(this.channels.slice(0), this.groups.slice(0)));
        }, e2.prototype.reconnect = function() {
          this.engine.transition(yt());
        }, e2.prototype.disconnect = function() {
          this.engine.transition(gt());
        }, e2;
      }(), Ft = function() {
        function e2(e3) {
          var t2 = this, r2 = e3.networking, i2 = e3.cbor, o2 = new _({ setup: e3 });
          this._config = o2;
          var s2 = new w({ config: o2 }), c2 = e3.cryptography;
          r2.init(o2);
          var l2 = new F(o2, i2);
          this._tokenManager = l2;
          var p2 = new R({ maximumSamplesCount: 6e4 });
          this._telemetryManager = p2;
          var h2 = { config: o2, networking: r2, crypto: s2, cryptography: c2, tokenManager: l2, telemetryManager: p2, PubNubFile: e3.PubNubFile };
          this.File = e3.PubNubFile, this.encryptFile = function(e4, n2) {
            return c2.encryptFile(e4, n2, t2.File);
          }, this.decryptFile = function(e4, n2) {
            return c2.decryptFile(e4, n2, t2.File);
          };
          var f2 = J.bind(this, h2, Ve), d2 = J.bind(this, h2, re), g2 = J.bind(this, h2, oe), y2 = J.bind(this, h2, ae), b2 = J.bind(this, h2, Je), v2 = new K();
          if (this._listenerManager = v2, this.iAmHere = J.bind(this, h2, oe), this.iAmAway = J.bind(this, h2, re), this.setPresenceState = J.bind(this, h2, ae), this.handshake = J.bind(this, h2, We), this.receiveMessages = J.bind(this, h2, Xe), true === o2.enableSubscribeBeta) {
            var m2 = new Kt({ handshake: this.handshake, receiveEvents: this.receiveMessages });
            this.subscribe = m2.subscribe.bind(m2), this.unsubscribe = m2.unsubscribe.bind(m2), this.eventEngine = m2;
          } else {
            var O2 = new M({ timeEndpoint: f2, leaveEndpoint: d2, heartbeatEndpoint: g2, setStateEndpoint: y2, subscribeEndpoint: b2, crypto: h2.crypto, config: h2.config, listenerManager: v2, getFileUrl: function(e4) {
              return ye(h2, e4);
            } });
            this.subscribe = O2.adaptSubscribeChange.bind(O2), this.unsubscribe = O2.adaptUnsubscribeChange.bind(O2), this.disconnect = O2.disconnect.bind(O2), this.reconnect = O2.reconnect.bind(O2), this.unsubscribeAll = O2.unsubscribeAll.bind(O2), this.getSubscribedChannels = O2.getSubscribedChannels.bind(O2), this.getSubscribedChannelGroups = O2.getSubscribedChannelGroups.bind(O2), this.setState = O2.adaptStateChange.bind(O2), this.presence = O2.adaptPresenceChange.bind(O2), this.destroy = function(e4) {
              O2.unsubscribeAll(e4), O2.disconnect();
            };
          }
          this.addListener = v2.addListener.bind(v2), this.removeListener = v2.removeListener.bind(v2), this.removeAllListeners = v2.removeAllListeners.bind(v2), this.parseToken = l2.parseToken.bind(l2), this.setToken = l2.setToken.bind(l2), this.getToken = l2.getToken.bind(l2), this.channelGroups = { listGroups: J.bind(this, h2, Q), listChannels: J.bind(this, h2, Y), addChannels: J.bind(this, h2, W), removeChannels: J.bind(this, h2, X), deleteGroup: J.bind(this, h2, $) }, this.push = { addChannels: J.bind(this, h2, Z), removeChannels: J.bind(this, h2, ee), deleteDevice: J.bind(this, h2, ne), listChannels: J.bind(this, h2, te) }, this.hereNow = J.bind(this, h2, ue), this.whereNow = J.bind(this, h2, ie), this.getState = J.bind(this, h2, se), this.grant = J.bind(this, h2, je), this.grantToken = J.bind(this, h2, Ie), this.audit = J.bind(this, h2, Me), this.revokeToken = J.bind(this, h2, De), this.publish = J.bind(this, h2, Ke), this.fire = function(e4, n2) {
            return e4.replicate = false, e4.storeInHistory = false, t2.publish(e4, n2);
          }, this.signal = J.bind(this, h2, Fe), this.history = J.bind(this, h2, Be), this.deleteMessages = J.bind(this, h2, He), this.messageCounts = J.bind(this, h2, qe), this.fetchMessages = J.bind(this, h2, ze), this.addMessageAction = J.bind(this, h2, ce), this.removeMessageAction = J.bind(this, h2, le), this.getMessageActions = J.bind(this, h2, pe), this.listFiles = J.bind(this, h2, he);
          var P2 = J.bind(this, h2, fe);
          this.publishFile = J.bind(this, h2, de), this.sendFile = ge({ generateUploadUrl: P2, publishFile: this.publishFile, modules: h2 }), this.getFileUrl = function(e4) {
            return ye(h2, e4);
          }, this.downloadFile = J.bind(this, h2, be), this.deleteFile = J.bind(this, h2, ve), this.objects = { getAllUUIDMetadata: J.bind(this, h2, me), getUUIDMetadata: J.bind(this, h2, _e), setUUIDMetadata: J.bind(this, h2, Oe), removeUUIDMetadata: J.bind(this, h2, Pe), getAllChannelMetadata: J.bind(this, h2, Se), getChannelMetadata: J.bind(this, h2, we), setChannelMetadata: J.bind(this, h2, Te), removeChannelMetadata: J.bind(this, h2, ke), getChannelMembers: J.bind(this, h2, Ne), setChannelMembers: function(e4) {
            for (var r3 = [], i3 = 1; i3 < arguments.length; i3++)
              r3[i3 - 1] = arguments[i3];
            return J.call.apply(J, u([t2, h2, Ce, n({ type: "set" }, e4)], a(r3), false));
          }, removeChannelMembers: function(e4) {
            for (var r3 = [], i3 = 1; i3 < arguments.length; i3++)
              r3[i3 - 1] = arguments[i3];
            return J.call.apply(J, u([t2, h2, Ce, n({ type: "delete" }, e4)], a(r3), false));
          }, getMemberships: J.bind(this, h2, Ee), setMemberships: function(e4) {
            for (var r3 = [], i3 = 1; i3 < arguments.length; i3++)
              r3[i3 - 1] = arguments[i3];
            return J.call.apply(J, u([t2, h2, Ae, n({ type: "set" }, e4)], a(r3), false));
          }, removeMemberships: function(e4) {
            for (var r3 = [], i3 = 1; i3 < arguments.length; i3++)
              r3[i3 - 1] = arguments[i3];
            return J.call.apply(J, u([t2, h2, Ae, n({ type: "delete" }, e4)], a(r3), false));
          } }, this.createUser = function(e4) {
            return t2.objects.setUUIDMetadata({ uuid: e4.userId, data: e4.data, include: e4.include });
          }, this.updateUser = this.createUser, this.removeUser = function(e4) {
            return t2.objects.removeUUIDMetadata({ uuid: null == e4 ? void 0 : e4.userId });
          }, this.fetchUser = function(e4) {
            return t2.objects.getUUIDMetadata({ uuid: null == e4 ? void 0 : e4.userId, include: null == e4 ? void 0 : e4.include });
          }, this.fetchUsers = this.objects.getAllUUIDMetadata, this.createSpace = function(e4) {
            return t2.objects.setChannelMetadata({ channel: e4.spaceId, data: e4.data, include: e4.include });
          }, this.updateSpace = this.createSpace, this.removeSpace = function(e4) {
            return t2.objects.removeChannelMetadata({ channel: e4.spaceId });
          }, this.fetchSpace = function(e4) {
            return t2.objects.getChannelMetadata({ channel: e4.spaceId, include: e4.include });
          }, this.fetchSpaces = this.objects.getAllChannelMetadata, this.addMemberships = function(e4) {
            var n2, r3;
            return "string" == typeof e4.spaceId ? t2.objects.setChannelMembers({ channel: e4.spaceId, uuids: null === (n2 = e4.users) || void 0 === n2 ? void 0 : n2.map(function(e5) {
              return "string" == typeof e5 ? e5 : { id: e5.userId, custom: e5.custom, status: e5.status };
            }), limit: 0 }) : t2.objects.setMemberships({ uuid: e4.userId, channels: null === (r3 = e4.spaces) || void 0 === r3 ? void 0 : r3.map(function(e5) {
              return "string" == typeof e5 ? e5 : { id: e5.spaceId, custom: e5.custom, status: e5.status };
            }), limit: 0 });
          }, this.updateMemberships = this.addMemberships, this.removeMemberships = function(e4) {
            return "string" == typeof e4.spaceId ? t2.objects.removeChannelMembers({ channel: e4.spaceId, uuids: e4.userIds, limit: 0 }) : t2.objects.removeMemberships({ uuid: e4.userId, channels: e4.spaceIds, limit: 0 });
          }, this.fetchMemberships = function(e4) {
            return "string" == typeof e4.spaceId ? t2.objects.getChannelMembers({ channel: e4.spaceId, filter: e4.filter, limit: e4.limit, page: e4.page, include: { customFields: e4.include.customFields, UUIDFields: e4.include.userFields, customUUIDFields: e4.include.customUserFields, totalCount: e4.include.totalCount }, sort: null != e4.sort ? Object.fromEntries(Object.entries(e4.sort).map(function(e5) {
              var t3 = a(e5, 2), n2 = t3[0], r3 = t3[1];
              return [n2.replace("user", "uuid"), r3];
            })) : null }).then(function(e5) {
              var t3;
              return e5.data = null === (t3 = e5.data) || void 0 === t3 ? void 0 : t3.map(function(e6) {
                return { user: e6.uuid, custom: e6.custom, updated: e6.updated, eTag: e6.eTag };
              }), e5;
            }) : t2.objects.getMemberships({ uuid: e4.userId, filter: e4.filter, limit: e4.limit, page: e4.page, include: { customFields: e4.include.customFields, channelFields: e4.include.spaceFields, customChannelFields: e4.include.customSpaceFields, totalCount: e4.include.totalCount }, sort: null != e4.sort ? Object.fromEntries(Object.entries(e4.sort).map(function(e5) {
              var t3 = a(e5, 2), n2 = t3[0], r3 = t3[1];
              return [n2.replace("space", "channel"), r3];
            })) : null }).then(function(e5) {
              var t3;
              return e5.data = null === (t3 = e5.data) || void 0 === t3 ? void 0 : t3.map(function(e6) {
                return { space: e6.channel, custom: e6.custom, updated: e6.updated, eTag: e6.eTag };
              }), e5;
            });
          }, this.time = f2, this.stop = this.destroy, this.encrypt = s2.encrypt.bind(s2), this.decrypt = s2.decrypt.bind(s2), this.getAuthKey = h2.config.getAuthKey.bind(h2.config), this.setAuthKey = h2.config.setAuthKey.bind(h2.config), this.setCipherKey = h2.config.setCipherKey.bind(h2.config), this.getUUID = h2.config.getUUID.bind(h2.config), this.setUUID = h2.config.setUUID.bind(h2.config), this.getFilterExpression = h2.config.getFilterExpression.bind(h2.config), this.setFilterExpression = h2.config.setFilterExpression.bind(h2.config), this.setHeartbeatInterval = h2.config.setHeartbeatInterval.bind(h2.config), r2.hasModule("proxy") && (this.setProxy = function(e4) {
            h2.config.setProxy(e4), t2.reconnect();
          });
        }
        return e2.prototype.getVersion = function() {
          return this._config.getVersion();
        }, e2.prototype._addPnsdkSuffix = function(e3, t2) {
          this._config._addPnsdkSuffix(e3, t2);
        }, e2.prototype.networkDownDetected = function() {
          this._listenerManager.announceNetworkDown(), this._config.restore ? this.disconnect() : this.destroy(true);
        }, e2.prototype.networkUpDetected = function() {
          this._listenerManager.announceNetworkUp(), this.reconnect();
        }, e2.notificationPayload = function(e3, t2) {
          return new G(e3, t2);
        }, e2.generateUUID = function() {
          return m();
        }, e2.OPERATIONS = j, e2.CATEGORIES = A, e2;
      }(), Lt = function() {
        function e2(e3) {
          var t2 = this;
          this._modules = {}, Object.keys(e3).forEach(function(n2) {
            t2._modules[n2] = e3[n2].bind(t2);
          });
        }
        return e2.prototype.init = function(e3) {
          this._config = e3, Array.isArray(this._config.origin) ? this._currentSubDomain = Math.floor(Math.random() * this._config.origin.length) : this._currentSubDomain = 0, this._coreParams = {}, this.shiftStandardOrigin();
        }, e2.prototype.nextOrigin = function() {
          var e3 = this._config.secure ? "https://" : "http://";
          if ("string" == typeof this._config.origin)
            return "".concat(e3).concat(this._config.origin);
          this._currentSubDomain += 1, this._currentSubDomain >= this._config.origin.length && (this._currentSubDomain = 0);
          var t2 = this._config.origin[this._currentSubDomain];
          return "".concat(e3).concat(t2);
        }, e2.prototype.hasModule = function(e3) {
          return e3 in this._modules;
        }, e2.prototype.shiftStandardOrigin = function() {
          return this._standardOrigin = this.nextOrigin(), this._standardOrigin;
        }, e2.prototype.getStandardOrigin = function() {
          return this._standardOrigin;
        }, e2.prototype.POSTFILE = function(e3, t2, n2) {
          return this._modules.postfile(e3, t2, n2);
        }, e2.prototype.GETFILE = function(e3, t2, n2) {
          return this._modules.getfile(e3, t2, n2);
        }, e2.prototype.POST = function(e3, t2, n2, r2) {
          return this._modules.post(e3, t2, n2, r2);
        }, e2.prototype.PATCH = function(e3, t2, n2, r2) {
          return this._modules.patch(e3, t2, n2, r2);
        }, e2.prototype.GET = function(e3, t2, n2) {
          return this._modules.get(e3, t2, n2);
        }, e2.prototype.DELETE = function(e3, t2, n2) {
          return this._modules.del(e3, t2, n2);
        }, e2.prototype._detectErrorCategory = function(e3) {
          if ("ENOTFOUND" === e3.code)
            return A.PNNetworkIssuesCategory;
          if ("ECONNREFUSED" === e3.code)
            return A.PNNetworkIssuesCategory;
          if ("ECONNRESET" === e3.code)
            return A.PNNetworkIssuesCategory;
          if ("EAI_AGAIN" === e3.code)
            return A.PNNetworkIssuesCategory;
          if (0 === e3.status || e3.hasOwnProperty("status") && void 0 === e3.status)
            return A.PNNetworkIssuesCategory;
          if (e3.timeout)
            return A.PNTimeoutCategory;
          if ("ETIMEDOUT" === e3.code)
            return A.PNNetworkIssuesCategory;
          if (e3.response) {
            if (e3.response.badRequest)
              return A.PNBadRequestCategory;
            if (e3.response.forbidden)
              return A.PNAccessDeniedCategory;
          }
          return A.PNUnknownCategory;
        }, e2;
      }();
      function Bt(e2) {
        var t2 = e2.replace(/==?$/, ""), n2 = Math.floor(t2.length / 4 * 3), r2 = new ArrayBuffer(n2), i2 = new Uint8Array(r2), o2 = 0;
        function s2() {
          var e3 = t2.charAt(o2++), n3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e3);
          if (-1 === n3)
            throw new Error("Illegal character at ".concat(o2, ": ").concat(t2.charAt(o2 - 1)));
          return n3;
        }
        for (var a2 = 0; a2 < n2; a2 += 3) {
          var u2 = s2(), c2 = s2(), l2 = s2(), p2 = s2(), h2 = (63 & u2) << 2 | c2 >> 4, f2 = (15 & c2) << 4 | l2 >> 2, d2 = (3 & l2) << 6 | p2 >> 0;
          i2[a2] = h2, 64 != l2 && (i2[a2 + 1] = f2), 64 != p2 && (i2[a2 + 2] = d2);
        }
        return r2;
      }
      function Ht(e2) {
        var t2 = function(e3) {
          return e3 && "object" == typeof e3 && e3.constructor === Object;
        };
        if (!t2(e2))
          return e2;
        var n2 = {};
        return Object.keys(e2).forEach(function(r2) {
          var i2 = function(e3) {
            return "string" == typeof e3 || e3 instanceof String;
          }(r2), o2 = r2, s2 = e2[r2];
          Array.isArray(r2) || i2 && r2.indexOf(",") >= 0 ? o2 = (i2 ? r2.split(",") : r2).reduce(function(e3, t3) {
            return e3 += String.fromCharCode(t3);
          }, "") : (function(e3) {
            return "number" == typeof e3 && isFinite(e3);
          }(r2) || i2 && !isNaN(r2)) && (o2 = String.fromCharCode(i2 ? parseInt(r2, 10) : 10));
          n2[o2] = t2(s2) ? Ht(s2) : s2;
        }), n2;
      }
      var qt = function() {
        function e2(e3, t2) {
          this._base64ToBinary = t2, this._decode = e3;
        }
        return e2.prototype.decodeToken = function(e3) {
          var t2 = "";
          e3.length % 4 == 3 ? t2 = "=" : e3.length % 4 == 2 && (t2 = "==");
          var n2 = e3.replace(/-/gi, "+").replace(/_/gi, "/") + t2, r2 = this._decode(this._base64ToBinary(n2));
          if ("object" == typeof r2)
            return r2;
        }, e2;
      }(), zt = { exports: {} }, Vt = { exports: {} };
      !function(e2) {
        function t2(e3) {
          if (e3)
            return function(e4) {
              for (var n2 in t2.prototype)
                e4[n2] = t2.prototype[n2];
              return e4;
            }(e3);
        }
        e2.exports = t2, t2.prototype.on = t2.prototype.addEventListener = function(e3, t3) {
          return this._callbacks = this._callbacks || {}, (this._callbacks["$" + e3] = this._callbacks["$" + e3] || []).push(t3), this;
        }, t2.prototype.once = function(e3, t3) {
          function n2() {
            this.off(e3, n2), t3.apply(this, arguments);
          }
          return n2.fn = t3, this.on(e3, n2), this;
        }, t2.prototype.off = t2.prototype.removeListener = t2.prototype.removeAllListeners = t2.prototype.removeEventListener = function(e3, t3) {
          if (this._callbacks = this._callbacks || {}, 0 == arguments.length)
            return this._callbacks = {}, this;
          var n2, r2 = this._callbacks["$" + e3];
          if (!r2)
            return this;
          if (1 == arguments.length)
            return delete this._callbacks["$" + e3], this;
          for (var i2 = 0; i2 < r2.length; i2++)
            if ((n2 = r2[i2]) === t3 || n2.fn === t3) {
              r2.splice(i2, 1);
              break;
            }
          return 0 === r2.length && delete this._callbacks["$" + e3], this;
        }, t2.prototype.emit = function(e3) {
          this._callbacks = this._callbacks || {};
          for (var t3 = new Array(arguments.length - 1), n2 = this._callbacks["$" + e3], r2 = 1; r2 < arguments.length; r2++)
            t3[r2 - 1] = arguments[r2];
          if (n2) {
            r2 = 0;
            for (var i2 = (n2 = n2.slice(0)).length; r2 < i2; ++r2)
              n2[r2].apply(this, t3);
          }
          return this;
        }, t2.prototype.listeners = function(e3) {
          return this._callbacks = this._callbacks || {}, this._callbacks["$" + e3] || [];
        }, t2.prototype.hasListeners = function(e3) {
          return !!this.listeners(e3).length;
        };
      }(Vt);
      var Jt = Zt;
      Zt.default = Zt, Zt.stable = rn, Zt.stableStringify = rn;
      var Wt = "[...]", Xt = "[Circular]", $t = [], Qt = [];
      function Yt() {
        return { depthLimit: Number.MAX_SAFE_INTEGER, edgesLimit: Number.MAX_SAFE_INTEGER };
      }
      function Zt(e2, t2, n2, r2) {
        var i2;
        void 0 === r2 && (r2 = Yt()), tn(e2, "", 0, [], void 0, 0, r2);
        try {
          i2 = 0 === Qt.length ? JSON.stringify(e2, t2, n2) : JSON.stringify(e2, sn(t2), n2);
        } catch (e3) {
          return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]");
        } finally {
          for (; 0 !== $t.length; ) {
            var o2 = $t.pop();
            4 === o2.length ? Object.defineProperty(o2[0], o2[1], o2[3]) : o2[0][o2[1]] = o2[2];
          }
        }
        return i2;
      }
      function en(e2, t2, n2, r2) {
        var i2 = Object.getOwnPropertyDescriptor(r2, n2);
        void 0 !== i2.get ? i2.configurable ? (Object.defineProperty(r2, n2, { value: e2 }), $t.push([r2, n2, t2, i2])) : Qt.push([t2, n2, e2]) : (r2[n2] = e2, $t.push([r2, n2, t2]));
      }
      function tn(e2, t2, n2, r2, i2, o2, s2) {
        var a2;
        if (o2 += 1, "object" == typeof e2 && null !== e2) {
          for (a2 = 0; a2 < r2.length; a2++)
            if (r2[a2] === e2)
              return void en(Xt, e2, t2, i2);
          if (void 0 !== s2.depthLimit && o2 > s2.depthLimit)
            return void en(Wt, e2, t2, i2);
          if (void 0 !== s2.edgesLimit && n2 + 1 > s2.edgesLimit)
            return void en(Wt, e2, t2, i2);
          if (r2.push(e2), Array.isArray(e2))
            for (a2 = 0; a2 < e2.length; a2++)
              tn(e2[a2], a2, a2, r2, e2, o2, s2);
          else {
            var u2 = Object.keys(e2);
            for (a2 = 0; a2 < u2.length; a2++) {
              var c2 = u2[a2];
              tn(e2[c2], c2, a2, r2, e2, o2, s2);
            }
          }
          r2.pop();
        }
      }
      function nn(e2, t2) {
        return e2 < t2 ? -1 : e2 > t2 ? 1 : 0;
      }
      function rn(e2, t2, n2, r2) {
        void 0 === r2 && (r2 = Yt());
        var i2, o2 = on(e2, "", 0, [], void 0, 0, r2) || e2;
        try {
          i2 = 0 === Qt.length ? JSON.stringify(o2, t2, n2) : JSON.stringify(o2, sn(t2), n2);
        } catch (e3) {
          return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]");
        } finally {
          for (; 0 !== $t.length; ) {
            var s2 = $t.pop();
            4 === s2.length ? Object.defineProperty(s2[0], s2[1], s2[3]) : s2[0][s2[1]] = s2[2];
          }
        }
        return i2;
      }
      function on(e2, t2, n2, r2, i2, o2, s2) {
        var a2;
        if (o2 += 1, "object" == typeof e2 && null !== e2) {
          for (a2 = 0; a2 < r2.length; a2++)
            if (r2[a2] === e2)
              return void en(Xt, e2, t2, i2);
          try {
            if ("function" == typeof e2.toJSON)
              return;
          } catch (e3) {
            return;
          }
          if (void 0 !== s2.depthLimit && o2 > s2.depthLimit)
            return void en(Wt, e2, t2, i2);
          if (void 0 !== s2.edgesLimit && n2 + 1 > s2.edgesLimit)
            return void en(Wt, e2, t2, i2);
          if (r2.push(e2), Array.isArray(e2))
            for (a2 = 0; a2 < e2.length; a2++)
              on(e2[a2], a2, a2, r2, e2, o2, s2);
          else {
            var u2 = {}, c2 = Object.keys(e2).sort(nn);
            for (a2 = 0; a2 < c2.length; a2++) {
              var l2 = c2[a2];
              on(e2[l2], l2, a2, r2, e2, o2, s2), u2[l2] = e2[l2];
            }
            if (void 0 === i2)
              return u2;
            $t.push([i2, t2, e2]), i2[t2] = u2;
          }
          r2.pop();
        }
      }
      function sn(e2) {
        return e2 = void 0 !== e2 ? e2 : function(e3, t2) {
          return t2;
        }, function(t2, n2) {
          if (Qt.length > 0)
            for (var r2 = 0; r2 < Qt.length; r2++) {
              var i2 = Qt[r2];
              if (i2[1] === t2 && i2[0] === n2) {
                n2 = i2[2], Qt.splice(r2, 1);
                break;
              }
            }
          return e2.call(this, t2, n2);
        };
      }
      var an = String.prototype.replace, un = /%20/g, cn = "RFC3986", ln = { default: cn, formatters: { RFC1738: function(e2) {
        return an.call(e2, un, "+");
      }, RFC3986: function(e2) {
        return String(e2);
      } }, RFC1738: "RFC1738", RFC3986: cn }, pn = ln, hn = Object.prototype.hasOwnProperty, fn = Array.isArray, dn = function() {
        for (var e2 = [], t2 = 0; t2 < 256; ++t2)
          e2.push("%" + ((t2 < 16 ? "0" : "") + t2.toString(16)).toUpperCase());
        return e2;
      }(), gn = function(e2, t2) {
        for (var n2 = t2 && t2.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, r2 = 0; r2 < e2.length; ++r2)
          void 0 !== e2[r2] && (n2[r2] = e2[r2]);
        return n2;
      }, yn = { arrayToObject: gn, assign: function(e2, t2) {
        return Object.keys(t2).reduce(function(e3, n2) {
          return e3[n2] = t2[n2], e3;
        }, e2);
      }, combine: function(e2, t2) {
        return [].concat(e2, t2);
      }, compact: function(e2) {
        for (var t2 = [{ obj: { o: e2 }, prop: "o" }], n2 = [], r2 = 0; r2 < t2.length; ++r2)
          for (var i2 = t2[r2], o2 = i2.obj[i2.prop], s2 = Object.keys(o2), a2 = 0; a2 < s2.length; ++a2) {
            var u2 = s2[a2], c2 = o2[u2];
            "object" == typeof c2 && null !== c2 && -1 === n2.indexOf(c2) && (t2.push({ obj: o2, prop: u2 }), n2.push(c2));
          }
        return function(e3) {
          for (; e3.length > 1; ) {
            var t3 = e3.pop(), n3 = t3.obj[t3.prop];
            if (fn(n3)) {
              for (var r3 = [], i3 = 0; i3 < n3.length; ++i3)
                void 0 !== n3[i3] && r3.push(n3[i3]);
              t3.obj[t3.prop] = r3;
            }
          }
        }(t2), e2;
      }, decode: function(e2, t2, n2) {
        var r2 = e2.replace(/\+/g, " ");
        if ("iso-8859-1" === n2)
          return r2.replace(/%[0-9a-f]{2}/gi, unescape);
        try {
          return decodeURIComponent(r2);
        } catch (e3) {
          return r2;
        }
      }, encode: function(e2, t2, n2, r2, i2) {
        if (0 === e2.length)
          return e2;
        var o2 = e2;
        if ("symbol" == typeof e2 ? o2 = Symbol.prototype.toString.call(e2) : "string" != typeof e2 && (o2 = String(e2)), "iso-8859-1" === n2)
          return escape(o2).replace(/%u[0-9a-f]{4}/gi, function(e3) {
            return "%26%23" + parseInt(e3.slice(2), 16) + "%3B";
          });
        for (var s2 = "", a2 = 0; a2 < o2.length; ++a2) {
          var u2 = o2.charCodeAt(a2);
          45 === u2 || 46 === u2 || 95 === u2 || 126 === u2 || u2 >= 48 && u2 <= 57 || u2 >= 65 && u2 <= 90 || u2 >= 97 && u2 <= 122 || i2 === pn.RFC1738 && (40 === u2 || 41 === u2) ? s2 += o2.charAt(a2) : u2 < 128 ? s2 += dn[u2] : u2 < 2048 ? s2 += dn[192 | u2 >> 6] + dn[128 | 63 & u2] : u2 < 55296 || u2 >= 57344 ? s2 += dn[224 | u2 >> 12] + dn[128 | u2 >> 6 & 63] + dn[128 | 63 & u2] : (a2 += 1, u2 = 65536 + ((1023 & u2) << 10 | 1023 & o2.charCodeAt(a2)), s2 += dn[240 | u2 >> 18] + dn[128 | u2 >> 12 & 63] + dn[128 | u2 >> 6 & 63] + dn[128 | 63 & u2]);
        }
        return s2;
      }, isBuffer: function(e2) {
        return !(!e2 || "object" != typeof e2) && !!(e2.constructor && e2.constructor.isBuffer && e2.constructor.isBuffer(e2));
      }, isRegExp: function(e2) {
        return "[object RegExp]" === Object.prototype.toString.call(e2);
      }, maybeMap: function(e2, t2) {
        if (fn(e2)) {
          for (var n2 = [], r2 = 0; r2 < e2.length; r2 += 1)
            n2.push(t2(e2[r2]));
          return n2;
        }
        return t2(e2);
      }, merge: function e2(t2, n2, r2) {
        if (!n2)
          return t2;
        if ("object" != typeof n2) {
          if (fn(t2))
            t2.push(n2);
          else {
            if (!t2 || "object" != typeof t2)
              return [t2, n2];
            (r2 && (r2.plainObjects || r2.allowPrototypes) || !hn.call(Object.prototype, n2)) && (t2[n2] = true);
          }
          return t2;
        }
        if (!t2 || "object" != typeof t2)
          return [t2].concat(n2);
        var i2 = t2;
        return fn(t2) && !fn(n2) && (i2 = gn(t2, r2)), fn(t2) && fn(n2) ? (n2.forEach(function(n3, i3) {
          if (hn.call(t2, i3)) {
            var o2 = t2[i3];
            o2 && "object" == typeof o2 && n3 && "object" == typeof n3 ? t2[i3] = e2(o2, n3, r2) : t2.push(n3);
          } else
            t2[i3] = n3;
        }), t2) : Object.keys(n2).reduce(function(t3, i3) {
          var o2 = n2[i3];
          return hn.call(t3, i3) ? t3[i3] = e2(t3[i3], o2, r2) : t3[i3] = o2, t3;
        }, i2);
      } }, bn = yn, vn = ln, mn = Object.prototype.hasOwnProperty, _n = { brackets: function(e2) {
        return e2 + "[]";
      }, comma: "comma", indices: function(e2, t2) {
        return e2 + "[" + t2 + "]";
      }, repeat: function(e2) {
        return e2;
      } }, On = Array.isArray, Pn = String.prototype.split, Sn = Array.prototype.push, wn = function(e2, t2) {
        Sn.apply(e2, On(t2) ? t2 : [t2]);
      }, Tn = Date.prototype.toISOString, kn = vn.default, Nn = { addQueryPrefix: false, allowDots: false, charset: "utf-8", charsetSentinel: false, delimiter: "&", encode: true, encoder: bn.encode, encodeValuesOnly: false, format: kn, formatter: vn.formatters[kn], indices: false, serializeDate: function(e2) {
        return Tn.call(e2);
      }, skipNulls: false, strictNullHandling: false }, Cn = function e2(t2, n2, r2, i2, o2, s2, a2, u2, c2, l2, p2, h2, f2, d2) {
        var g2, y2 = t2;
        if ("function" == typeof a2 ? y2 = a2(n2, y2) : y2 instanceof Date ? y2 = l2(y2) : "comma" === r2 && On(y2) && (y2 = bn.maybeMap(y2, function(e3) {
          return e3 instanceof Date ? l2(e3) : e3;
        })), null === y2) {
          if (i2)
            return s2 && !f2 ? s2(n2, Nn.encoder, d2, "key", p2) : n2;
          y2 = "";
        }
        if ("string" == typeof (g2 = y2) || "number" == typeof g2 || "boolean" == typeof g2 || "symbol" == typeof g2 || "bigint" == typeof g2 || bn.isBuffer(y2)) {
          if (s2) {
            var b2 = f2 ? n2 : s2(n2, Nn.encoder, d2, "key", p2);
            if ("comma" === r2 && f2) {
              for (var v2 = Pn.call(String(y2), ","), m2 = "", _2 = 0; _2 < v2.length; ++_2)
                m2 += (0 === _2 ? "" : ",") + h2(s2(v2[_2], Nn.encoder, d2, "value", p2));
              return [h2(b2) + "=" + m2];
            }
            return [h2(b2) + "=" + h2(s2(y2, Nn.encoder, d2, "value", p2))];
          }
          return [h2(n2) + "=" + h2(String(y2))];
        }
        var O2, P2 = [];
        if (void 0 === y2)
          return P2;
        if ("comma" === r2 && On(y2))
          O2 = [{ value: y2.length > 0 ? y2.join(",") || null : void 0 }];
        else if (On(a2))
          O2 = a2;
        else {
          var S2 = Object.keys(y2);
          O2 = u2 ? S2.sort(u2) : S2;
        }
        for (var w2 = 0; w2 < O2.length; ++w2) {
          var T2 = O2[w2], k2 = "object" == typeof T2 && void 0 !== T2.value ? T2.value : y2[T2];
          if (!o2 || null !== k2) {
            var N2 = On(y2) ? "function" == typeof r2 ? r2(n2, T2) : n2 : n2 + (c2 ? "." + T2 : "[" + T2 + "]");
            wn(P2, e2(k2, N2, r2, i2, o2, s2, a2, u2, c2, l2, p2, h2, f2, d2));
          }
        }
        return P2;
      }, En = yn, An = Object.prototype.hasOwnProperty, Mn = Array.isArray, jn = { allowDots: false, allowPrototypes: false, arrayLimit: 20, charset: "utf-8", charsetSentinel: false, comma: false, decoder: En.decode, delimiter: "&", depth: 5, ignoreQueryPrefix: false, interpretNumericEntities: false, parameterLimit: 1e3, parseArrays: true, plainObjects: false, strictNullHandling: false }, Rn = function(e2) {
        return e2.replace(/&#(\d+);/g, function(e3, t2) {
          return String.fromCharCode(parseInt(t2, 10));
        });
      }, Un = function(e2, t2) {
        return e2 && "string" == typeof e2 && t2.comma && e2.indexOf(",") > -1 ? e2.split(",") : e2;
      }, xn = function(e2, t2, n2, r2) {
        if (e2) {
          var i2 = n2.allowDots ? e2.replace(/\.([^.[]+)/g, "[$1]") : e2, o2 = /(\[[^[\]]*])/g, s2 = n2.depth > 0 && /(\[[^[\]]*])/.exec(i2), a2 = s2 ? i2.slice(0, s2.index) : i2, u2 = [];
          if (a2) {
            if (!n2.plainObjects && An.call(Object.prototype, a2) && !n2.allowPrototypes)
              return;
            u2.push(a2);
          }
          for (var c2 = 0; n2.depth > 0 && null !== (s2 = o2.exec(i2)) && c2 < n2.depth; ) {
            if (c2 += 1, !n2.plainObjects && An.call(Object.prototype, s2[1].slice(1, -1)) && !n2.allowPrototypes)
              return;
            u2.push(s2[1]);
          }
          return s2 && u2.push("[" + i2.slice(s2.index) + "]"), function(e3, t3, n3, r3) {
            for (var i3 = r3 ? t3 : Un(t3, n3), o3 = e3.length - 1; o3 >= 0; --o3) {
              var s3, a3 = e3[o3];
              if ("[]" === a3 && n3.parseArrays)
                s3 = [].concat(i3);
              else {
                s3 = n3.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
                var u3 = "[" === a3.charAt(0) && "]" === a3.charAt(a3.length - 1) ? a3.slice(1, -1) : a3, c3 = parseInt(u3, 10);
                n3.parseArrays || "" !== u3 ? !isNaN(c3) && a3 !== u3 && String(c3) === u3 && c3 >= 0 && n3.parseArrays && c3 <= n3.arrayLimit ? (s3 = [])[c3] = i3 : "__proto__" !== u3 && (s3[u3] = i3) : s3 = { 0: i3 };
              }
              i3 = s3;
            }
            return i3;
          }(u2, t2, n2, r2);
        }
      }, In = { formats: ln, parse: function(e2, t2) {
        var n2 = function(e3) {
          if (!e3)
            return jn;
          if (null !== e3.decoder && void 0 !== e3.decoder && "function" != typeof e3.decoder)
            throw new TypeError("Decoder has to be a function.");
          if (void 0 !== e3.charset && "utf-8" !== e3.charset && "iso-8859-1" !== e3.charset)
            throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
          var t3 = void 0 === e3.charset ? jn.charset : e3.charset;
          return { allowDots: void 0 === e3.allowDots ? jn.allowDots : !!e3.allowDots, allowPrototypes: "boolean" == typeof e3.allowPrototypes ? e3.allowPrototypes : jn.allowPrototypes, arrayLimit: "number" == typeof e3.arrayLimit ? e3.arrayLimit : jn.arrayLimit, charset: t3, charsetSentinel: "boolean" == typeof e3.charsetSentinel ? e3.charsetSentinel : jn.charsetSentinel, comma: "boolean" == typeof e3.comma ? e3.comma : jn.comma, decoder: "function" == typeof e3.decoder ? e3.decoder : jn.decoder, delimiter: "string" == typeof e3.delimiter || En.isRegExp(e3.delimiter) ? e3.delimiter : jn.delimiter, depth: "number" == typeof e3.depth || false === e3.depth ? +e3.depth : jn.depth, ignoreQueryPrefix: true === e3.ignoreQueryPrefix, interpretNumericEntities: "boolean" == typeof e3.interpretNumericEntities ? e3.interpretNumericEntities : jn.interpretNumericEntities, parameterLimit: "number" == typeof e3.parameterLimit ? e3.parameterLimit : jn.parameterLimit, parseArrays: false !== e3.parseArrays, plainObjects: "boolean" == typeof e3.plainObjects ? e3.plainObjects : jn.plainObjects, strictNullHandling: "boolean" == typeof e3.strictNullHandling ? e3.strictNullHandling : jn.strictNullHandling };
        }(t2);
        if ("" === e2 || null == e2)
          return n2.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
        for (var r2 = "string" == typeof e2 ? function(e3, t3) {
          var n3, r3 = {}, i3 = t3.ignoreQueryPrefix ? e3.replace(/^\?/, "") : e3, o3 = t3.parameterLimit === 1 / 0 ? void 0 : t3.parameterLimit, s3 = i3.split(t3.delimiter, o3), a3 = -1, u3 = t3.charset;
          if (t3.charsetSentinel)
            for (n3 = 0; n3 < s3.length; ++n3)
              0 === s3[n3].indexOf("utf8=") && ("utf8=%E2%9C%93" === s3[n3] ? u3 = "utf-8" : "utf8=%26%2310003%3B" === s3[n3] && (u3 = "iso-8859-1"), a3 = n3, n3 = s3.length);
          for (n3 = 0; n3 < s3.length; ++n3)
            if (n3 !== a3) {
              var c2, l2, p2 = s3[n3], h2 = p2.indexOf("]="), f2 = -1 === h2 ? p2.indexOf("=") : h2 + 1;
              -1 === f2 ? (c2 = t3.decoder(p2, jn.decoder, u3, "key"), l2 = t3.strictNullHandling ? null : "") : (c2 = t3.decoder(p2.slice(0, f2), jn.decoder, u3, "key"), l2 = En.maybeMap(Un(p2.slice(f2 + 1), t3), function(e4) {
                return t3.decoder(e4, jn.decoder, u3, "value");
              })), l2 && t3.interpretNumericEntities && "iso-8859-1" === u3 && (l2 = Rn(l2)), p2.indexOf("[]=") > -1 && (l2 = Mn(l2) ? [l2] : l2), An.call(r3, c2) ? r3[c2] = En.combine(r3[c2], l2) : r3[c2] = l2;
            }
          return r3;
        }(e2, n2) : e2, i2 = n2.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, o2 = Object.keys(r2), s2 = 0; s2 < o2.length; ++s2) {
          var a2 = o2[s2], u2 = xn(a2, r2[a2], n2, "string" == typeof e2);
          i2 = En.merge(i2, u2, n2);
        }
        return En.compact(i2);
      }, stringify: function(e2, t2) {
        var n2, r2 = e2, i2 = function(e3) {
          if (!e3)
            return Nn;
          if (null !== e3.encoder && void 0 !== e3.encoder && "function" != typeof e3.encoder)
            throw new TypeError("Encoder has to be a function.");
          var t3 = e3.charset || Nn.charset;
          if (void 0 !== e3.charset && "utf-8" !== e3.charset && "iso-8859-1" !== e3.charset)
            throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
          var n3 = vn.default;
          if (void 0 !== e3.format) {
            if (!mn.call(vn.formatters, e3.format))
              throw new TypeError("Unknown format option provided.");
            n3 = e3.format;
          }
          var r3 = vn.formatters[n3], i3 = Nn.filter;
          return ("function" == typeof e3.filter || On(e3.filter)) && (i3 = e3.filter), { addQueryPrefix: "boolean" == typeof e3.addQueryPrefix ? e3.addQueryPrefix : Nn.addQueryPrefix, allowDots: void 0 === e3.allowDots ? Nn.allowDots : !!e3.allowDots, charset: t3, charsetSentinel: "boolean" == typeof e3.charsetSentinel ? e3.charsetSentinel : Nn.charsetSentinel, delimiter: void 0 === e3.delimiter ? Nn.delimiter : e3.delimiter, encode: "boolean" == typeof e3.encode ? e3.encode : Nn.encode, encoder: "function" == typeof e3.encoder ? e3.encoder : Nn.encoder, encodeValuesOnly: "boolean" == typeof e3.encodeValuesOnly ? e3.encodeValuesOnly : Nn.encodeValuesOnly, filter: i3, format: n3, formatter: r3, serializeDate: "function" == typeof e3.serializeDate ? e3.serializeDate : Nn.serializeDate, skipNulls: "boolean" == typeof e3.skipNulls ? e3.skipNulls : Nn.skipNulls, sort: "function" == typeof e3.sort ? e3.sort : null, strictNullHandling: "boolean" == typeof e3.strictNullHandling ? e3.strictNullHandling : Nn.strictNullHandling };
        }(t2);
        "function" == typeof i2.filter ? r2 = (0, i2.filter)("", r2) : On(i2.filter) && (n2 = i2.filter);
        var o2, s2 = [];
        if ("object" != typeof r2 || null === r2)
          return "";
        o2 = t2 && t2.arrayFormat in _n ? t2.arrayFormat : t2 && "indices" in t2 ? t2.indices ? "indices" : "repeat" : "indices";
        var a2 = _n[o2];
        n2 || (n2 = Object.keys(r2)), i2.sort && n2.sort(i2.sort);
        for (var u2 = 0; u2 < n2.length; ++u2) {
          var c2 = n2[u2];
          i2.skipNulls && null === r2[c2] || wn(s2, Cn(r2[c2], c2, a2, i2.strictNullHandling, i2.skipNulls, i2.encode ? i2.encoder : null, i2.filter, i2.sort, i2.allowDots, i2.serializeDate, i2.format, i2.formatter, i2.encodeValuesOnly, i2.charset));
        }
        var l2 = s2.join(i2.delimiter), p2 = true === i2.addQueryPrefix ? "?" : "";
        return i2.charsetSentinel && ("iso-8859-1" === i2.charset ? p2 += "utf8=%26%2310003%3B&" : p2 += "utf8=%E2%9C%93&"), l2.length > 0 ? p2 + l2 : "";
      } };
      function Dn(e2) {
        return Dn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, Dn(e2);
      }
      var Gn = function(e2) {
        return null !== e2 && "object" === Dn(e2);
      };
      function Kn(e2) {
        return Kn = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
          return typeof e3;
        } : function(e3) {
          return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
        }, Kn(e2);
      }
      var Fn = Gn, Ln = Bn;
      function Bn(e2) {
        if (e2)
          return function(e3) {
            for (var t2 in Bn.prototype)
              Object.prototype.hasOwnProperty.call(Bn.prototype, t2) && (e3[t2] = Bn.prototype[t2]);
            return e3;
          }(e2);
      }
      Bn.prototype.clearTimeout = function() {
        return clearTimeout(this._timer), clearTimeout(this._responseTimeoutTimer), clearTimeout(this._uploadTimeoutTimer), delete this._timer, delete this._responseTimeoutTimer, delete this._uploadTimeoutTimer, this;
      }, Bn.prototype.parse = function(e2) {
        return this._parser = e2, this;
      }, Bn.prototype.responseType = function(e2) {
        return this._responseType = e2, this;
      }, Bn.prototype.serialize = function(e2) {
        return this._serializer = e2, this;
      }, Bn.prototype.timeout = function(e2) {
        if (!e2 || "object" !== Kn(e2))
          return this._timeout = e2, this._responseTimeout = 0, this._uploadTimeout = 0, this;
        for (var t2 in e2)
          if (Object.prototype.hasOwnProperty.call(e2, t2))
            switch (t2) {
              case "deadline":
                this._timeout = e2.deadline;
                break;
              case "response":
                this._responseTimeout = e2.response;
                break;
              case "upload":
                this._uploadTimeout = e2.upload;
                break;
              default:
                console.warn("Unknown timeout option", t2);
            }
        return this;
      }, Bn.prototype.retry = function(e2, t2) {
        return 0 !== arguments.length && true !== e2 || (e2 = 1), e2 <= 0 && (e2 = 0), this._maxRetries = e2, this._retries = 0, this._retryCallback = t2, this;
      };
      var Hn = /* @__PURE__ */ new Set(["ETIMEDOUT", "ECONNRESET", "EADDRINUSE", "ECONNREFUSED", "EPIPE", "ENOTFOUND", "ENETUNREACH", "EAI_AGAIN"]), qn = /* @__PURE__ */ new Set([408, 413, 429, 500, 502, 503, 504, 521, 522, 524]);
      Bn.prototype._shouldRetry = function(e2, t2) {
        if (!this._maxRetries || this._retries++ >= this._maxRetries)
          return false;
        if (this._retryCallback)
          try {
            var n2 = this._retryCallback(e2, t2);
            if (true === n2)
              return true;
            if (false === n2)
              return false;
          } catch (e3) {
            console.error(e3);
          }
        if (t2 && t2.status && qn.has(t2.status))
          return true;
        if (e2) {
          if (e2.code && Hn.has(e2.code))
            return true;
          if (e2.timeout && "ECONNABORTED" === e2.code)
            return true;
          if (e2.crossDomain)
            return true;
        }
        return false;
      }, Bn.prototype._retry = function() {
        return this.clearTimeout(), this.req && (this.req = null, this.req = this.request()), this._aborted = false, this.timedout = false, this.timedoutError = null, this._end();
      }, Bn.prototype.then = function(e2, t2) {
        var n2 = this;
        if (!this._fullfilledPromise) {
          var r2 = this;
          this._endCalled && console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"), this._fullfilledPromise = new Promise(function(e3, t3) {
            r2.on("abort", function() {
              if (!(n2._maxRetries && n2._maxRetries > n2._retries))
                if (n2.timedout && n2.timedoutError)
                  t3(n2.timedoutError);
                else {
                  var e4 = new Error("Aborted");
                  e4.code = "ABORTED", e4.status = n2.status, e4.method = n2.method, e4.url = n2.url, t3(e4);
                }
            }), r2.end(function(n3, r3) {
              n3 ? t3(n3) : e3(r3);
            });
          });
        }
        return this._fullfilledPromise.then(e2, t2);
      }, Bn.prototype.catch = function(e2) {
        return this.then(void 0, e2);
      }, Bn.prototype.use = function(e2) {
        return e2(this), this;
      }, Bn.prototype.ok = function(e2) {
        if ("function" != typeof e2)
          throw new Error("Callback required");
        return this._okCallback = e2, this;
      }, Bn.prototype._isResponseOK = function(e2) {
        return !!e2 && (this._okCallback ? this._okCallback(e2) : e2.status >= 200 && e2.status < 300);
      }, Bn.prototype.get = function(e2) {
        return this._header[e2.toLowerCase()];
      }, Bn.prototype.getHeader = Bn.prototype.get, Bn.prototype.set = function(e2, t2) {
        if (Fn(e2)) {
          for (var n2 in e2)
            Object.prototype.hasOwnProperty.call(e2, n2) && this.set(n2, e2[n2]);
          return this;
        }
        return this._header[e2.toLowerCase()] = t2, this.header[e2] = t2, this;
      }, Bn.prototype.unset = function(e2) {
        return delete this._header[e2.toLowerCase()], delete this.header[e2], this;
      }, Bn.prototype.field = function(e2, t2) {
        if (null == e2)
          throw new Error(".field(name, val) name can not be empty");
        if (this._data)
          throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");
        if (Fn(e2)) {
          for (var n2 in e2)
            Object.prototype.hasOwnProperty.call(e2, n2) && this.field(n2, e2[n2]);
          return this;
        }
        if (Array.isArray(t2)) {
          for (var r2 in t2)
            Object.prototype.hasOwnProperty.call(t2, r2) && this.field(e2, t2[r2]);
          return this;
        }
        if (null == t2)
          throw new Error(".field(name, val) val can not be empty");
        return "boolean" == typeof t2 && (t2 = String(t2)), this._getFormData().append(e2, t2), this;
      }, Bn.prototype.abort = function() {
        return this._aborted || (this._aborted = true, this.xhr && this.xhr.abort(), this.req && this.req.abort(), this.clearTimeout(), this.emit("abort")), this;
      }, Bn.prototype._auth = function(e2, t2, n2, r2) {
        switch (n2.type) {
          case "basic":
            this.set("Authorization", "Basic ".concat(r2("".concat(e2, ":").concat(t2))));
            break;
          case "auto":
            this.username = e2, this.password = t2;
            break;
          case "bearer":
            this.set("Authorization", "Bearer ".concat(e2));
        }
        return this;
      }, Bn.prototype.withCredentials = function(e2) {
        return void 0 === e2 && (e2 = true), this._withCredentials = e2, this;
      }, Bn.prototype.redirects = function(e2) {
        return this._maxRedirects = e2, this;
      }, Bn.prototype.maxResponseSize = function(e2) {
        if ("number" != typeof e2)
          throw new TypeError("Invalid argument");
        return this._maxResponseSize = e2, this;
      }, Bn.prototype.toJSON = function() {
        return { method: this.method, url: this.url, data: this._data, headers: this._header };
      }, Bn.prototype.send = function(e2) {
        var t2 = Fn(e2), n2 = this._header["content-type"];
        if (this._formData)
          throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");
        if (t2 && !this._data)
          Array.isArray(e2) ? this._data = [] : this._isHost(e2) || (this._data = {});
        else if (e2 && this._data && this._isHost(this._data))
          throw new Error("Can't merge these send calls");
        if (t2 && Fn(this._data))
          for (var r2 in e2)
            Object.prototype.hasOwnProperty.call(e2, r2) && (this._data[r2] = e2[r2]);
        else
          "string" == typeof e2 ? (n2 || this.type("form"), (n2 = this._header["content-type"]) && (n2 = n2.toLowerCase().trim()), this._data = "application/x-www-form-urlencoded" === n2 ? this._data ? "".concat(this._data, "&").concat(e2) : e2 : (this._data || "") + e2) : this._data = e2;
        return !t2 || this._isHost(e2) || n2 || this.type("json"), this;
      }, Bn.prototype.sortQuery = function(e2) {
        return this._sort = void 0 === e2 || e2, this;
      }, Bn.prototype._finalizeQueryString = function() {
        var e2 = this._query.join("&");
        if (e2 && (this.url += (this.url.includes("?") ? "&" : "?") + e2), this._query.length = 0, this._sort) {
          var t2 = this.url.indexOf("?");
          if (t2 >= 0) {
            var n2 = this.url.slice(t2 + 1).split("&");
            "function" == typeof this._sort ? n2.sort(this._sort) : n2.sort(), this.url = this.url.slice(0, t2) + "?" + n2.join("&");
          }
        }
      }, Bn.prototype._appendQueryString = function() {
        console.warn("Unsupported");
      }, Bn.prototype._timeoutError = function(e2, t2, n2) {
        if (!this._aborted) {
          var r2 = new Error("".concat(e2 + t2, "ms exceeded"));
          r2.timeout = t2, r2.code = "ECONNABORTED", r2.errno = n2, this.timedout = true, this.timedoutError = r2, this.abort(), this.callback(r2);
        }
      }, Bn.prototype._setTimeouts = function() {
        var e2 = this;
        this._timeout && !this._timer && (this._timer = setTimeout(function() {
          e2._timeoutError("Timeout of ", e2._timeout, "ETIME");
        }, this._timeout)), this._responseTimeout && !this._responseTimeoutTimer && (this._responseTimeoutTimer = setTimeout(function() {
          e2._timeoutError("Response timeout of ", e2._responseTimeout, "ETIMEDOUT");
        }, this._responseTimeout));
      };
      var zn = {};
      function Vn(e2, t2) {
        var n2;
        if ("undefined" == typeof Symbol || null == e2[Symbol.iterator]) {
          if (Array.isArray(e2) || (n2 = function(e3, t3) {
            if (!e3)
              return;
            if ("string" == typeof e3)
              return Jn(e3, t3);
            var n3 = Object.prototype.toString.call(e3).slice(8, -1);
            "Object" === n3 && e3.constructor && (n3 = e3.constructor.name);
            if ("Map" === n3 || "Set" === n3)
              return Array.from(e3);
            if ("Arguments" === n3 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3))
              return Jn(e3, t3);
          }(e2)) || t2 && e2 && "number" == typeof e2.length) {
            n2 && (e2 = n2);
            var r2 = 0, i2 = function() {
            };
            return { s: i2, n: function() {
              return r2 >= e2.length ? { done: true } : { done: false, value: e2[r2++] };
            }, e: function(e3) {
              throw e3;
            }, f: i2 };
          }
          throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        var o2, s2 = true, a2 = false;
        return { s: function() {
          n2 = e2[Symbol.iterator]();
        }, n: function() {
          var e3 = n2.next();
          return s2 = e3.done, e3;
        }, e: function(e3) {
          a2 = true, o2 = e3;
        }, f: function() {
          try {
            s2 || null == n2.return || n2.return();
          } finally {
            if (a2)
              throw o2;
          }
        } };
      }
      function Jn(e2, t2) {
        (null == t2 || t2 > e2.length) && (t2 = e2.length);
        for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
          r2[n2] = e2[n2];
        return r2;
      }
      zn.type = function(e2) {
        return e2.split(/ *; */).shift();
      }, zn.params = function(e2) {
        var t2, n2 = {}, r2 = Vn(e2.split(/ *; */));
        try {
          for (r2.s(); !(t2 = r2.n()).done; ) {
            var i2 = t2.value.split(/ *= */), o2 = i2.shift(), s2 = i2.shift();
            o2 && s2 && (n2[o2] = s2);
          }
        } catch (e3) {
          r2.e(e3);
        } finally {
          r2.f();
        }
        return n2;
      }, zn.parseLinks = function(e2) {
        var t2, n2 = {}, r2 = Vn(e2.split(/ *, */));
        try {
          for (r2.s(); !(t2 = r2.n()).done; ) {
            var i2 = t2.value.split(/ *; */), o2 = i2[0].slice(1, -1);
            n2[i2[1].split(/ *= */)[1].slice(1, -1)] = o2;
          }
        } catch (e3) {
          r2.e(e3);
        } finally {
          r2.f();
        }
        return n2;
      }, zn.cleanHeader = function(e2, t2) {
        return delete e2["content-type"], delete e2["content-length"], delete e2["transfer-encoding"], delete e2.host, t2 && (delete e2.authorization, delete e2.cookie), e2;
      };
      var Wn = zn, Xn = $n;
      function $n(e2) {
        if (e2)
          return function(e3) {
            for (var t2 in $n.prototype)
              Object.prototype.hasOwnProperty.call($n.prototype, t2) && (e3[t2] = $n.prototype[t2]);
            return e3;
          }(e2);
      }
      function Qn(e2) {
        return function(e3) {
          if (Array.isArray(e3))
            return Yn(e3);
        }(e2) || function(e3) {
          if ("undefined" != typeof Symbol && Symbol.iterator in Object(e3))
            return Array.from(e3);
        }(e2) || function(e3, t2) {
          if (!e3)
            return;
          if ("string" == typeof e3)
            return Yn(e3, t2);
          var n2 = Object.prototype.toString.call(e3).slice(8, -1);
          "Object" === n2 && e3.constructor && (n2 = e3.constructor.name);
          if ("Map" === n2 || "Set" === n2)
            return Array.from(e3);
          if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
            return Yn(e3, t2);
        }(e2) || function() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }();
      }
      function Yn(e2, t2) {
        (null == t2 || t2 > e2.length) && (t2 = e2.length);
        for (var n2 = 0, r2 = new Array(t2); n2 < t2; n2++)
          r2[n2] = e2[n2];
        return r2;
      }
      function Zn() {
        this._defaults = [];
      }
      $n.prototype.get = function(e2) {
        return this.header[e2.toLowerCase()];
      }, $n.prototype._setHeaderProperties = function(e2) {
        var t2 = e2["content-type"] || "";
        this.type = Wn.type(t2);
        var n2 = Wn.params(t2);
        for (var r2 in n2)
          Object.prototype.hasOwnProperty.call(n2, r2) && (this[r2] = n2[r2]);
        this.links = {};
        try {
          e2.link && (this.links = Wn.parseLinks(e2.link));
        } catch (e3) {
        }
      }, $n.prototype._setStatusProperties = function(e2) {
        var t2 = e2 / 100 | 0;
        this.statusCode = e2, this.status = this.statusCode, this.statusType = t2, this.info = 1 === t2, this.ok = 2 === t2, this.redirect = 3 === t2, this.clientError = 4 === t2, this.serverError = 5 === t2, this.error = (4 === t2 || 5 === t2) && this.toError(), this.created = 201 === e2, this.accepted = 202 === e2, this.noContent = 204 === e2, this.badRequest = 400 === e2, this.unauthorized = 401 === e2, this.notAcceptable = 406 === e2, this.forbidden = 403 === e2, this.notFound = 404 === e2, this.unprocessableEntity = 422 === e2;
      }, ["use", "on", "once", "set", "query", "type", "accept", "auth", "withCredentials", "sortQuery", "retry", "ok", "redirects", "timeout", "buffer", "serialize", "parse", "ca", "key", "pfx", "cert", "disableTLSCerts"].forEach(function(e2) {
        Zn.prototype[e2] = function() {
          for (var t2 = arguments.length, n2 = new Array(t2), r2 = 0; r2 < t2; r2++)
            n2[r2] = arguments[r2];
          return this._defaults.push({ fn: e2, args: n2 }), this;
        };
      }), Zn.prototype._setDefaults = function(e2) {
        this._defaults.forEach(function(t2) {
          e2[t2.fn].apply(e2, Qn(t2.args));
        });
      };
      var er = Zn;
      !function(e2, t2) {
        function n2(e3) {
          return n2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e4) {
            return typeof e4;
          } : function(e4) {
            return e4 && "function" == typeof Symbol && e4.constructor === Symbol && e4 !== Symbol.prototype ? "symbol" : typeof e4;
          }, n2(e3);
        }
        var r2;
        "undefined" != typeof window ? r2 = window : "undefined" == typeof self ? (console.warn("Using browser-only version of superagent in non-browser environment"), r2 = void 0) : r2 = self;
        var i2 = Vt.exports, o2 = Jt, s2 = In, a2 = Ln, u2 = Gn, c2 = Xn, l2 = er;
        function p2() {
        }
        e2.exports = function(e3, n3) {
          return "function" == typeof n3 ? new t2.Request("GET", e3).end(n3) : 1 === arguments.length ? new t2.Request("GET", e3) : new t2.Request(e3, n3);
        };
        var h2 = t2 = e2.exports;
        t2.Request = m2, h2.getXHR = function() {
          if (r2.XMLHttpRequest && (!r2.location || "file:" !== r2.location.protocol || !r2.ActiveXObject))
            return new XMLHttpRequest();
          try {
            return new ActiveXObject("Microsoft.XMLHTTP");
          } catch (e3) {
          }
          try {
            return new ActiveXObject("Msxml2.XMLHTTP.6.0");
          } catch (e3) {
          }
          try {
            return new ActiveXObject("Msxml2.XMLHTTP.3.0");
          } catch (e3) {
          }
          try {
            return new ActiveXObject("Msxml2.XMLHTTP");
          } catch (e3) {
          }
          throw new Error("Browser-only version of superagent could not find XHR");
        };
        var f2 = "".trim ? function(e3) {
          return e3.trim();
        } : function(e3) {
          return e3.replace(/(^\s*|\s*$)/g, "");
        };
        function d2(e3) {
          if (!u2(e3))
            return e3;
          var t3 = [];
          for (var n3 in e3)
            Object.prototype.hasOwnProperty.call(e3, n3) && g2(t3, n3, e3[n3]);
          return t3.join("&");
        }
        function g2(e3, t3, n3) {
          if (void 0 !== n3)
            if (null !== n3)
              if (Array.isArray(n3))
                n3.forEach(function(n4) {
                  g2(e3, t3, n4);
                });
              else if (u2(n3))
                for (var r3 in n3)
                  Object.prototype.hasOwnProperty.call(n3, r3) && g2(e3, "".concat(t3, "[").concat(r3, "]"), n3[r3]);
              else
                e3.push(encodeURI(t3) + "=" + encodeURIComponent(n3));
            else
              e3.push(encodeURI(t3));
        }
        function y2(e3) {
          for (var t3, n3, r3 = {}, i3 = e3.split("&"), o3 = 0, s3 = i3.length; o3 < s3; ++o3)
            -1 === (n3 = (t3 = i3[o3]).indexOf("=")) ? r3[decodeURIComponent(t3)] = "" : r3[decodeURIComponent(t3.slice(0, n3))] = decodeURIComponent(t3.slice(n3 + 1));
          return r3;
        }
        function b2(e3) {
          return /[/+]json($|[^-\w])/i.test(e3);
        }
        function v2(e3) {
          this.req = e3, this.xhr = this.req.xhr, this.text = "HEAD" !== this.req.method && ("" === this.xhr.responseType || "text" === this.xhr.responseType) || void 0 === this.xhr.responseType ? this.xhr.responseText : null, this.statusText = this.req.xhr.statusText;
          var t3 = this.xhr.status;
          1223 === t3 && (t3 = 204), this._setStatusProperties(t3), this.headers = function(e4) {
            for (var t4, n3, r3, i3, o3 = e4.split(/\r?\n/), s3 = {}, a3 = 0, u3 = o3.length; a3 < u3; ++a3)
              -1 !== (t4 = (n3 = o3[a3]).indexOf(":")) && (r3 = n3.slice(0, t4).toLowerCase(), i3 = f2(n3.slice(t4 + 1)), s3[r3] = i3);
            return s3;
          }(this.xhr.getAllResponseHeaders()), this.header = this.headers, this.header["content-type"] = this.xhr.getResponseHeader("content-type"), this._setHeaderProperties(this.header), null === this.text && e3._responseType ? this.body = this.xhr.response : this.body = "HEAD" === this.req.method ? null : this._parseBody(this.text ? this.text : this.xhr.response);
        }
        function m2(e3, t3) {
          var n3 = this;
          this._query = this._query || [], this.method = e3, this.url = t3, this.header = {}, this._header = {}, this.on("end", function() {
            var e4, t4 = null, r3 = null;
            try {
              r3 = new v2(n3);
            } catch (e5) {
              return (t4 = new Error("Parser is unable to parse the response")).parse = true, t4.original = e5, n3.xhr ? (t4.rawResponse = void 0 === n3.xhr.responseType ? n3.xhr.responseText : n3.xhr.response, t4.status = n3.xhr.status ? n3.xhr.status : null, t4.statusCode = t4.status) : (t4.rawResponse = null, t4.status = null), n3.callback(t4);
            }
            n3.emit("response", r3);
            try {
              n3._isResponseOK(r3) || (e4 = new Error(r3.statusText || r3.text || "Unsuccessful HTTP response"));
            } catch (t5) {
              e4 = t5;
            }
            e4 ? (e4.original = t4, e4.response = r3, e4.status = r3.status, n3.callback(e4, r3)) : n3.callback(null, r3);
          });
        }
        function _2(e3, t3, n3) {
          var r3 = h2("DELETE", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.send(t3), n3 && r3.end(n3), r3;
        }
        h2.serializeObject = d2, h2.parseString = y2, h2.types = { html: "text/html", json: "application/json", xml: "text/xml", urlencoded: "application/x-www-form-urlencoded", form: "application/x-www-form-urlencoded", "form-data": "application/x-www-form-urlencoded" }, h2.serialize = { "application/x-www-form-urlencoded": s2.stringify, "application/json": o2 }, h2.parse = { "application/x-www-form-urlencoded": y2, "application/json": JSON.parse }, c2(v2.prototype), v2.prototype._parseBody = function(e3) {
          var t3 = h2.parse[this.type];
          return this.req._parser ? this.req._parser(this, e3) : (!t3 && b2(this.type) && (t3 = h2.parse["application/json"]), t3 && e3 && (e3.length > 0 || e3 instanceof Object) ? t3(e3) : null);
        }, v2.prototype.toError = function() {
          var e3 = this.req, t3 = e3.method, n3 = e3.url, r3 = "cannot ".concat(t3, " ").concat(n3, " (").concat(this.status, ")"), i3 = new Error(r3);
          return i3.status = this.status, i3.method = t3, i3.url = n3, i3;
        }, h2.Response = v2, i2(m2.prototype), a2(m2.prototype), m2.prototype.type = function(e3) {
          return this.set("Content-Type", h2.types[e3] || e3), this;
        }, m2.prototype.accept = function(e3) {
          return this.set("Accept", h2.types[e3] || e3), this;
        }, m2.prototype.auth = function(e3, t3, r3) {
          1 === arguments.length && (t3 = ""), "object" === n2(t3) && null !== t3 && (r3 = t3, t3 = ""), r3 || (r3 = { type: "function" == typeof btoa ? "basic" : "auto" });
          var i3 = function(e4) {
            if ("function" == typeof btoa)
              return btoa(e4);
            throw new Error("Cannot use basic auth, btoa is not a function");
          };
          return this._auth(e3, t3, r3, i3);
        }, m2.prototype.query = function(e3) {
          return "string" != typeof e3 && (e3 = d2(e3)), e3 && this._query.push(e3), this;
        }, m2.prototype.attach = function(e3, t3, n3) {
          if (t3) {
            if (this._data)
              throw new Error("superagent can't mix .send() and .attach()");
            this._getFormData().append(e3, t3, n3 || t3.name);
          }
          return this;
        }, m2.prototype._getFormData = function() {
          return this._formData || (this._formData = new r2.FormData()), this._formData;
        }, m2.prototype.callback = function(e3, t3) {
          if (this._shouldRetry(e3, t3))
            return this._retry();
          var n3 = this._callback;
          this.clearTimeout(), e3 && (this._maxRetries && (e3.retries = this._retries - 1), this.emit("error", e3)), n3(e3, t3);
        }, m2.prototype.crossDomainError = function() {
          var e3 = new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");
          e3.crossDomain = true, e3.status = this.status, e3.method = this.method, e3.url = this.url, this.callback(e3);
        }, m2.prototype.agent = function() {
          return console.warn("This is not supported in browser version of superagent"), this;
        }, m2.prototype.ca = m2.prototype.agent, m2.prototype.buffer = m2.prototype.ca, m2.prototype.write = function() {
          throw new Error("Streaming is not supported in browser version of superagent");
        }, m2.prototype.pipe = m2.prototype.write, m2.prototype._isHost = function(e3) {
          return e3 && "object" === n2(e3) && !Array.isArray(e3) && "[object Object]" !== Object.prototype.toString.call(e3);
        }, m2.prototype.end = function(e3) {
          this._endCalled && console.warn("Warning: .end() was called twice. This is not supported in superagent"), this._endCalled = true, this._callback = e3 || p2, this._finalizeQueryString(), this._end();
        }, m2.prototype._setUploadTimeout = function() {
          var e3 = this;
          this._uploadTimeout && !this._uploadTimeoutTimer && (this._uploadTimeoutTimer = setTimeout(function() {
            e3._timeoutError("Upload timeout of ", e3._uploadTimeout, "ETIMEDOUT");
          }, this._uploadTimeout));
        }, m2.prototype._end = function() {
          if (this._aborted)
            return this.callback(new Error("The request has been aborted even before .end() was called"));
          var e3 = this;
          this.xhr = h2.getXHR();
          var t3 = this.xhr, n3 = this._formData || this._data;
          this._setTimeouts(), t3.onreadystatechange = function() {
            var n4 = t3.readyState;
            if (n4 >= 2 && e3._responseTimeoutTimer && clearTimeout(e3._responseTimeoutTimer), 4 === n4) {
              var r4;
              try {
                r4 = t3.status;
              } catch (e4) {
                r4 = 0;
              }
              if (!r4) {
                if (e3.timedout || e3._aborted)
                  return;
                return e3.crossDomainError();
              }
              e3.emit("end");
            }
          };
          var r3 = function(t4, n4) {
            n4.total > 0 && (n4.percent = n4.loaded / n4.total * 100, 100 === n4.percent && clearTimeout(e3._uploadTimeoutTimer)), n4.direction = t4, e3.emit("progress", n4);
          };
          if (this.hasListeners("progress"))
            try {
              t3.addEventListener("progress", r3.bind(null, "download")), t3.upload && t3.upload.addEventListener("progress", r3.bind(null, "upload"));
            } catch (e4) {
            }
          t3.upload && this._setUploadTimeout();
          try {
            this.username && this.password ? t3.open(this.method, this.url, true, this.username, this.password) : t3.open(this.method, this.url, true);
          } catch (e4) {
            return this.callback(e4);
          }
          if (this._withCredentials && (t3.withCredentials = true), !this._formData && "GET" !== this.method && "HEAD" !== this.method && "string" != typeof n3 && !this._isHost(n3)) {
            var i3 = this._header["content-type"], o3 = this._serializer || h2.serialize[i3 ? i3.split(";")[0] : ""];
            !o3 && b2(i3) && (o3 = h2.serialize["application/json"]), o3 && (n3 = o3(n3));
          }
          for (var s3 in this.header)
            null !== this.header[s3] && Object.prototype.hasOwnProperty.call(this.header, s3) && t3.setRequestHeader(s3, this.header[s3]);
          this._responseType && (t3.responseType = this._responseType), this.emit("request", this), t3.send(void 0 === n3 ? null : n3);
        }, h2.agent = function() {
          return new l2();
        }, ["GET", "POST", "OPTIONS", "PATCH", "PUT", "DELETE"].forEach(function(e3) {
          l2.prototype[e3.toLowerCase()] = function(t3, n3) {
            var r3 = new h2.Request(e3, t3);
            return this._setDefaults(r3), n3 && r3.end(n3), r3;
          };
        }), l2.prototype.del = l2.prototype.delete, h2.get = function(e3, t3, n3) {
          var r3 = h2("GET", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.query(t3), n3 && r3.end(n3), r3;
        }, h2.head = function(e3, t3, n3) {
          var r3 = h2("HEAD", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.query(t3), n3 && r3.end(n3), r3;
        }, h2.options = function(e3, t3, n3) {
          var r3 = h2("OPTIONS", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.send(t3), n3 && r3.end(n3), r3;
        }, h2.del = _2, h2.delete = _2, h2.patch = function(e3, t3, n3) {
          var r3 = h2("PATCH", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.send(t3), n3 && r3.end(n3), r3;
        }, h2.post = function(e3, t3, n3) {
          var r3 = h2("POST", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.send(t3), n3 && r3.end(n3), r3;
        }, h2.put = function(e3, t3, n3) {
          var r3 = h2("PUT", e3);
          return "function" == typeof t3 && (n3 = t3, t3 = null), t3 && r3.send(t3), n3 && r3.end(n3), r3;
        };
      }(zt, zt.exports);
      var tr = zt.exports;
      function nr(e2) {
        var t2 = new Date().getTime(), n2 = new Date().toISOString(), r2 = console && console.log ? console : window && window.console && window.console.log ? window.console : console;
        r2.log("<<<<<"), r2.log("[".concat(n2, "]"), "\n", e2.url, "\n", e2.qs), r2.log("-----"), e2.on("response", function(n3) {
          var i2 = new Date().getTime() - t2, o2 = new Date().toISOString();
          r2.log(">>>>>>"), r2.log("[".concat(o2, " / ").concat(i2, "]"), "\n", e2.url, "\n", e2.qs, "\n", n3.text), r2.log("-----");
        });
      }
      function rr(e2, t2, n2) {
        var r2 = this;
        this._config.logVerbosity && (e2 = e2.use(nr)), this._config.proxy && this._modules.proxy && (e2 = this._modules.proxy.call(this, e2)), this._config.keepAlive && this._modules.keepAlive && (e2 = this._modules.keepAlive(e2));
        var i2 = e2;
        if (t2.abortSignal)
          var o2 = t2.abortSignal.subscribe(function() {
            i2.abort(), o2();
          });
        return true === t2.forceBuffered ? i2 = "undefined" == typeof Blob ? i2.buffer().responseType("arraybuffer") : i2.responseType("arraybuffer") : false === t2.forceBuffered && (i2 = i2.buffer(false)), (i2 = i2.timeout(t2.timeout)).on("abort", function() {
          return n2({ category: A.PNUnknownCategory, error: true, operation: t2.operation, errorData: new Error("Aborted") }, null);
        }), i2.end(function(e3, i3) {
          var o3, s2 = {};
          if (s2.error = null !== e3, s2.operation = t2.operation, i3 && i3.status && (s2.statusCode = i3.status), e3) {
            if (e3.response && e3.response.text && !r2._config.logVerbosity)
              try {
                s2.errorData = JSON.parse(e3.response.text);
              } catch (t3) {
                s2.errorData = e3;
              }
            else
              s2.errorData = e3;
            return s2.category = r2._detectErrorCategory(e3), n2(s2, null);
          }
          if (t2.ignoreBody)
            o3 = { headers: i3.headers, redirects: i3.redirects, response: i3 };
          else
            try {
              o3 = JSON.parse(i3.text);
            } catch (e4) {
              return s2.errorData = i3, s2.error = true, n2(s2, null);
            }
          return o3.error && 1 === o3.error && o3.status && o3.message && o3.service ? (s2.errorData = o3, s2.statusCode = o3.status, s2.error = true, s2.category = r2._detectErrorCategory(s2), n2(s2, null)) : (o3.error && o3.error.message && (s2.errorData = o3.error), n2(s2, o3));
        }), i2;
      }
      function ir(e2, t2, n2) {
        return i(this, void 0, void 0, function() {
          var r2;
          return o(this, function(i2) {
            switch (i2.label) {
              case 0:
                return r2 = tr.post(e2), t2.forEach(function(e3) {
                  var t3 = e3.key, n3 = e3.value;
                  r2 = r2.field(t3, n3);
                }), r2.attach("file", n2, { contentType: "application/octet-stream" }), [4, r2];
              case 1:
                return [2, i2.sent()];
            }
          });
        });
      }
      function or(e2, t2, n2) {
        var r2 = tr.get(this.getStandardOrigin() + t2.url).set(t2.headers).query(e2);
        return rr.call(this, r2, t2, n2);
      }
      function sr(e2, t2, n2) {
        var r2 = tr.get(this.getStandardOrigin() + t2.url).set(t2.headers).query(e2);
        return rr.call(this, r2, t2, n2);
      }
      function ar(e2, t2, n2, r2) {
        var i2 = tr.post(this.getStandardOrigin() + n2.url).query(e2).set(n2.headers).send(t2);
        return rr.call(this, i2, n2, r2);
      }
      function ur(e2, t2, n2, r2) {
        var i2 = tr.patch(this.getStandardOrigin() + n2.url).query(e2).set(n2.headers).send(t2);
        return rr.call(this, i2, n2, r2);
      }
      function cr(e2, t2, n2) {
        var r2 = tr.delete(this.getStandardOrigin() + t2.url).set(t2.headers).query(e2);
        return rr.call(this, r2, t2, n2);
      }
      function lr(e2, t2) {
        var n2 = new Uint8Array(e2.byteLength + t2.byteLength);
        return n2.set(new Uint8Array(e2), 0), n2.set(new Uint8Array(t2), e2.byteLength), n2.buffer;
      }
      var pr, hr = function() {
        function e2() {
        }
        return Object.defineProperty(e2.prototype, "algo", { get: function() {
          return "aes-256-cbc";
        }, enumerable: false, configurable: true }), e2.prototype.encrypt = function(e3, t2) {
          return i(this, void 0, void 0, function() {
            var n2;
            return o(this, function(r2) {
              switch (r2.label) {
                case 0:
                  return [4, this.getKey(e3)];
                case 1:
                  if (n2 = r2.sent(), t2 instanceof ArrayBuffer)
                    return [2, this.encryptArrayBuffer(n2, t2)];
                  if ("string" == typeof t2)
                    return [2, this.encryptString(n2, t2)];
                  throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer");
              }
            });
          });
        }, e2.prototype.decrypt = function(e3, t2) {
          return i(this, void 0, void 0, function() {
            var n2;
            return o(this, function(r2) {
              switch (r2.label) {
                case 0:
                  return [4, this.getKey(e3)];
                case 1:
                  if (n2 = r2.sent(), t2 instanceof ArrayBuffer)
                    return [2, this.decryptArrayBuffer(n2, t2)];
                  if ("string" == typeof t2)
                    return [2, this.decryptString(n2, t2)];
                  throw new Error("Cannot decrypt this file. In browsers file decryption supports only string or ArrayBuffer");
              }
            });
          });
        }, e2.prototype.encryptFile = function(e3, t2, n2) {
          return i(this, void 0, void 0, function() {
            var r2, i2, s2;
            return o(this, function(o2) {
              switch (o2.label) {
                case 0:
                  return [4, this.getKey(e3)];
                case 1:
                  return r2 = o2.sent(), [4, t2.toArrayBuffer()];
                case 2:
                  return i2 = o2.sent(), [4, this.encryptArrayBuffer(r2, i2)];
                case 3:
                  return s2 = o2.sent(), [2, n2.create({ name: t2.name, mimeType: "application/octet-stream", data: s2 })];
              }
            });
          });
        }, e2.prototype.decryptFile = function(e3, t2, n2) {
          return i(this, void 0, void 0, function() {
            var r2, i2, s2;
            return o(this, function(o2) {
              switch (o2.label) {
                case 0:
                  return [4, this.getKey(e3)];
                case 1:
                  return r2 = o2.sent(), [4, t2.toArrayBuffer()];
                case 2:
                  return i2 = o2.sent(), [4, this.decryptArrayBuffer(r2, i2)];
                case 3:
                  return s2 = o2.sent(), [2, n2.create({ name: t2.name, data: s2 })];
              }
            });
          });
        }, e2.prototype.getKey = function(e3) {
          return i(this, void 0, void 0, function() {
            var t2, n2, r2;
            return o(this, function(i2) {
              switch (i2.label) {
                case 0:
                  return t2 = Buffer.from(e3), [4, crypto.subtle.digest("SHA-256", t2.buffer)];
                case 1:
                  return n2 = i2.sent(), r2 = Buffer.from(Buffer.from(n2).toString("hex").slice(0, 32), "utf8").buffer, [2, crypto.subtle.importKey("raw", r2, "AES-CBC", true, ["encrypt", "decrypt"])];
              }
            });
          });
        }, e2.prototype.encryptArrayBuffer = function(e3, t2) {
          return i(this, void 0, void 0, function() {
            var n2, r2, i2;
            return o(this, function(o2) {
              switch (o2.label) {
                case 0:
                  return n2 = crypto.getRandomValues(new Uint8Array(16)), r2 = lr, i2 = [n2.buffer], [4, crypto.subtle.encrypt({ name: "AES-CBC", iv: n2 }, e3, t2)];
                case 1:
                  return [2, r2.apply(void 0, i2.concat([o2.sent()]))];
              }
            });
          });
        }, e2.prototype.decryptArrayBuffer = function(e3, t2) {
          return i(this, void 0, void 0, function() {
            var n2;
            return o(this, function(r2) {
              return n2 = t2.slice(0, 16), [2, crypto.subtle.decrypt({ name: "AES-CBC", iv: n2 }, e3, t2.slice(16))];
            });
          });
        }, e2.prototype.encryptString = function(e3, t2) {
          return i(this, void 0, void 0, function() {
            var n2, r2, i2, s2;
            return o(this, function(o2) {
              switch (o2.label) {
                case 0:
                  return n2 = crypto.getRandomValues(new Uint8Array(16)), r2 = Buffer.from(t2).buffer, [4, crypto.subtle.encrypt({ name: "AES-CBC", iv: n2 }, e3, r2)];
                case 1:
                  return i2 = o2.sent(), s2 = lr(n2.buffer, i2), [2, Buffer.from(s2).toString("utf8")];
              }
            });
          });
        }, e2.prototype.decryptString = function(e3, t2) {
          return i(this, void 0, void 0, function() {
            var n2, r2, i2, s2;
            return o(this, function(o2) {
              switch (o2.label) {
                case 0:
                  return n2 = Buffer.from(t2), r2 = n2.slice(0, 16), i2 = n2.slice(16), [4, crypto.subtle.decrypt({ name: "AES-CBC", iv: r2 }, e3, i2)];
                case 1:
                  return s2 = o2.sent(), [2, Buffer.from(s2).toString("utf8")];
              }
            });
          });
        }, e2.IV_LENGTH = 16, e2;
      }(), fr = (pr = function() {
        function e2(e3) {
          if (e3 instanceof File)
            this.data = e3, this.name = this.data.name, this.mimeType = this.data.type;
          else if (e3.data) {
            var t2 = e3.data;
            this.data = new File([t2], e3.name, { type: e3.mimeType }), this.name = e3.name, e3.mimeType && (this.mimeType = e3.mimeType);
          }
          if (void 0 === this.data)
            throw new Error("Couldn't construct a file out of supplied options.");
          if (void 0 === this.name)
            throw new Error("Couldn't guess filename out of the options. Please provide one.");
        }
        return e2.create = function(e3) {
          return new this(e3);
        }, e2.prototype.toBuffer = function() {
          return i(this, void 0, void 0, function() {
            return o(this, function(e3) {
              throw new Error("This feature is only supported in Node.js environments.");
            });
          });
        }, e2.prototype.toStream = function() {
          return i(this, void 0, void 0, function() {
            return o(this, function(e3) {
              throw new Error("This feature is only supported in Node.js environments.");
            });
          });
        }, e2.prototype.toFileUri = function() {
          return i(this, void 0, void 0, function() {
            return o(this, function(e3) {
              throw new Error("This feature is only supported in react native environments.");
            });
          });
        }, e2.prototype.toBlob = function() {
          return i(this, void 0, void 0, function() {
            return o(this, function(e3) {
              return [2, this.data];
            });
          });
        }, e2.prototype.toArrayBuffer = function() {
          return i(this, void 0, void 0, function() {
            var e3 = this;
            return o(this, function(t2) {
              return [2, new Promise(function(t3, n2) {
                var r2 = new FileReader();
                r2.addEventListener("load", function() {
                  if (r2.result instanceof ArrayBuffer)
                    return t3(r2.result);
                }), r2.addEventListener("error", function() {
                  n2(r2.error);
                }), r2.readAsArrayBuffer(e3.data);
              })];
            });
          });
        }, e2.prototype.toString = function() {
          return i(this, void 0, void 0, function() {
            var e3 = this;
            return o(this, function(t2) {
              return [2, new Promise(function(t3, n2) {
                var r2 = new FileReader();
                r2.addEventListener("load", function() {
                  if ("string" == typeof r2.result)
                    return t3(r2.result);
                }), r2.addEventListener("error", function() {
                  n2(r2.error);
                }), r2.readAsBinaryString(e3.data);
              })];
            });
          });
        }, e2.prototype.toFile = function() {
          return i(this, void 0, void 0, function() {
            return o(this, function(e3) {
              return [2, this.data];
            });
          });
        }, e2;
      }(), pr.supportsFile = "undefined" != typeof File, pr.supportsBlob = "undefined" != typeof Blob, pr.supportsArrayBuffer = "undefined" != typeof ArrayBuffer, pr.supportsBuffer = false, pr.supportsStream = false, pr.supportsString = true, pr.supportsEncryptFile = true, pr.supportsFileUri = false, pr);
      function dr(e2) {
        if (!navigator || !navigator.sendBeacon)
          return false;
        navigator.sendBeacon(e2);
      }
      var gr = function(e2) {
        function n2(t2) {
          var n3 = this, r2 = t2.listenToBrowserNetworkEvents, i2 = void 0 === r2 || r2;
          return t2.sdkFamily = "Web", t2.networking = new Lt({ del: cr, get: sr, post: ar, patch: ur, sendBeacon: dr, getfile: or, postfile: ir }), t2.cbor = new qt(function(e3) {
            return Ht(p.decode(e3));
          }, Bt), t2.PubNubFile = fr, t2.cryptography = new hr(), n3 = e2.call(this, t2) || this, i2 && (window.addEventListener("offline", function() {
            n3.networkDownDetected();
          }), window.addEventListener("online", function() {
            n3.networkUpDetected();
          })), n3;
        }
        return t(n2, e2), n2;
      }(Ft);
      return gr;
    });
  }
});

// dep:pubnub
var pubnub_default = require_pubnub_min();
export {
  pubnub_default as default
};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
/*! lil-uuid - v0.1 - MIT License - https://github.com/lil-js/uuid */
//# sourceMappingURL=pubnub.js.map
